<!DOCTYPE html>
<html>

  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta property="og:title" content="Jo Blog">
    <meta property="og:description" content="Jo Seungwan Blog!~~!">
    <meta property="og:image" content="https://raw.githubusercontent.com/joswlv/joswlv.github.io/master/bg.jpg">
    <meta property="og:url" content="https://joswlv.github.io">

    <title>Joswlv</title>
    <meta name="description" content="">

    <link rel="shortcut icon" href="/favicon.ico?" type="image/x-icon">
    <link rel="icon" href="/favicon.ico?" type="image/x-icon">
    <link rel="stylesheet" href="/css/fontawesome/css/font-awesome.min.css ">
    <link rel="stylesheet" href="/css/main.css ">
    <link rel="canonical" href="http://joswlv.github.io/page7/">
    <link rel="alternate" type="application/rss+xml" title="Joswlv" href="http://joswlv.github.io/feed.xml ">



<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-83868242-1', 'auto');
  ga('send', 'pageview');

</script>

</head>


  <body>

    <header id="top">
    <div class="wrapper">
        <a href="/" class="brand">Joswlv</a>
        <small></small>
        <button id="headerMenu" class="menu"><i class="fa fa-bars"></i></button>
        <nav id="headerNav">
            <ul>
                <li>
                    
                    <a href="/">
                    
                        <i class="fa fa-home"></i>Home
                    </a>
                </li>

                
                    
                    <li>
                        
                        <a href="/archive/">
                        
                            <i class="fa fa-archive"></i>Archives
                        </a>
                    </li>
                    
                
                    
                    <li>
                        
                        <a href="/category/">
                        
                            <i class="fa fa-th-list"></i>Categories
                        </a>
                    </li>
                    
                
                    
                
                    
                
                    
                
                    
                
                    
                
                    
                
                    
                
                    
                
                    
                
                    
                
                    
                
                    
                
            </ul>
        </nav>
    </div>
</header>


        <div class="page clearfix" index>
    <div class="left">
        <!-- <h1>Welcome to SW's Blog!</h1>
        <small></small> -->
        <hr>
        <ul>
            
              <li>
                <h2>
                  <a class="post-link" href="/2016/09/21/beancontext2/">스프링 IoC컨테이너 ApplicationContext [2]</a>
                </h2>
                <div class="label">
                    <div class="label-card">
                        <i class="fa fa-calendar"></i>2016-09-21
                    </div>
                    <div class="label-card">
                        
                    </div>
                    <div class="label-card">
                        
                    </div>

                    <div class="label-card">
                    


<!-- <span class="point">•</span> -->
<span class="categories">
  <i class="fa fa-th-list"></i>
  
    
        <a href="/category/#Spring" title="Category: Spring" rel="category">Spring</a>
    
  

  <!-- <span class="point">•</span> -->
</span>


                    </div>

                </div>
                <div class="excerpt">
                    <h1 id="xml----">XML 기반 빈 관리 컨테이너</h1>

<h3 id="section">팩토리 메서드와 팩토리 빈</h3>

<p>객체 지향 설계 기법 중에서 팩토리 메서드(factory method) 패턴과 빌더(Builder)패턴이 있다.</p>

<p>인스턴스를 생성하는 일반적인 방법은 new 명령을 사용하는 것인데, new 명령을 통해 클래스와 생성자를 지정하면 해당 클래스의 인스턴스가 생성되고 초기화 된다. 문제는 인스턴스 생성작업이 복잡한 경우이다. 매번 인스턴스를 생성할 때마다 복잡한 과정을 거쳐야 한다면 코딩할 때 부담이 된다. 이를 해결하기 위해 나온 것이 팩토리 메서드 패던과 빌더 패턴이다.</p>

<p>팩토리 클래스는 인스턴스 생성과정을 캡슐화 한다. 즉 인스턴스를 생성하고 초기화하는 복잡한 과정을 감추기 때문에 개발자입장에서는 인스턴스를 얻는 과정이 간결해진다.</p>

<p>팩토리 메서드를 만들 때는 두가지 방법이 있다. 스태틱으로 선언하여 클래스 메서드로 만들거나 아니면 인스턴스 메서드로 만드는 것이다.</p>

<p>먼저 스태틱으로 선언된 팩토리 메서드를 설정하는 방법을 보자</p>

<p><br /></p>

<div class="language-java highlighter-rouge"><pre class="highlight"><code><span class="kn">package</span> <span class="n">exam</span><span class="o">.</span><span class="na">test11</span><span class="o">;</span>

<span class="kn">import</span> <span class="nn">java.text.SimpleDateFormat</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">java.util.Properties</span><span class="o">;</span>

<span class="kd">public</span> <span class="kd">class</span> <span class="nc">TireFactory</span> <span class="o">{</span>
	<span class="kd">public</span> <span class="kd">static</span> <span class="n">Tire</span> <span class="nf">createTire</span><span class="o">(</span><span class="n">String</span> <span class="n">maker</span><span class="o">)</span> <span class="o">{</span>
		<span class="k">if</span> <span class="o">(</span><span class="n">maker</span><span class="o">.</span><span class="na">equals</span><span class="o">(</span><span class="s">"Hankook"</span><span class="o">))</span> <span class="o">{</span>
			<span class="k">return</span> <span class="nf">createHankookTire</span><span class="o">();</span>
		<span class="o">}</span> <span class="k">else</span> <span class="o">{</span>
			<span class="k">return</span> <span class="nf">createKumhoTire</span><span class="o">();</span>
		<span class="o">}</span>
	<span class="o">}</span>
	
	<span class="kd">private</span> <span class="kd">static</span> <span class="n">Tire</span> <span class="nf">createHankookTire</span><span class="o">()</span> <span class="o">{</span>
		<span class="n">Tire</span> <span class="n">tire</span> <span class="o">=</span> <span class="k">new</span> <span class="n">Tire</span><span class="o">();</span>
		<span class="n">tire</span><span class="o">.</span><span class="na">setMaker</span><span class="o">(</span><span class="s">"Hankook"</span><span class="o">);</span>
		
		<span class="n">Properties</span> <span class="n">specProp</span> <span class="o">=</span> <span class="k">new</span> <span class="n">Properties</span><span class="o">();</span>
		<span class="n">specProp</span><span class="o">.</span><span class="na">setProperty</span><span class="o">(</span><span class="s">"width"</span><span class="o">,</span> <span class="s">"205"</span><span class="o">);</span>
		<span class="n">specProp</span><span class="o">.</span><span class="na">setProperty</span><span class="o">(</span><span class="s">"ratio"</span><span class="o">,</span> <span class="s">"65"</span><span class="o">);</span>
		<span class="n">specProp</span><span class="o">.</span><span class="na">setProperty</span><span class="o">(</span><span class="s">"rim.diameter"</span><span class="o">,</span> <span class="s">"14"</span><span class="o">);</span>
		<span class="n">tire</span><span class="o">.</span><span class="na">setSpec</span><span class="o">(</span><span class="n">specProp</span><span class="o">);</span>
		
		<span class="n">SimpleDateFormat</span> <span class="n">dateFormat</span> <span class="o">=</span> <span class="k">new</span> <span class="n">SimpleDateFormat</span><span class="o">(</span><span class="s">"yyyy-MM-dd"</span><span class="o">);</span>
		<span class="k">try</span> <span class="o">{</span>
			<span class="n">tire</span><span class="o">.</span><span class="na">setCreatedDate</span><span class="o">(</span><span class="n">dateFormat</span><span class="o">.</span><span class="na">parse</span><span class="o">(</span><span class="s">"2014-5-5"</span><span class="o">));</span>
		<span class="o">}</span> <span class="k">catch</span> <span class="o">(</span><span class="n">Exception</span> <span class="n">e</span><span class="o">)</span> <span class="o">{}</span>
		
		<span class="k">return</span> <span class="n">tire</span><span class="o">;</span>
	<span class="o">}</span>
	
	<span class="kd">private</span> <span class="kd">static</span> <span class="n">Tire</span> <span class="nf">createKumhoTire</span><span class="o">()</span> <span class="o">{</span>
		<span class="n">Tire</span> <span class="n">tire</span> <span class="o">=</span> <span class="k">new</span> <span class="n">Tire</span><span class="o">();</span>
		<span class="n">tire</span><span class="o">.</span><span class="na">setMaker</span><span class="o">(</span><span class="s">"Kumho"</span><span class="o">);</span>
		
		<span class="n">Properties</span> <span class="n">specProp</span> <span class="o">=</span> <span class="k">new</span> <span class="n">Properties</span><span class="o">();</span>
		<span class="n">specProp</span><span class="o">.</span><span class="na">setProperty</span><span class="o">(</span><span class="s">"width"</span><span class="o">,</span> <span class="s">"185"</span><span class="o">);</span>
		<span class="n">specProp</span><span class="o">.</span><span class="na">setProperty</span><span class="o">(</span><span class="s">"ratio"</span><span class="o">,</span> <span class="s">"75"</span><span class="o">);</span>
		<span class="n">specProp</span><span class="o">.</span><span class="na">setProperty</span><span class="o">(</span><span class="s">"rim.diameter"</span><span class="o">,</span> <span class="s">"16"</span><span class="o">);</span>
		<span class="n">tire</span><span class="o">.</span><span class="na">setSpec</span><span class="o">(</span><span class="n">specProp</span><span class="o">);</span>
		
		<span class="n">SimpleDateFormat</span> <span class="n">dateFormat</span> <span class="o">=</span> <span class="k">new</span> <span class="n">SimpleDateFormat</span><span class="o">(</span><span class="s">"yyyy-MM-dd"</span><span class="o">);</span>
		<span class="k">try</span> <span class="o">{</span>
			<span class="n">tire</span><span class="o">.</span><span class="na">setCreatedDate</span><span class="o">(</span><span class="n">dateFormat</span><span class="o">.</span><span class="na">parse</span><span class="o">(</span><span class="s">"2014-3-1"</span><span class="o">));</span>
		<span class="o">}</span> <span class="k">catch</span> <span class="o">(</span><span class="n">Exception</span> <span class="n">e</span><span class="o">)</span> <span class="o">{}</span>
		
		<span class="k">return</span> <span class="n">tire</span><span class="o">;</span>
	<span class="o">}</span>
<span class="o">}</span>
</code></pre>
</div>
<div class="language-xml highlighter-rouge"><pre class="highlight"><code><span class="cp">&lt;?xml version="1.0" encoding="UTF-8"?&gt;</span>
<span class="nt">&lt;beans</span> <span class="na">xmlns=</span><span class="s">"http://www.springframework.org/schema/beans"</span>
	<span class="na">xmlns:xsi=</span><span class="s">"http://www.w3.org/2001/XMLSchema-instance"</span> 
	<span class="na">xmlns:p=</span><span class="s">"http://www.springframework.org/schema/p"</span>
	<span class="na">xmlns:c=</span><span class="s">"http://www.springframework.org/schema/c"</span>
	<span class="na">xsi:schemaLocation=</span><span class="s">"http://www.springframework.org/schema/beans</span>
        <span class="err">http://www.springframework.org/schema/beans/spring-beans.xsd"</span><span class="nt">&gt;</span>

	<span class="nt">&lt;bean</span> <span class="na">id=</span><span class="s">"hankookTire"</span> <span class="na">class=</span><span class="s">"exam.test11.TireFactory"</span>
		<span class="na">factory-method=</span><span class="s">"createTire"</span><span class="nt">&gt;</span>
		<span class="nt">&lt;constructor-arg</span> <span class="na">value=</span><span class="s">"Hankook"</span> <span class="nt">/&gt;</span>
	<span class="nt">&lt;/bean&gt;</span>
	//자바코드 -&gt; Tire hankookTire = TireFactory.createTire("Hankook");
	
	<span class="nt">&lt;bean</span> <span class="na">id=</span><span class="s">"kumhoTire"</span> <span class="na">class=</span><span class="s">"exam.test11.TireFactory"</span>
		<span class="na">factory-method=</span><span class="s">"createTire"</span><span class="nt">&gt;</span>
		<span class="nt">&lt;constructor-arg</span> <span class="na">value=</span><span class="s">"Kumho"</span> <span class="nt">/&gt;</span>
	<span class="nt">&lt;/bean&gt;</span>
	//자바코드 -&gt; Tire kumhoTire = TireFactory.createTire("kumho");
	
<span class="nt">&lt;/beans&gt;</span>
</code></pre>
</div>

<p>여기서 중요한 것은 <code class="highlighter-rouge">factory-method</code>속성의 값이다. 이 값은 Tire 인스턴스를 생성할 메서드 이름이다. <code class="highlighter-rouge">factory-method</code>속성에는 반드시 static 메서드 이름을 지정해야 한다. 팩토리 메서드에 넘겨 줄 매개변수 값은 <code class="highlighter-rouge">&lt;constructor-arg&gt;</code>태그로 설정한다.</p>

<blockquote>
  <p>**자바객체(Java object) vs 인스턴스(instance) vs 빈(bean)</p>

  <p>new 명령어나 팩토리 메서드로 생성된 <code class="highlighter-rouge">인스턴스</code>를 일반적으로 <code class="highlighter-rouge">자바 객체</code>라 부른다. 스프링에서는 자바 객체를 <code class="highlighter-rouge">빈</code>이라고 부른다. 일상 생활에서도 하나의 사물을 다양하게 표현하듯이, 예를 드렁 물을 음료라고 부리기도 하고 음료수, 마실것 등으로 부르는 것처럼, 프로그래밍에서도 하나의 개념을 다양한 말로 표현한다.</p>
</blockquote>

<p><br /></p>

<p>다음으로 인스턴스 팩토리 메서드를 정의하고, 사용하는 예이다.</p>

<div class="language-java highlighter-rouge"><pre class="highlight"><code><span class="kn">package</span> <span class="n">exam</span><span class="o">.</span><span class="na">test12</span><span class="o">;</span>

<span class="kn">import</span> <span class="nn">java.text.SimpleDateFormat</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">java.util.Properties</span><span class="o">;</span>

<span class="kd">public</span> <span class="kd">class</span> <span class="nc">TireFactory</span> <span class="o">{</span>
	<span class="kd">public</span> <span class="n">Tire</span> <span class="nf">createTire</span><span class="o">(</span><span class="n">String</span> <span class="n">maker</span><span class="o">)</span> <span class="o">{</span>
		<span class="k">if</span> <span class="o">(</span><span class="n">maker</span><span class="o">.</span><span class="na">equals</span><span class="o">(</span><span class="s">"Hankook"</span><span class="o">))</span> <span class="o">{</span>
			<span class="k">return</span> <span class="nf">createHankookTire</span><span class="o">();</span>
		<span class="o">}</span> <span class="k">else</span> <span class="o">{</span>
			<span class="k">return</span> <span class="nf">createKumhoTire</span><span class="o">();</span>
		<span class="o">}</span>
	<span class="o">}</span>
	
	<span class="kd">private</span> <span class="n">Tire</span> <span class="nf">createHankookTire</span><span class="o">()</span> <span class="o">{</span>
		<span class="n">Tire</span> <span class="n">tire</span> <span class="o">=</span> <span class="k">new</span> <span class="n">Tire</span><span class="o">();</span>
		<span class="n">tire</span><span class="o">.</span><span class="na">setMaker</span><span class="o">(</span><span class="s">"Hankook"</span><span class="o">);</span>
		
		<span class="n">Properties</span> <span class="n">specProp</span> <span class="o">=</span> <span class="k">new</span> <span class="n">Properties</span><span class="o">();</span>
		<span class="n">specProp</span><span class="o">.</span><span class="na">setProperty</span><span class="o">(</span><span class="s">"width"</span><span class="o">,</span> <span class="s">"205"</span><span class="o">);</span>
		<span class="n">specProp</span><span class="o">.</span><span class="na">setProperty</span><span class="o">(</span><span class="s">"ratio"</span><span class="o">,</span> <span class="s">"65"</span><span class="o">);</span>
		<span class="n">specProp</span><span class="o">.</span><span class="na">setProperty</span><span class="o">(</span><span class="s">"rim.diameter"</span><span class="o">,</span> <span class="s">"14"</span><span class="o">);</span>
		<span class="n">tire</span><span class="o">.</span><span class="na">setSpec</span><span class="o">(</span><span class="n">specProp</span><span class="o">);</span>
		
		<span class="n">SimpleDateFormat</span> <span class="n">dateFormat</span> <span class="o">=</span> <span class="k">new</span> <span class="n">SimpleDateFormat</span><span class="o">(</span><span class="s">"yyyy-MM-dd"</span><span class="o">);</span>
		<span class="k">try</span> <span class="o">{</span>
			<span class="n">tire</span><span class="o">.</span><span class="na">setCreatedDate</span><span class="o">(</span><span class="n">dateFormat</span><span class="o">.</span><span class="na">parse</span><span class="o">(</span><span class="s">"2014-5-5"</span><span class="o">));</span>
		<span class="o">}</span> <span class="k">catch</span> <span class="o">(</span><span class="n">Exception</span> <span class="n">e</span><span class="o">)</span> <span class="o">{}</span>
		
		<span class="k">return</span> <span class="n">tire</span><span class="o">;</span>
	<span class="o">}</span>
	
	<span class="kd">private</span> <span class="n">Tire</span> <span class="nf">createKumhoTire</span><span class="o">()</span> <span class="o">{</span>
		<span class="n">Tire</span> <span class="n">tire</span> <span class="o">=</span> <span class="k">new</span> <span class="n">Tire</span><span class="o">();</span>
		<span class="n">tire</span><span class="o">.</span><span class="na">setMaker</span><span class="o">(</span><span class="s">"Kumho"</span><span class="o">);</span>
		
		<span class="n">Properties</span> <span class="n">specProp</span> <span class="o">=</span> <span class="k">new</span> <span class="n">Properties</span><span class="o">();</span>
		<span class="n">specProp</span><span class="o">.</span><span class="na">setProperty</span><span class="o">(</span><span class="s">"width"</span><span class="o">,</span> <span class="s">"185"</span><span class="o">);</span>
		<span class="n">specProp</span><span class="o">.</span><span class="na">setProperty</span><span class="o">(</span><span class="s">"ratio"</span><span class="o">,</span> <span class="s">"75"</span><span class="o">);</span>
		<span class="n">specProp</span><span class="o">.</span><span class="na">setProperty</span><span class="o">(</span><span class="s">"rim.diameter"</span><span class="o">,</span> <span class="s">"16"</span><span class="o">);</span>
		<span class="n">tire</span><span class="o">.</span><span class="na">setSpec</span><span class="o">(</span><span class="n">specProp</span><span class="o">);</span>
		
		<span class="n">SimpleDateFormat</span> <span class="n">dateFormat</span> <span class="o">=</span> <span class="k">new</span> <span class="n">SimpleDateFormat</span><span class="o">(</span><span class="s">"yyyy-MM-dd"</span><span class="o">);</span>
		<span class="k">try</span> <span class="o">{</span>
			<span class="n">tire</span><span class="o">.</span><span class="na">setCreatedDate</span><span class="o">(</span><span class="n">dateFormat</span><span class="o">.</span><span class="na">parse</span><span class="o">(</span><span class="s">"2014-3-1"</span><span class="o">));</span>
		<span class="o">}</span> <span class="k">catch</span> <span class="o">(</span><span class="n">Exception</span> <span class="n">e</span><span class="o">)</span> <span class="o">{}</span>
		
		<span class="k">return</span> <span class="n">tire</span><span class="o">;</span>
	<span class="o">}</span>
<span class="o">}</span>
</code></pre>
</div>
<div class="language-xml highlighter-rouge"><pre class="highlight"><code><span class="cp">&lt;?xml version="1.0" encoding="UTF-8"?&gt;</span>
<span class="nt">&lt;beans</span> <span class="na">xmlns=</span><span class="s">"http://www.springframework.org/schema/beans"</span>
	<span class="na">xmlns:xsi=</span><span class="s">"http://www.w3.org/2001/XMLSchema-instance"</span> 
	<span class="na">xmlns:p=</span><span class="s">"http://www.springframework.org/schema/p"</span>
	<span class="na">xmlns:c=</span><span class="s">"http://www.springframework.org/schema/c"</span>
	<span class="na">xsi:schemaLocation=</span><span class="s">"http://www.springframework.org/schema/beans</span>
        <span class="err">http://www.springframework.org/schema/beans/spring-beans.xsd"</span><span class="nt">&gt;</span>

  <span class="nt">&lt;bean</span> <span class="na">id=</span><span class="s">"tireFactory"</span> <span class="na">class=</span><span class="s">"exam.test12.TireFactory"</span><span class="nt">/&gt;</span>
  //자바코드 -&gt; TireFactory tireFactory = new TireFactory
  
	<span class="nt">&lt;bean</span> <span class="na">id=</span><span class="s">"hankookTire"</span> <span class="na">factory-bean=</span><span class="s">"tireFactory"</span> <span class="na">factory-method=</span><span class="s">"createTire"</span><span class="nt">&gt;</span>
		<span class="nt">&lt;constructor-arg</span> <span class="na">value=</span><span class="s">"Hankook"</span> <span class="nt">/&gt;</span>
	<span class="nt">&lt;/bean&gt;</span>
	//자바코드 -&gt; Tire hankookTire = tireFactory.createTire("Hankook");

	<span class="nt">&lt;bean</span> <span class="na">id=</span><span class="s">"kumhoTire"</span> <span class="na">factory-bean=</span><span class="s">"tireFactory"</span> <span class="na">factory-method=</span><span class="s">"createTire"</span><span class="nt">&gt;</span>
		<span class="nt">&lt;constructor-arg</span> <span class="na">value=</span><span class="s">"Kumho"</span> <span class="nt">/&gt;</span>
	<span class="nt">&lt;/bean&gt;</span>
	//자바코드 -&gt; Tire hankookTire = tireFactory.createTire("Kumho");
<span class="nt">&lt;/beans&gt;</span>
</code></pre>
</div>

<p><code class="highlighter-rouge">factory-bean</code>속성에 팩토리 객체(tireFactory)를 지정한다. class 속성은 설정하지 않는다. <code class="highlighter-rouge">factory-method</code>속성에는 인스턴스 팩토리 메서드 이름을 지정한다. 스태틱 메서드는 안된다.!! 팩토리 메서드의 매개변수 값은 이전과 마찬가지로 <code class="highlighter-rouge">&lt;constructor-arg&gt;</code>태그로 지정한다.</p>

<p><br /></p>

<h3 id="section-1">스프링 규칙에 따라서 팩토리 빈 만들기</h3>

<p>스프링에서는 팩토리 빈이 갖추어야 할 규칙을 <code class="highlighter-rouge">org.springframework.beans.factoryFactoryBean</code>인터페이스에 지정했다. 팩토리 클래스를 만들 때 이 규칙에 따라 메서드를 구현하면 된다.</p>

<blockquote>
  <p>FactoryBean인터페이스 구현</p>

  <ul>
    <li>[Interface] FactoryBean
      <ul>
        <li>getObject()</li>
        <li>getObjectType()</li>
        <li>isSingleton()</li>
      </ul>
    </li>
  </ul>
</blockquote>

<p>보통 FactoryBean 인터페이스를 직접 구현하기보다는 스프링에서 제공하는 추상클래스를 상속해서 만든다. <code class="highlighter-rouge">org.springframework.beans.factory.config.AbstractFactoryBean</code>은 FactoryBean인터페이스를 미리 구현했다.</p>

<blockquote>
  <ul>
    <li>[interface] FactoryBean
      <ul>
        <li>[abstract] AbstractFactoryBean - createInstance(), getObjectType()</li>
        <li>[class] TireFactoryBean</li>
      </ul>
    </li>
  </ul>
</blockquote>

<p>AbstractFactoryBean에는 createInstance()라는 추상 메서드가 잇다. 빈을 생성할 때 팩토리메서드로서 getObject()가 호출 되는데, getObject()는 내부적으로 바로 이 메서드를 호출한다. 즉 실제 빈을 생성하는 것은 createInstacne() 이다. 따라서 AbstractFactoryBean 클래스를 상속받을 때는 반드시 이 메서드를 구현해야 하고, 이 메서드에 빈 생성 코드를 넣는다.</p>

<p>그리고 FactoryBean 인터페이스로부터 받은 getObjectType() 추상 메서드가 구현되지 않은 채로 남아 있다. 이 메서드는 팩토리 메서드(getObject())가 생성하는 객체의 타입을 알려 준다. 이 메서드는 반드시 구현해야한다.</p>

<div class="language-java highlighter-rouge"><pre class="highlight"><code><span class="kn">package</span> <span class="n">exam</span><span class="o">.</span><span class="na">test13</span><span class="o">;</span>

<span class="kn">import</span> <span class="nn">java.text.SimpleDateFormat</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">java.util.Properties</span><span class="o">;</span>

<span class="kn">import</span> <span class="nn">org.springframework.beans.factory.config.AbstractFactoryBean</span><span class="o">;</span>

<span class="kd">public</span> <span class="kd">class</span> <span class="nc">TireFactoryBean</span> <span class="kd">extends</span> <span class="n">AbstractFactoryBean</span><span class="o">&lt;</span><span class="n">Tire</span><span class="o">&gt;</span> <span class="o">{</span>
	<span class="n">String</span> <span class="n">maker</span><span class="o">;</span>
	
	<span class="kd">public</span> <span class="kt">void</span> <span class="nf">setMaker</span><span class="o">(</span><span class="n">String</span> <span class="n">maker</span><span class="o">)</span> <span class="o">{</span>
	  <span class="k">this</span><span class="o">.</span><span class="na">maker</span> <span class="o">=</span> <span class="n">maker</span><span class="o">;</span>
  <span class="o">}</span>
	
	<span class="nd">@Override</span>
	<span class="kd">public</span> <span class="n">Class</span><span class="o">&lt;?&gt;</span> <span class="n">getObjectType</span><span class="o">()</span> <span class="o">{</span>
	  <span class="k">return</span> <span class="n">exam</span><span class="o">.</span><span class="na">test13</span><span class="o">.</span><span class="na">Tire</span><span class="o">.</span><span class="na">class</span><span class="o">;</span>
	<span class="o">}</span>
	
	<span class="kd">protected</span> <span class="n">Tire</span> <span class="nf">createInstance</span><span class="o">()</span> <span class="o">{</span>
		<span class="k">if</span> <span class="o">(</span><span class="n">maker</span><span class="o">.</span><span class="na">equals</span><span class="o">(</span><span class="s">"Hankook"</span><span class="o">))</span> <span class="o">{</span>
			<span class="k">return</span> <span class="nf">createHankookTire</span><span class="o">();</span>
		<span class="o">}</span> <span class="k">else</span> <span class="o">{</span>
			<span class="k">return</span> <span class="nf">createKumhoTire</span><span class="o">();</span>
		<span class="o">}</span>
	<span class="o">}</span>
	
	<span class="kd">private</span> <span class="n">Tire</span> <span class="nf">createHankookTire</span><span class="o">()</span> <span class="o">{</span>
		<span class="n">Tire</span> <span class="n">tire</span> <span class="o">=</span> <span class="k">new</span> <span class="n">Tire</span><span class="o">();</span>
		<span class="n">tire</span><span class="o">.</span><span class="na">setMaker</span><span class="o">(</span><span class="s">"Hankook"</span><span class="o">);</span>
		
		<span class="n">Properties</span> <span class="n">specProp</span> <span class="o">=</span> <span class="k">new</span> <span class="n">Properties</span><span class="o">();</span>
		<span class="n">specProp</span><span class="o">.</span><span class="na">setProperty</span><span class="o">(</span><span class="s">"width"</span><span class="o">,</span> <span class="s">"205"</span><span class="o">);</span>
		<span class="n">specProp</span><span class="o">.</span><span class="na">setProperty</span><span class="o">(</span><span class="s">"ratio"</span><span class="o">,</span> <span class="s">"65"</span><span class="o">);</span>
		<span class="n">specProp</span><span class="o">.</span><span class="na">setProperty</span><span class="o">(</span><span class="s">"rim.diameter"</span><span class="o">,</span> <span class="s">"14"</span><span class="o">);</span>
		<span class="n">tire</span><span class="o">.</span><span class="na">setSpec</span><span class="o">(</span><span class="n">specProp</span><span class="o">);</span>
		
		<span class="n">SimpleDateFormat</span> <span class="n">dateFormat</span> <span class="o">=</span> <span class="k">new</span> <span class="n">SimpleDateFormat</span><span class="o">(</span><span class="s">"yyyy-MM-dd"</span><span class="o">);</span>
		<span class="k">try</span> <span class="o">{</span>
			<span class="n">tire</span><span class="o">.</span><span class="na">setCreatedDate</span><span class="o">(</span><span class="n">dateFormat</span><span class="o">.</span><span class="na">parse</span><span class="o">(</span><span class="s">"2014-5-5"</span><span class="o">));</span>
		<span class="o">}</span> <span class="k">catch</span> <span class="o">(</span><span class="n">Exception</span> <span class="n">e</span><span class="o">)</span> <span class="o">{}</span>
		
		<span class="k">return</span> <span class="n">tire</span><span class="o">;</span>
	<span class="o">}</span>
	
	<span class="kd">private</span> <span class="n">Tire</span> <span class="nf">createKumhoTire</span><span class="o">()</span> <span class="o">{</span>
		<span class="n">Tire</span> <span class="n">tire</span> <span class="o">=</span> <span class="k">new</span> <span class="n">Tire</span><span class="o">();</span>
		<span class="n">tire</span><span class="o">.</span><span class="na">setMaker</span><span class="o">(</span><span class="s">"Kumho"</span><span class="o">);</span>
		
		<span class="n">Properties</span> <span class="n">specProp</span> <span class="o">=</span> <span class="k">new</span> <span class="n">Properties</span><span class="o">();</span>
		<span class="n">specProp</span><span class="o">.</span><span class="na">setProperty</span><span class="o">(</span><span class="s">"width"</span><span class="o">,</span> <span class="s">"185"</span><span class="o">);</span>
		<span class="n">specProp</span><span class="o">.</span><span class="na">setProperty</span><span class="o">(</span><span class="s">"ratio"</span><span class="o">,</span> <span class="s">"75"</span><span class="o">);</span>
		<span class="n">specProp</span><span class="o">.</span><span class="na">setProperty</span><span class="o">(</span><span class="s">"rim.diameter"</span><span class="o">,</span> <span class="s">"16"</span><span class="o">);</span>
		<span class="n">tire</span><span class="o">.</span><span class="na">setSpec</span><span class="o">(</span><span class="n">specProp</span><span class="o">);</span>
		
		<span class="n">SimpleDateFormat</span> <span class="n">dateFormat</span> <span class="o">=</span> <span class="k">new</span> <span class="n">SimpleDateFormat</span><span class="o">(</span><span class="s">"yyyy-MM-dd"</span><span class="o">);</span>
		<span class="k">try</span> <span class="o">{</span>
			<span class="n">tire</span><span class="o">.</span><span class="na">setCreatedDate</span><span class="o">(</span><span class="n">dateFormat</span><span class="o">.</span><span class="na">parse</span><span class="o">(</span><span class="s">"2014-3-1"</span><span class="o">));</span>
		<span class="o">}</span> <span class="k">catch</span> <span class="o">(</span><span class="n">Exception</span> <span class="n">e</span><span class="o">)</span> <span class="o">{}</span>
		
		<span class="k">return</span> <span class="n">tire</span><span class="o">;</span>
	<span class="o">}</span>
<span class="o">}</span>
</code></pre>
</div>

<div class="language-xml highlighter-rouge"><pre class="highlight"><code><span class="cp">&lt;?xml version="1.0" encoding="UTF-8"?&gt;</span>
<span class="nt">&lt;beans</span> <span class="na">xmlns=</span><span class="s">"http://www.springframework.org/schema/beans"</span>
	<span class="na">xmlns:xsi=</span><span class="s">"http://www.w3.org/2001/XMLSchema-instance"</span> 
	<span class="na">xmlns:p=</span><span class="s">"http://www.springframework.org/schema/p"</span>
	<span class="na">xmlns:c=</span><span class="s">"http://www.springframework.org/schema/c"</span>
	<span class="na">xsi:schemaLocation=</span><span class="s">"http://www.springframework.org/schema/beans</span>
        <span class="err">http://www.springframework.org/schema/beans/spring-beans.xsd"</span><span class="nt">&gt;</span>

	<span class="nt">&lt;bean</span> <span class="na">id=</span><span class="s">"hankookTire"</span> <span class="na">class=</span><span class="s">"exam.test13.TireFactoryBean"</span><span class="nt">&gt;</span>
		<span class="nt">&lt;property</span> <span class="na">name=</span><span class="s">"maker"</span> <span class="na">value=</span><span class="s">"Hankook"</span> <span class="nt">/&gt;</span>
	<span class="nt">&lt;/bean&gt;</span>
	//자바코드 -&gt; FactoryBean tempFactoryBean = new TireFactoryBean();
	//			  tempFactoryBean.setMaker("Hankook");
	//			  Tire tireFactory = tempFactoryBean.getObject();
<span class="nt">&lt;/beans&gt;</span>
</code></pre>
</div>

<p><br /></p>

<h3 id="section-2">빈의 범위 설정</h3>

<p>스프링 IoC컨테이너는 빈을 생성할 때 기본으로 한개만 생성한다. getBean()을 호출하면 계속 동일한 객체를 반환한다. 그러나 설정을 통해 이런 빈의 생성 방식을 조정할 수 있다. 다음은 스프링에서 설정 가능한 범위를 정리한 표이다. <br /></p>

<table>
  <thead>
    <tr>
      <th>범위</th>
      <th>설명</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>singleton</td>
      <td>오직 하나의 빈만 생성한다.(기본설정)</td>
    </tr>
    <tr>
      <td>prototype</td>
      <td>getBean()을 호출할 때마다 빈을 생성한다.</td>
    </tr>
    <tr>
      <td>request</td>
      <td>HTTP요청이 발생할 때마다 생성되며, 웹 어플리케이션에서만 이 범위를 설정할 수 있다.</td>
    </tr>
    <tr>
      <td>session</td>
      <td>HTTP세션이 생성될 때마다 빈이 생성되며, 웹 어플리케이션에서만 이 범위를 설정할 수 있다.</td>
    </tr>
    <tr>
      <td>globalsession</td>
      <td>전역 세션이 준비될 때 빈이 생성된다. 웹 어플리케이션에서만 이 범위를 지정할 수 있으며, 보통 포틀릿 컨텍스트에서 사용한다.</td>
    </tr>
  </tbody>
</table>

<p><strong>싱글톤과 프로토타입</strong></p>

<div class="language-xml highlighter-rouge"><pre class="highlight"><code><span class="cp">&lt;?xml version="1.0" encoding="UTF-8"?&gt;</span>
<span class="nt">&lt;beans</span> <span class="na">xmlns=</span><span class="s">"http://www.springframework.org/schema/beans"</span>
	<span class="na">xmlns:xsi=</span><span class="s">"http://www.w3.org/2001/XMLSchema-instance"</span> 
	<span class="na">xmlns:p=</span><span class="s">"http://www.springframework.org/schema/p"</span>
	<span class="na">xmlns:c=</span><span class="s">"http://www.springframework.org/schema/c"</span>
	<span class="na">xsi:schemaLocation=</span><span class="s">"http://www.springframework.org/schema/beans</span>
        <span class="err">http://www.springframework.org/schema/beans/spring-beans.xsd"</span><span class="nt">&gt;</span>

	<span class="nt">&lt;bean</span> <span class="na">id=</span><span class="s">"hyundaiEngine"</span> <span class="na">class=</span><span class="s">"exam.test14.Engine"</span> 
	    <span class="na">p:maker=</span><span class="s">"Hyundai"</span> <span class="na">p:cc=</span><span class="s">"1997"</span><span class="nt">/&gt;</span>
	
	<span class="nt">&lt;bean</span> <span class="na">id=</span><span class="s">"kiaEngine"</span> <span class="na">class=</span><span class="s">"exam.test14.Engine"</span>
	    <span class="na">p:maker=</span><span class="s">"Kia"</span> <span class="na">p:cc=</span><span class="s">"3000"</span>
	    <span class="na">scope=</span><span class="s">"prototype"</span><span class="nt">/&gt;</span>
<span class="nt">&lt;/beans&gt;</span>
</code></pre>
</div>

<p>hyundaiEngine은 범위를 설정하지 않아서 기본 범위인 <code class="highlighter-rouge">singletone</code>으로 설정되었다.</p>

<p>kiaEngine은 scope속성의 값을 <code class="highlighter-rouge">prototype</code>으로 설정했다. 이 경우 빈 컨테이너에게 kiaEngine을 요청할 때마다 매번 새 Engine인스턴스를 만들어 반환할 것이다.</p>

<div class="language-java highlighter-rouge"><pre class="highlight"><code><span class="kn">package</span> <span class="n">exam</span><span class="o">.</span><span class="na">test14</span><span class="o">;</span>

<span class="kn">import</span> <span class="nn">org.springframework.context.support.ClassPathXmlApplicationContext</span><span class="o">;</span>

<span class="kd">public</span> <span class="kd">class</span> <span class="nc">Test</span> <span class="o">{</span>

	<span class="kd">public</span> <span class="kd">static</span> <span class="kt">void</span> <span class="nf">main</span><span class="o">(</span><span class="n">String</span><span class="o">[]</span> <span class="n">args</span><span class="o">)</span> <span class="o">{</span>
		<span class="n">ClassPathXmlApplicationContext</span> <span class="n">ctx</span> <span class="o">=</span> 
				<span class="k">new</span> <span class="nf">ClassPathXmlApplicationContext</span><span class="o">(</span><span class="s">"exam/test14/beans.xml"</span><span class="o">);</span>
		
		<span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">"[singleton 방식(기본)]-------------------------"</span><span class="o">);</span>
		
		<span class="n">Engine</span> <span class="n">e1</span> <span class="o">=</span> <span class="o">(</span><span class="n">Engine</span><span class="o">)</span> <span class="n">ctx</span><span class="o">.</span><span class="na">getBean</span><span class="o">(</span><span class="s">"hyundaiEngine"</span><span class="o">);</span>
		<span class="n">Engine</span> <span class="n">e2</span> <span class="o">=</span> <span class="o">(</span><span class="n">Engine</span><span class="o">)</span> <span class="n">ctx</span><span class="o">.</span><span class="na">getBean</span><span class="o">(</span><span class="s">"hyundaiEngine"</span><span class="o">);</span>
		
		<span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">"e1--&gt;"</span> <span class="o">+</span> <span class="n">e1</span><span class="o">.</span><span class="na">toString</span><span class="o">());</span>
		<span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">"e2--&gt;"</span> <span class="o">+</span> <span class="n">e2</span><span class="o">.</span><span class="na">toString</span><span class="o">());</span>
		<span class="k">if</span> <span class="o">(</span><span class="n">e1</span> <span class="o">==</span> <span class="n">e2</span><span class="o">)</span> <span class="o">{</span>
			<span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">"e1 == e2"</span><span class="o">);</span>
		<span class="o">}</span>
		
		<span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">"[prototype 방식]-------------------------"</span><span class="o">);</span>
		
		<span class="n">Engine</span> <span class="n">e3</span> <span class="o">=</span> <span class="o">(</span><span class="n">Engine</span><span class="o">)</span> <span class="n">ctx</span><span class="o">.</span><span class="na">getBean</span><span class="o">(</span><span class="s">"kiaEngine"</span><span class="o">);</span>
		<span class="n">Engine</span> <span class="n">e4</span> <span class="o">=</span> <span class="o">(</span><span class="n">Engine</span><span class="o">)</span> <span class="n">ctx</span><span class="o">.</span><span class="na">getBean</span><span class="o">(</span><span class="s">"kiaEngine"</span><span class="o">);</span>
		
		<span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">"e3--&gt;"</span> <span class="o">+</span> <span class="n">e3</span><span class="o">.</span><span class="na">toString</span><span class="o">());</span>
		<span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">"e4--&gt;"</span> <span class="o">+</span> <span class="n">e4</span><span class="o">.</span><span class="na">toString</span><span class="o">());</span>
		<span class="k">if</span> <span class="o">(</span><span class="n">e3</span> <span class="o">!=</span> <span class="n">e4</span><span class="o">)</span> <span class="o">{</span>
			<span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">"e3 != e4"</span><span class="o">);</span>
		<span class="o">}</span>
	<span class="o">}</span>
<span class="o">}</span>

<span class="cm">/*
[singleton 방식(기본)]
e1--&gt;[Engine:Hyundai,1997]
e2--&gt;[Engine:Hyundai,1997]
e1 == e2

[prototype 방식]
e3--&gt;[Engine:Kia,3000]
e4--&gt;[Engine:Kia,3000]
e3 != e4
*/</span>
</code></pre>
</div>

<p>kiaEngine의 범위는 프로토타입(prototype)으로 설정되었다. 따라서 getBean()을 호출할 때마다 새로운 빈을 만들어서 반환한다. 그래서 e3와 e4가 다르다고 출력된다.</p>

<p><br /></p>

<h3 id="section-3">애노테이션을 이용한 의존객체 자동 주입</h3>

<p>스프링에서는 자바 애노테이션을 이용해 간단히 의존 객체를 주입할 방법을 제공해 준다. 빈의 셋터 메서드에 <code class="highlighter-rouge">@Autowired</code>를 선언하면 빈 컨테이너가 셋터의 매개변수 타입과 일치하는 빈을 찾아 자동으로 설정해 준다. 이 기능을 이용하려면 빈 설정 파일에 다음 객체를 선언해야 한다.</p>

<div class="language-xml highlighter-rouge"><pre class="highlight"><code><span class="nt">&lt;bean</span> <span class="na">class=</span><span class="s">"org.springframework.beans.factory.annotation.AutowiredAnnotationBeanPostProcessor"</span> <span class="nt">/&gt;</span>
</code></pre>
</div>

<p><code class="highlighter-rouge">AutowiredAnnotationBeanPostProcessor</code>클래스는 빈의 후 처리기(post processor)로서 빈을 생성한 후 즉시 <code class="highlighter-rouge">@Autowired</code>로 선언된 셋터를 찾아서 호출하는 역할을 수행한다. 즉 <code class="highlighter-rouge">@Autowired</code>가 붙은 프로퍼티에 대해 의존 객체(프로퍼티 타입과 일치하는 빈)를 찾아 주입(프로퍼티 할당)하는 일을 한다.
<br /></p>

<p><strong><code class="highlighter-rouge">@Autowired</code>적용</strong></p>

<div class="language-java highlighter-rouge"><pre class="highlight"><code><span class="kd">public</span> <span class="kd">class</span> <span class="nc">Car</span> <span class="o">{</span>
	<span class="n">String</span>							<span class="n">model</span><span class="o">;</span> <span class="c1">// 모델명</span>
	<span class="n">Engine</span> 							<span class="n">engine</span><span class="o">;</span> <span class="c1">// 엔진</span>
	<span class="n">Tire</span><span class="o">[]</span>							<span class="n">tires</span><span class="o">;</span> <span class="c1">// 타이어</span>
	<span class="n">Map</span><span class="o">&lt;</span><span class="n">String</span><span class="o">,</span><span class="n">Object</span><span class="o">&gt;</span> 	<span class="n">options</span><span class="o">;</span> <span class="c1">//선택사항</span>
	
	<span class="kd">public</span> <span class="nf">Car</span><span class="o">()</span> <span class="o">{}</span>
	
	<span class="kd">public</span> <span class="nf">Car</span><span class="o">(</span><span class="n">String</span> <span class="n">model</span><span class="o">,</span> <span class="n">Engine</span> <span class="n">engine</span><span class="o">)</span> <span class="o">{</span>
		<span class="k">this</span><span class="o">.</span><span class="na">model</span> <span class="o">=</span> <span class="n">model</span><span class="o">;</span>
		<span class="k">this</span><span class="o">.</span><span class="na">engine</span> <span class="o">=</span> <span class="n">engine</span><span class="o">;</span>
	<span class="o">}</span>
	
	<span class="kd">public</span> <span class="n">String</span> <span class="nf">getModel</span><span class="o">()</span> <span class="o">{</span>
		<span class="k">return</span> <span class="n">model</span><span class="o">;</span>
	<span class="o">}</span>
	
	<span class="kd">public</span> <span class="kt">void</span> <span class="nf">setModel</span><span class="o">(</span><span class="n">String</span> <span class="n">model</span><span class="o">)</span> <span class="o">{</span>
		<span class="k">this</span><span class="o">.</span><span class="na">model</span> <span class="o">=</span> <span class="n">model</span><span class="o">;</span>
	<span class="o">}</span>
	
	<span class="kd">public</span> <span class="n">Engine</span> <span class="nf">getEngine</span><span class="o">()</span> <span class="o">{</span>
		<span class="k">return</span> <span class="n">engine</span><span class="o">;</span>
	<span class="o">}</span>
	
	<span class="nd">@Autowired</span>
	<span class="kd">public</span> <span class="kt">void</span> <span class="nf">setEngine</span><span class="o">(</span><span class="n">Engine</span> <span class="n">engine</span><span class="o">)</span> <span class="o">{</span>
		<span class="k">this</span><span class="o">.</span><span class="na">engine</span> <span class="o">=</span> <span class="n">engine</span><span class="o">;</span>
	<span class="o">}</span>
	
	<span class="o">....</span>
	
</code></pre>
</div>

<div class="language-xml highlighter-rouge"><pre class="highlight"><code><span class="cp">&lt;?xml version="1.0" encoding="UTF-8"?&gt;</span>
<span class="nt">&lt;beans</span> <span class="na">xmlns=</span><span class="s">"http://www.springframework.org/schema/beans"</span>
	<span class="na">xmlns:xsi=</span><span class="s">"http://www.w3.org/2001/XMLSchema-instance"</span> 
	<span class="na">xmlns:p=</span><span class="s">"http://www.springframework.org/schema/p"</span>
	<span class="na">xmlns:c=</span><span class="s">"http://www.springframework.org/schema/c"</span>
	<span class="na">xsi:schemaLocation=</span><span class="s">"http://www.springframework.org/schema/beans</span>
        <span class="err">http://www.springframework.org/schema/beans/spring-beans.xsd"</span><span class="nt">&gt;</span>

  <span class="nt">&lt;bean</span> <span class="na">class=</span><span class="s">"org.springframework.beans.factory.annotation.AutowiredAnnotationBeanPostProcessor"</span> <span class="nt">/&gt;</span>
  
  //자바코드-&gt;  AutowiredAnnotationBeanPostProcessor tempAutowiredPostProcessor=
  				new AutowiredAnnotationBeanPostProcessor();
    
  <span class="nt">&lt;bean</span> <span class="na">id=</span><span class="s">"hyundaiEngine"</span> <span class="na">class=</span><span class="s">"exam.test17.Engine"</span><span class="nt">&gt;</span>
      <span class="nt">&lt;constructor-arg</span> <span class="na">value=</span><span class="s">"Hyundai"</span><span class="nt">/&gt;</span>
  <span class="nt">&lt;/bean&gt;</span> 
  //자바코드-&gt; Engine hyundaiEngine = new Engine("Hyundai");
  
  <span class="nt">&lt;bean</span> <span class="na">id=</span><span class="s">"car1"</span> <span class="na">class=</span><span class="s">"exam.test17.Car"</span><span class="nt">&gt;</span>
      <span class="nt">&lt;property</span> <span class="na">name=</span><span class="s">"model"</span> <span class="na">value=</span><span class="s">"Sonata"</span><span class="nt">/&gt;</span>
  <span class="nt">&lt;/bean&gt;</span>
  
  <span class="nt">&lt;bean</span> <span class="na">id=</span><span class="s">"car2"</span> <span class="na">class=</span><span class="s">"exam.test17.Car"</span><span class="nt">&gt;</span>
      <span class="nt">&lt;property</span> <span class="na">name=</span><span class="s">"model"</span> <span class="na">value=</span><span class="s">"Grandeur"</span><span class="nt">/&gt;</span>
  <span class="nt">&lt;/bean&gt;</span>
  
  //자바코드 -&gt;	Car car1 = new Car();
  //			Car car2 = new Car();
  //			car1.setModel("Sonata");
  //			car2.setModel("Grandeur");
  //			car1.setEngine(hyundaiEngine);
  //			car2.setEngine(hyundaiEngine);
<span class="nt">&lt;/beans&gt;</span>
</code></pre>
</div>

<p><br />
<strong><code class="highlighter-rouge">@Autowired</code>의 <code class="highlighter-rouge">required</code>속성</strong>*</p>

<p>프로퍼티(셋터메서드)에 대해 <code class="highlighter-rouge">@Autowired</code>를 선언하면 해당 프로퍼티는 기본으로 필수 입력 항목이 된다. 만약 프로퍼티에 주입할 의존 객체를 찾을 수 없으면 예외가 발생한다. 이때 <code class="highlighter-rouge">@Autowired</code>의 <code class="highlighter-rouge">required</code>속성을 이용하면 필수 입력 여부를 조정할 수 있다. <code class="highlighter-rouge">required</code>속성을 false로 설정하면 프로퍼티에 주입할 의존객체를 찾지 못하더라도 예외가 발 생하지 않는다.</p>

<div class="language-java highlighter-rouge"><pre class="highlight"><code><span class="nd">@Autowired</span><span class="o">(</span><span class="n">required</span><span class="o">=</span><span class="kc">false</span><span class="o">)</span>
	<span class="kd">public</span> <span class="kt">void</span> <span class="nf">setEngine</span><span class="o">(</span><span class="n">Engine</span> <span class="n">engine</span><span class="o">)</span> <span class="o">{</span>
		<span class="k">this</span><span class="o">.</span><span class="na">engine</span> <span class="o">=</span> <span class="n">engine</span><span class="o">;</span>
	<span class="o">}</span>
</code></pre>
</div>

<p><br /></p>

<p><strong><code class="highlighter-rouge">@Qualifier</code>로 주입할 객체를 지정하기</strong></p>

<p><code class="highlighter-rouge">@Autowired</code>는 프로퍼티에 주입할 수 있는 의존객체가 여러개 있을 경우 오류를 발생시키다. 즉 같은 타입의 객체가 여러개 있으면 그 중에서 어떤 객체를 주입해야 할지 알 수 없기 때문이다. 이 경우 애노테이션 <code class="highlighter-rouge">@Qualifier</code>를 사용하면 손쉽게 해결 가능하다. <code class="highlighter-rouge">@Qualifier</code>는 빈의 이름(또는 아이디)으로 의존 객체를 지정할 수 있다.</p>

<p>이 애노테이션을 사용하려면 빈의 후 처리기(bean post processor)가 필요하다. 이런식으로 하다보니 애노테이션을 사용할 때마다 그 애노테이션을 처리할 객체를 등록해야 하는 불편함이 발생한다. 이런 불편함을 해소하기 위해 스프링에서는 애노테이션 처리와 관련된 빈(bean post processor)을 한꺼번에 등록할 수 있는 방법을 제공한다. 다음과 같이 간단히 태그를 선언하면 된다.</p>

<div class="language-xml highlighter-rouge"><pre class="highlight"><code><span class="nt">&lt;context:annotation-config/&gt;</span>
</code></pre>
</div>
<p><br /></p>

<div class="language-xml highlighter-rouge"><pre class="highlight"><code><span class="cp">&lt;?xml version="1.0" encoding="UTF-8"?&gt;</span>
<span class="nt">&lt;beans</span> <span class="na">xmlns=</span><span class="s">"http://www.springframework.org/schema/beans"</span>
	<span class="na">xmlns:xsi=</span><span class="s">"http://www.w3.org/2001/XMLSchema-instance"</span> 
	<span class="na">xmlns:p=</span><span class="s">"http://www.springframework.org/schema/p"</span>
	<span class="na">xmlns:c=</span><span class="s">"http://www.springframework.org/schema/c"</span>
	<span class="na">xmlns:context=</span><span class="s">"http://www.springframework.org/schema/context"</span>
	<span class="na">xsi:schemaLocation=</span><span class="s">"http://www.springframework.org/schema/beans</span>
        <span class="err">http://www.springframework.org/schema/beans/spring-beans.xsd</span>
        <span class="err">http://www.springframework.org/schema/context</span>
        <span class="err">http://www.springframework.org/schema/context/spring-context.xsd"</span><span class="nt">&gt;</span>

  <span class="nt">&lt;context:annotation-config</span> <span class="nt">/&gt;</span>
          
  <span class="nt">&lt;bean</span> <span class="na">id=</span><span class="s">"hyundaiEngine"</span> <span class="na">class=</span><span class="s">"exam.test19.Engine"</span><span class="nt">&gt;</span>
      <span class="nt">&lt;constructor-arg</span> <span class="na">value=</span><span class="s">"Hyundai"</span><span class="nt">/&gt;</span>
  <span class="nt">&lt;/bean&gt;</span> 

  <span class="nt">&lt;bean</span> <span class="na">id=</span><span class="s">"kiaEngine"</span> <span class="na">class=</span><span class="s">"exam.test19.Engine"</span><span class="nt">&gt;</span>
      <span class="nt">&lt;constructor-arg</span> <span class="na">value=</span><span class="s">"Kia"</span><span class="nt">/&gt;</span>
  <span class="nt">&lt;/bean&gt;</span> 

  <span class="nt">&lt;bean</span> <span class="na">id=</span><span class="s">"car1"</span> <span class="na">class=</span><span class="s">"exam.test19.Car"</span><span class="nt">&gt;</span>
      <span class="nt">&lt;property</span> <span class="na">name=</span><span class="s">"model"</span> <span class="na">value=</span><span class="s">"Sonata"</span><span class="nt">/&gt;</span>
  <span class="nt">&lt;/bean&gt;</span>
<span class="nt">&lt;/beans&gt;</span>
</code></pre>
</div>

<div class="language-java highlighter-rouge"><pre class="highlight"><code><span class="kd">public</span> <span class="kd">class</span> <span class="nc">Car</span> <span class="o">{</span>	
	<span class="o">...</span>
	
	<span class="nd">@Autowired</span><span class="o">(</span><span class="n">required</span><span class="o">=</span><span class="kc">false</span><span class="o">)</span>
	<span class="nd">@Qualifier</span><span class="o">(</span><span class="s">"kiaEngine"</span><span class="o">)</span>
	<span class="kd">public</span> <span class="kt">void</span> <span class="nf">setEngine</span><span class="o">(</span> <span class="n">Engine</span> <span class="n">engine</span><span class="o">)</span> <span class="o">{</span>
		<span class="k">this</span><span class="o">.</span><span class="na">engine</span> <span class="o">=</span> <span class="n">engine</span><span class="o">;</span>
	<span class="o">}</span>
	
	<span class="o">...</span>
	
<span class="o">}</span>
</code></pre>
</div>

<p>engine 프로퍼티(setEngine()) 앞에 <code class="highlighter-rouge">@Qualifier</code> 선언을 했고, 이는 bean.xml에 선언된 엔진 객체 중에서 kiaEngine를 의존 객체로 주입한다.</p>

<p><br /></p>

<p><strong><code class="highlighter-rouge">@Autowired</code> + <code class="highlighter-rouge">@Qualifier</code> = <code class="highlighter-rouge">@Resource</code></strong></p>

<p>JSR-250 명세에 정의된 <code class="highlighter-rouge">@Resource</code>를 사용하면 더 간단히 특히 의존객체를 지정할 수 있다. 이름으로 의존 객체를 지정할 경우 이 애노테이션을 사용할 것을 권장한다. 단, <code class="highlighter-rouge">@Autowired</code>는 <code class="highlighter-rouge">required</code>속성을 사용하여 프로퍼티 값의 필수 여부를 지정할 수 있지만 <code class="highlighter-rouge">@Resource</code>에는 그런 기능이 없으므로 <code class="highlighter-rouge">@Resource</code>는 무조건 필수 입력입니다. 해당 프로퍼티에 주입할 의존 객체가 없으면 오류가 발생하므로 의존객체 주입을 선택 사항으로 만들고 싶다면 <code class="highlighter-rouge">@Autowired</code>를 사용하면된다.</p>

<div class="language-java highlighter-rouge"><pre class="highlight"><code><span class="kd">public</span> <span class="kd">class</span> <span class="nc">Car</span> <span class="o">{</span>
	<span class="o">...</span>
	
	<span class="nd">@Resource</span><span class="o">(</span><span class="n">name</span><span class="o">=</span><span class="s">"kiaEngine"</span><span class="o">)</span>
	<span class="kd">public</span> <span class="kt">void</span> <span class="nf">setEngine</span><span class="o">(</span> <span class="n">Engine</span> <span class="n">engine</span><span class="o">)</span> <span class="o">{</span>
		<span class="k">this</span><span class="o">.</span><span class="na">engine</span> <span class="o">=</span> <span class="n">engine</span><span class="o">;</span>
	<span class="o">}</span>
	<span class="o">...</span>
<span class="o">}</span>
</code></pre>
</div>

<p><code class="highlighter-rouge">@Resource</code>를 선언하고 name 속성에 주입하고자 하는 의존 객체의 이름을 지정한다.</p>

<div class="language-xml highlighter-rouge"><pre class="highlight"><code><span class="cp">&lt;?xml version="1.0" encoding="UTF-8"?&gt;</span>
<span class="nt">&lt;beans</span> <span class="na">xmlns=</span><span class="s">"http://www.springframework.org/schema/beans"</span>
	<span class="na">xmlns:xsi=</span><span class="s">"http://www.w3.org/2001/XMLSchema-instance"</span> 
	<span class="na">xmlns:p=</span><span class="s">"http://www.springframework.org/schema/p"</span>
	<span class="na">xmlns:c=</span><span class="s">"http://www.springframework.org/schema/c"</span>
	<span class="na">xmlns:context=</span><span class="s">"http://www.springframework.org/schema/context"</span>
	<span class="na">xsi:schemaLocation=</span><span class="s">"http://www.springframework.org/schema/beans</span>
        <span class="err">http://www.springframework.org/schema/beans/spring-beans.xsd</span>
        <span class="err">http://www.springframework.org/schema/context</span>
        <span class="err">http://www.springframework.org/schema/context/spring-context.xsd"</span><span class="nt">&gt;</span>

  <span class="nt">&lt;context:annotation-config</span> <span class="nt">/&gt;</span>
          
  <span class="nt">&lt;bean</span> <span class="na">id=</span><span class="s">"hyundaiEngine"</span> <span class="na">class=</span><span class="s">"exam.test20.Engine"</span><span class="nt">&gt;</span>
      <span class="nt">&lt;constructor-arg</span> <span class="na">value=</span><span class="s">"Hyundai"</span><span class="nt">/&gt;</span>
  <span class="nt">&lt;/bean&gt;</span> 

  <span class="nt">&lt;bean</span> <span class="na">id=</span><span class="s">"kiaEngine"</span> <span class="na">class=</span><span class="s">"exam.test20.Engine"</span><span class="nt">&gt;</span>
      <span class="nt">&lt;constructor-arg</span> <span class="na">value=</span><span class="s">"Kia"</span><span class="nt">/&gt;</span>
  <span class="nt">&lt;/bean&gt;</span> 

  <span class="nt">&lt;bean</span> <span class="na">id=</span><span class="s">"car1"</span> <span class="na">class=</span><span class="s">"exam.test20.Car"</span><span class="nt">&gt;</span>
      <span class="nt">&lt;property</span> <span class="na">name=</span><span class="s">"model"</span> <span class="na">value=</span><span class="s">"Sonata"</span><span class="nt">/&gt;</span>
  <span class="nt">&lt;/bean&gt;</span>
<span class="nt">&lt;/beans&gt;</span>
</code></pre>
</div>

<p><code class="highlighter-rouge">@Resource</code>에 설정한 대로 해당 의존객체(kiaEngine)가 주입된다.</p>

<p><br /></p>

<h3 id="section-4">빈 자동 등록</h3>

<p>컴포넌트 스캔과 애노테이션을 이용해 빈을 자동 등록하는 방법은 다음과 같다.</p>

<ol>
  <li>빈생성 대상이 되는 클래스에 <code class="highlighter-rouge">@Component</code>애노테이션으로 표시한다.</li>
  <li>스프링 IoC컨테이너는 <code class="highlighter-rouge">@Component</code>가 붙은 클래스를 찾아 빈을 생성한다.</li>
</ol>

<p>스프링에서는 <code class="highlighter-rouge">@Component</code> 외에 클래스를 관리하고 이해하는데 도움을 주기 위해 클래스의 역할에 따라 붙일 수 있는 애노테이션을 추가로 제공한다. 다음 표는 빈 생성 대상 클래스임을 표시할 때 붙일 수 있는 애노테이션이다.</p>

<p><br /></p>

<table>
  <thead>
    <tr>
      <th>애노테이션</th>
      <th>설명</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><code class="highlighter-rouge">@Component</code></td>
      <td>빈 생성 대상이 되는 모든 클래스에 대해 붙일 수 있다.</td>
    </tr>
    <tr>
      <td><code class="highlighter-rouge">@Repository</code></td>
      <td>DAO와 같은 퍼시스턴스(persistence) 역할을 수행하는 클래스에 붙인다.</td>
    </tr>
    <tr>
      <td><code class="highlighter-rouge">@Service</code></td>
      <td>서비스 역할을 수행하는 클래스에 붙인다.</td>
    </tr>
    <tr>
      <td><code class="highlighter-rouge">@Controller</code></td>
      <td>MVC구조에서 Controller 역할을 수행하는 클래스에 붙인다.</td>
    </tr>
  </tbody>
</table>

<p><strong><code class="highlighter-rouge">@Component</code>예&gt;</strong></p>

<div class="language-java highlighter-rouge"><pre class="highlight"><code><span class="nd">@Component</span><span class="o">(</span><span class="s">"car"</span><span class="o">)</span>
<span class="kd">public</span> <span class="kd">class</span> <span class="nc">Car</span> <span class="o">{</span>
	<span class="o">...</span>
	<span class="nd">@Autowired</span>
	<span class="kd">public</span> <span class="kt">void</span> <span class="nf">setEngine</span><span class="o">(</span><span class="n">Engine</span> <span class="n">engine</span><span class="o">)</span> <span class="o">{</span>
		<span class="k">this</span><span class="o">.</span><span class="na">engine</span> <span class="o">=</span> <span class="n">engine</span><span class="o">;</span>
	<span class="o">}</span>
	<span class="o">...</span>
<span class="o">}</span>
</code></pre>
</div>

<p><code class="highlighter-rouge">@Component</code>에 들어가는 속성값은 빈의 이름이다. getBean()을 호출할 때 사용한다.</p>

<div class="language-java highlighter-rouge"><pre class="highlight"><code><span class="nd">@Component</span><span class="o">(</span><span class="s">"engine"</span><span class="o">)</span>
<span class="kd">public</span> <span class="kd">class</span> <span class="nc">Engine</span> <span class="o">{</span>
	
	<span class="o">...</span>
<span class="o">}</span>
</code></pre>
</div>

<div class="language-xml highlighter-rouge"><pre class="highlight"><code><span class="cp">&lt;?xml version="1.0" encoding="UTF-8"?&gt;</span>
<span class="nt">&lt;beans</span> <span class="na">xmlns=</span><span class="s">"http://www.springframework.org/schema/beans"</span>
	<span class="na">xmlns:xsi=</span><span class="s">"http://www.w3.org/2001/XMLSchema-instance"</span> 
	<span class="na">xmlns:p=</span><span class="s">"http://www.springframework.org/schema/p"</span>
	<span class="na">xmlns:c=</span><span class="s">"http://www.springframework.org/schema/c"</span>
	<span class="na">xmlns:context=</span><span class="s">"http://www.springframework.org/schema/context"</span>
	<span class="na">xsi:schemaLocation=</span><span class="s">"http://www.springframework.org/schema/beans</span>
        <span class="err">http://www.springframework.org/schema/beans/spring-beans.xsd</span>
        <span class="err">http://www.springframework.org/schema/context</span>
        <span class="err">http://www.springframework.org/schema/context/spring-context.xsd"</span><span class="nt">&gt;</span>

  <span class="nt">&lt;context:component-scan</span> <span class="na">base-package=</span><span class="s">"exam.test21"</span><span class="nt">/&gt;</span>

<span class="nt">&lt;/beans&gt;</span>
</code></pre>
</div>

<p><code class="highlighter-rouge">&lt;context:component-scan/&gt;</code> 태그를 사용하여 <code class="highlighter-rouge">@Component, @Repository</code> 등 빈 생성 표시자(애노테이션)가 붙은 클래스를 검색하라고 선언한다.</p>

<p>앞의 코드의 경우 exam.test21 패키지 및 그 하위 패키지를 모두 검색할 것이다.</p>

<p><code class="highlighter-rouge">&lt;context:component-scan/&gt;</code> 태그를 선언하면 <code class="highlighter-rouge">&lt;context:annotation-config/&gt;</code>태그의 기능이 자동으로 활성화된다.</p>

<div class="language-java highlighter-rouge"><pre class="highlight"><code><span class="kn">package</span> <span class="n">exam</span><span class="o">.</span><span class="na">test21</span><span class="o">;</span>

<span class="kn">import</span> <span class="nn">org.springframework.context.support.ClassPathXmlApplicationContext</span><span class="o">;</span>

<span class="kd">public</span> <span class="kd">class</span> <span class="nc">Test</span> <span class="o">{</span>

	<span class="kd">public</span> <span class="kd">static</span> <span class="kt">void</span> <span class="nf">main</span><span class="o">(</span><span class="n">String</span><span class="o">[]</span> <span class="n">args</span><span class="o">)</span> <span class="o">{</span>
		<span class="n">ClassPathXmlApplicationContext</span> <span class="n">ctx</span> <span class="o">=</span> 
				<span class="k">new</span> <span class="nf">ClassPathXmlApplicationContext</span><span class="o">(</span><span class="s">"exam/test21/beans.xml"</span><span class="o">);</span>
		
		<span class="n">Car</span> <span class="n">car</span> <span class="o">=</span> <span class="o">(</span><span class="n">Car</span><span class="o">)</span> <span class="n">ctx</span><span class="o">.</span><span class="na">getBean</span><span class="o">(</span><span class="s">"car"</span><span class="o">);</span>
		
		<span class="n">Engine</span> <span class="n">engine</span> <span class="o">=</span> <span class="o">(</span><span class="n">Engine</span><span class="o">)</span> <span class="n">ctx</span><span class="o">.</span><span class="na">getBean</span><span class="o">(</span><span class="s">"engine"</span><span class="o">);</span>
		<span class="n">engine</span><span class="o">.</span><span class="na">setMaker</span><span class="o">(</span><span class="s">"Hyundai"</span><span class="o">);</span>
		<span class="n">engine</span><span class="o">.</span><span class="na">setCc</span><span class="o">(</span><span class="mi">1997</span><span class="o">);</span>
		
		<span class="k">if</span> <span class="o">(</span><span class="n">car</span> <span class="o">!=</span> <span class="kc">null</span><span class="o">)</span> <span class="o">{</span>
			<span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">"car != null"</span><span class="o">);</span>
		<span class="o">}</span>
		
		<span class="k">if</span> <span class="o">(</span><span class="n">engine</span> <span class="o">!=</span> <span class="kc">null</span><span class="o">)</span> <span class="o">{</span>
			<span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">"engine != null"</span><span class="o">);</span>
		<span class="o">}</span>
		
		<span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">car</span><span class="o">);</span>
		
		<span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">car</span><span class="o">.</span><span class="na">toString</span><span class="o">());</span>
	<span class="o">}</span>
<span class="o">}</span>
<span class="cm">/*
car != null
engine != null
[car:null
	[Engine:hyundai,1997]
]
*/</span>
</code></pre>
</div>

<p>이렇게 컴포넌트 자동 탐색(<code class="highlighter-rouge">&lt;context:component-scan/&gt;</code>)과 빈 자동생성 표시자(<code class="highlighter-rouge">@Component</code> 등)를 이용하면 빈 설정 파일(bean.xml)에 일일이 빈 정보를 선언할 필요가 없다.</p>

<p><br /></p>

<blockquote>
  <p><strong>컴포넌트 탐색의 포함 조건과 제외 조건</strong></p>

  <p><code class="highlighter-rouge">&lt;context:component-scan/&gt;</code>을 사용할 때 다음과 같이 탐색 조건을 추가할 수 있다.</p>

  <div class="language-xml highlighter-rouge"><pre class="highlight"><code><span class="nt">&lt;context:component-scan</span> <span class="na">base-package=</span><span class="s">"exam.test21"</span><span class="nt">&gt;</span>
	<span class="nt">&lt;context:include-filter</span> <span class="na">type=</span><span class="s">""</span> <span class="na">expression=</span><span class="s">""</span><span class="nt">/&gt;</span>
	<span class="nt">&lt;context:exclude-filter</span> <span class="na">type=</span><span class="s">""</span> <span class="na">expression=</span><span class="s">""</span><span class="nt">/&gt;</span>
<span class="nt">&lt;/context:component-scan&gt;</span>
</code></pre>
  </div>

  <p><code class="highlighter-rouge">context:include-filter</code>태그는 빈 탐색에 포함할 대상자를 지정할 때사용한다.</p>

  <p><code class="highlighter-rouge">context:exclude-filter</code>태그는 빈 탐색에 제외할 대상자를 지정할 때 사용한다.</p>
</blockquote>


                </div>
                <div class="read-all">
                    <a  href="/2016/09/21/beancontext2/"><i class="fa fa-newspaper-o"></i>Read All</a>
                </div>
                <hr>
              </li>
            
              <li>
                <h2>
                  <a class="post-link" href="/2016/09/21/beancontext1/">스프링 IoC컨테이너 ApplicationContext [1]</a>
                </h2>
                <div class="label">
                    <div class="label-card">
                        <i class="fa fa-calendar"></i>2016-09-21
                    </div>
                    <div class="label-card">
                        
                    </div>
                    <div class="label-card">
                        
                    </div>

                    <div class="label-card">
                    


<!-- <span class="point">•</span> -->
<span class="categories">
  <i class="fa fa-th-list"></i>
  
    
        <a href="/category/#Spring" title="Category: Spring" rel="category">Spring</a>
    
  

  <!-- <span class="point">•</span> -->
</span>


                    </div>

                </div>
                <div class="excerpt">
                    <h1 id="xml----">XML 기반 빈 관리 컨테이너</h1>

<p>스프링에서는 자바 객체를 <code class="highlighter-rouge">빈(Bean)</code>이라고 한다. 그래서 객체관리 컨테이너를 <code class="highlighter-rouge">빈컨테이너</code>라고 한다.</p>

<p>(스프링 IoC컨테이너 == 빈컨테이너)</p>

<p><strong>ApplicationContext의 계층도</strong></p>

<blockquote>
  <ul>
    <li>ApplicationContext (interface)
      <ul>
        <li>ClasspathXmlApplicationContext (class)</li>
        <li>FileSystemXmlApplicationContext (class)</li>
        <li>WebApplicationContext (interface)</li>
      </ul>
    </li>
  </ul>
</blockquote>

<p>스프링에서 빈 정보는 XML 파일에 저장해 두고 ClassPathXmlApplicationContext 클래스나 FileSystemXmlApplicaionContext 클래스를 사용하여 빈을 자동 생성한다. ClassPathXmlApplicationContext는 자바 클래스 경로에서 XML로 된 빈 설정 파일을 찾는다. FileSystemXmlApplicationContext는 파일 시스템 경로에서 빈 설정 파일을 찾는다. WebApplicationContext는 웹 어플리케이션을 위한 IoC 컨테이너로서 web.xml파일에 설정된 정보에 따라 XML파일을 찾는다.</p>

<p><br /></p>

<h3 id="bean--xml-">Bean 설정 XML 파일준비</h3>

<div class="language-xml highlighter-rouge"><pre class="highlight"><code><span class="cp">&lt;?xml version="1.0" encoding="UTF-8"?&gt;</span>
<span class="nt">&lt;beans</span> <span class="na">xmlns=</span><span class="s">"http://www.springframework.org/schema/beans"</span>
    <span class="na">xmlns:xsi=</span><span class="s">"http://www.w3.org/2001/XMLSchema-instance"</span>
    <span class="na">xsi:schemaLocation=</span><span class="s">"http://www.springframework.org/schema/beans</span>
        <span class="err">http://www.springframework.org/schema/beans/spring-beans.xsd"</span><span class="nt">&gt;</span>
        
  <span class="nt">&lt;bean</span> <span class="na">id=</span><span class="s">"score"</span> <span class="na">class=</span><span class="s">"exam.test01.Score"</span><span class="nt">/&gt;</span>
    
<span class="nt">&lt;/beans&gt;</span>
</code></pre>
</div>

<p>bean태그는 <code class="highlighter-rouge">&lt;beans xmlns="http://www.springframework.org/schema/beans"/&gt;</code> 네임스페이스에 소속되어 있기 때문에 XML파서가 이해할 수 있다. 이는 자바 클래스에서 import하는 것과 비슷하다.</p>

<p>위의 소스를 자바소스로 표현하면 아래와 같다.</p>

<div class="language-java highlighter-rouge"><pre class="highlight"><code><span class="k">new</span> <span class="n">exam</span><span class="o">.</span><span class="na">test01</span><span class="o">.</span><span class="na">Score</span><span class="o">();</span>
</code></pre>
</div>

<p>스프링 IoC 컨테이너가 생성할 자바 빈에 대한 정보는 <code class="highlighter-rouge">&lt;bean&gt;</code>태그로 선언한다. class속성에는 클래스 이름을 정한다. 주의 할점은 반드시 패키지 이름을 포함한 클래스 이름(fully qulified name)이어야 한다. id속성은 객체의 식별자이다. 빈컨테이너에서 객체를 꺼낼 때 이 식별자를 사용한다.</p>

<p><strong>스프링 IoC 컨테이너 사용</strong></p>

<div class="language-java highlighter-rouge"><pre class="highlight"><code><span class="kd">public</span> <span class="kd">class</span> <span class="nc">Test</span> <span class="o">{</span>

	<span class="kd">public</span> <span class="kd">static</span> <span class="kt">void</span> <span class="nf">main</span><span class="o">(</span><span class="n">String</span><span class="o">[]</span> <span class="n">args</span><span class="o">)</span> <span class="o">{</span>
		<span class="n">ClassPathXmlApplicationContext</span> <span class="n">ctx</span> <span class="o">=</span> 
				<span class="k">new</span> <span class="nf">ClassPathXmlApplicationContext</span><span class="o">(</span><span class="s">"exam/test01/beans.xml"</span><span class="o">);</span>
		
		<span class="n">Score</span> <span class="n">score</span> <span class="o">=</span> <span class="o">(</span><span class="n">Score</span><span class="o">)</span> <span class="n">ctx</span><span class="o">.</span><span class="na">getBean</span><span class="o">(</span><span class="s">"score"</span><span class="o">);</span>
		
		<span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">"합계:"</span> <span class="o">+</span> <span class="n">score</span><span class="o">.</span><span class="na">sum</span><span class="o">());</span>
		<span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">"평균:"</span> <span class="o">+</span> <span class="n">score</span><span class="o">.</span><span class="na">average</span><span class="o">());</span>
	<span class="o">}</span>
<span class="o">}</span>
</code></pre>
</div>

<h3 id="bean-">익명 Bean 선언</h3>

<div class="language-xml highlighter-rouge"><pre class="highlight"><code><span class="cp">&lt;?xml version="1.0" encoding="UTF-8"?&gt;</span>
<span class="nt">&lt;beans</span> <span class="na">xmlns=</span><span class="s">"http://www.springframework.org/schema/beans"</span>
    <span class="na">xmlns:xsi=</span><span class="s">"http://www.w3.org/2001/XMLSchema-instance"</span>
    <span class="na">xsi:schemaLocation=</span><span class="s">"http://www.springframework.org/schema/beans</span>
        <span class="err">http://www.springframework.org/schema/beans/spring-beans.xsd"</span><span class="nt">&gt;</span>
        
  <span class="nt">&lt;bean</span> <span class="na">class=</span><span class="s">"exam.test03.Score"</span><span class="nt">/&gt;</span>
  <span class="nt">&lt;bean</span> <span class="na">class=</span><span class="s">"exam.test03.Score"</span><span class="nt">/&gt;</span>
<span class="nt">&lt;/beans&gt;</span>
</code></pre>
</div>

<div class="language-java highlighter-rouge"><pre class="highlight"><code><span class="kn">package</span> <span class="n">exam</span><span class="o">.</span><span class="na">test03</span><span class="o">;</span>

<span class="kn">import</span> <span class="nn">org.springframework.context.support.ClassPathXmlApplicationContext</span><span class="o">;</span>

<span class="kd">public</span> <span class="kd">class</span> <span class="nc">Test</span> <span class="o">{</span>

	<span class="kd">public</span> <span class="kd">static</span> <span class="kt">void</span> <span class="nf">main</span><span class="o">(</span><span class="n">String</span><span class="o">[]</span> <span class="n">args</span><span class="o">)</span> <span class="o">{</span>
		<span class="n">ClassPathXmlApplicationContext</span> <span class="n">ctx</span> <span class="o">=</span> 
				<span class="k">new</span> <span class="nf">ClassPathXmlApplicationContext</span><span class="o">(</span><span class="s">"exam/test03/beans.xml"</span><span class="o">);</span>
		
		<span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">"[컨테이너에 보관된 객체의 이름 출력]"</span><span class="o">);</span>
		<span class="k">for</span> <span class="o">(</span><span class="n">String</span> <span class="n">name</span> <span class="o">:</span> <span class="n">ctx</span><span class="o">.</span><span class="na">getBeanDefinitionNames</span><span class="o">())</span> <span class="o">{</span>
			<span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">name</span><span class="o">);</span>
		<span class="o">}</span>
		
		<span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">"[exam.test03.Score#0의 별명 출력]"</span><span class="o">);</span>
		<span class="k">for</span> <span class="o">(</span><span class="n">String</span> <span class="n">alias</span> <span class="o">:</span> <span class="n">ctx</span><span class="o">.</span><span class="na">getAliases</span><span class="o">(</span><span class="s">"exam.test03.Score#0"</span><span class="o">))</span> <span class="o">{</span>
			<span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">alias</span><span class="o">);</span>
		<span class="o">}</span>
		
		<span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">"[익명 빈 꺼내기]"</span><span class="o">);</span>
		<span class="n">Score</span> <span class="n">score1</span> <span class="o">=</span> <span class="o">(</span><span class="n">Score</span><span class="o">)</span> <span class="n">ctx</span><span class="o">.</span><span class="na">getBean</span><span class="o">(</span><span class="s">"exam.test03.Score"</span><span class="o">);</span>
		<span class="n">Score</span> <span class="n">score2</span> <span class="o">=</span> <span class="o">(</span><span class="n">Score</span><span class="o">)</span> <span class="n">ctx</span><span class="o">.</span><span class="na">getBean</span><span class="o">(</span><span class="s">"exam.test03.Score#0"</span><span class="o">);</span>
		<span class="k">if</span> <span class="o">(</span><span class="n">score1</span> <span class="o">==</span> <span class="n">score2</span><span class="o">)</span> <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">"score == score#0"</span><span class="o">);</span>
		
		<span class="n">Score</span> <span class="n">score3</span> <span class="o">=</span> <span class="o">(</span><span class="n">Score</span><span class="o">)</span> <span class="n">ctx</span><span class="o">.</span><span class="na">getBean</span><span class="o">(</span><span class="s">"exam.test03.Score#1"</span><span class="o">);</span>
		<span class="k">if</span> <span class="o">(</span><span class="n">score1</span> <span class="o">!=</span> <span class="n">score3</span><span class="o">)</span> <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">"score != score#1"</span><span class="o">);</span>
		
		<span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">"[클래스 타입으로 빈 꺼내기]"</span><span class="o">);</span>
		<span class="n">Score</span> <span class="n">score4</span> <span class="o">=</span> <span class="o">(</span><span class="n">Score</span><span class="o">)</span> <span class="n">ctx</span><span class="o">.</span><span class="na">getBean</span><span class="o">(</span><span class="n">exam</span><span class="o">.</span><span class="na">test03</span><span class="o">.</span><span class="na">Score</span><span class="o">.</span><span class="na">class</span><span class="o">);</span>
	<span class="o">}</span>
<span class="o">}</span>

<span class="o">/*</span>
<span class="o">[</span><span class="err">컨테이너에</span> <span class="err">보관된</span> <span class="err">객체의</span> <span class="err">이름</span> <span class="err">출력</span><span class="o">]</span>
<span class="n">exam</span><span class="o">.</span><span class="na">test03</span><span class="o">.</span><span class="na">Score</span><span class="err">#</span><span class="mi">0</span>
<span class="n">exam</span><span class="o">.</span><span class="na">test03</span><span class="o">.</span><span class="na">Score</span><span class="err">#</span><span class="mi">1</span>

<span class="o">[</span><span class="n">exam</span><span class="o">.</span><span class="na">test03</span><span class="o">.</span><span class="na">Score</span><span class="err">#</span><span class="mi">0</span><span class="err">의</span> <span class="err">별명</span> <span class="err">출력</span><span class="o">]</span>
<span class="n">exam</span><span class="o">.</span><span class="na">test03</span><span class="o">.</span><span class="na">Score</span>

<span class="o">[</span><span class="err">익명</span> <span class="err">빈</span> <span class="err">꺼내기</span><span class="o">]</span>
<span class="n">score</span> <span class="o">==</span> <span class="n">score</span><span class="err">#</span><span class="mi">0</span>
<span class="n">score</span> <span class="o">!=</span> <span class="n">score</span><span class="err">#</span><span class="mi">1</span>

<span class="o">[</span><span class="err">클래스</span> <span class="err">타입으로</span> <span class="err">빈</span> <span class="err">꺼내기</span><span class="o">]</span>
<span class="n">Error</span>
</code></pre>
</div>

<p>클래스 타입으로도 객체를 꺼낼 수 있다. 하지만 getBean()을 호출할 때 Score 클래스에 대한 정보를 담은 java.lang.Class객체를 넘겨서 빈컨테이너에서 이 클래스의 인스턴스를 찾는다. 이때 같은 타입의 객체가 여러 개 있을 경우 예외가 발생한다.</p>

<p><br /></p>

<h3 id="section">생성자와 프로퍼티 설정</h3>

<p><code class="highlighter-rouge">&lt;constructor-arg&gt;</code> 엘러먼트를 이용하면 호출될 생성자를 지정할 수 있다.</p>

<p>생성자를 지정하는 방법은 아래와 같다.</p>

<div class="language-xml highlighter-rouge"><pre class="highlight"><code><span class="cp">&lt;?xml version="1.0" encoding="UTF-8"?&gt;</span>
<span class="nt">&lt;beans</span> <span class="na">xmlns=</span><span class="s">"http://www.springframework.org/schema/beans"</span>
    <span class="na">xmlns:xsi=</span><span class="s">"http://www.w3.org/2001/XMLSchema-instance"</span>
    <span class="na">xsi:schemaLocation=</span><span class="s">"http://www.springframework.org/schema/beans</span>
        <span class="err">http://www.springframework.org/schema/beans/spring-beans.xsd"</span><span class="nt">&gt;</span>
        
  <span class="nt">&lt;bean</span> <span class="na">id=</span><span class="s">"score1"</span> <span class="na">class=</span><span class="s">"exam.test04.Score"</span><span class="nt">&gt;</span>
      <span class="nt">&lt;constructor-arg&gt;&lt;value</span> <span class="na">type=</span><span class="s">"java.lang.String"</span><span class="nt">&gt;</span>홍길동<span class="nt">&lt;/value&gt;&lt;/constructor-arg&gt;</span>
      <span class="nt">&lt;constructor-arg&gt;&lt;value</span> <span class="na">type=</span><span class="s">"float"</span><span class="nt">&gt;</span>91<span class="nt">&lt;/value&gt;&lt;/constructor-arg&gt;</span>
      <span class="nt">&lt;constructor-arg&gt;&lt;value</span> <span class="na">type=</span><span class="s">"float"</span><span class="nt">&gt;</span>92<span class="nt">&lt;/value&gt;&lt;/constructor-arg&gt;</span>
      <span class="nt">&lt;constructor-arg&gt;&lt;value</span> <span class="na">type=</span><span class="s">"float"</span><span class="nt">&gt;</span>93<span class="nt">&lt;/value&gt;&lt;/constructor-arg&gt;</span>
  <span class="nt">&lt;/bean&gt;</span>
  //자바코드 -&gt; new Score("임꺽정",91,91,91);
  
  <span class="nt">&lt;bean</span> <span class="na">id=</span><span class="s">"score2"</span> <span class="na">class=</span><span class="s">"exam.test04.Score"</span><span class="nt">&gt;</span>
      <span class="nt">&lt;constructor-arg&gt;&lt;value&gt;</span>임꺽정<span class="nt">&lt;/value&gt;&lt;/constructor-arg&gt;</span>
      <span class="nt">&lt;constructor-arg&gt;&lt;value&gt;</span>81<span class="nt">&lt;/value&gt;&lt;/constructor-arg&gt;</span>
      <span class="nt">&lt;constructor-arg&gt;&lt;value&gt;</span>82<span class="nt">&lt;/value&gt;&lt;/constructor-arg&gt;</span>
      <span class="nt">&lt;constructor-arg&gt;&lt;value&gt;</span>83<span class="nt">&lt;/value&gt;&lt;/constructor-arg&gt;</span>
  <span class="nt">&lt;/bean&gt;</span> 
  //자바코드 -&gt; new Score("임꺽정",81,82,83);
  
  <span class="nt">&lt;bean</span> <span class="na">id=</span><span class="s">"score3"</span> <span class="na">class=</span><span class="s">"exam.test04.Score"</span><span class="nt">&gt;</span>
      <span class="nt">&lt;constructor-arg</span> <span class="na">type=</span><span class="s">"java.lang.String"</span> <span class="na">value=</span><span class="s">"장보고"</span><span class="nt">/&gt;</span>
      <span class="nt">&lt;constructor-arg</span> <span class="na">type=</span><span class="s">"float"</span> <span class="na">value=</span><span class="s">"71"</span><span class="nt">/&gt;</span>
      <span class="nt">&lt;constructor-arg</span> <span class="na">type=</span><span class="s">"float"</span> <span class="na">value=</span><span class="s">"72"</span><span class="nt">/&gt;</span>
      <span class="nt">&lt;constructor-arg</span> <span class="na">type=</span><span class="s">"float"</span> <span class="na">value=</span><span class="s">"73"</span><span class="nt">/&gt;</span>
  <span class="nt">&lt;/bean&gt;</span> 
  //자바코드 -&gt; new Score("장보고",71,72,73);
  
  <span class="nt">&lt;bean</span> <span class="na">id=</span><span class="s">"score4"</span> <span class="na">class=</span><span class="s">"exam.test04.Score"</span><span class="nt">&gt;</span>
      <span class="nt">&lt;constructor-arg</span> <span class="na">value=</span><span class="s">"이순신"</span><span class="nt">/&gt;</span>
      <span class="nt">&lt;constructor-arg</span> <span class="na">value=</span><span class="s">"100"</span><span class="nt">/&gt;</span>
      <span class="nt">&lt;constructor-arg</span> <span class="na">value=</span><span class="s">"98"</span><span class="nt">/&gt;</span>
      <span class="nt">&lt;constructor-arg</span> <span class="na">value=</span><span class="s">"99"</span><span class="nt">/&gt;</span>
  <span class="nt">&lt;/bean&gt;</span>
  //자바코드 -&gt; new Score("이순신",100,98,99);
    
  <span class="nt">&lt;bean</span> <span class="na">id=</span><span class="s">"score5"</span> <span class="na">class=</span><span class="s">"exam.test04.Score"</span><span class="nt">&gt;</span>
      <span class="nt">&lt;constructor-arg</span> <span class="na">value=</span><span class="s">"70"</span> <span class="na">index=</span><span class="s">"3"</span><span class="nt">/&gt;</span>
      <span class="nt">&lt;constructor-arg</span> <span class="na">value=</span><span class="s">"50"</span> <span class="na">index=</span><span class="s">"1"</span><span class="nt">/&gt;</span>
      <span class="nt">&lt;constructor-arg</span> <span class="na">value=</span><span class="s">"강감찬"</span> <span class="na">index=</span><span class="s">"0"</span><span class="nt">/&gt;</span>
      <span class="nt">&lt;constructor-arg</span> <span class="na">value=</span><span class="s">"60"</span> <span class="na">index=</span><span class="s">"2"</span><span class="nt">/&gt;</span>
  <span class="nt">&lt;/bean&gt;</span>
  //자바코드 -&gt; new Score("강감찬",50,60,70;
<span class="nt">&lt;/beans&gt;</span>
</code></pre>
</div>

<p><br />
프로퍼티값 설정은 다음과 같다.</p>

<div class="language-xml highlighter-rouge"><pre class="highlight"><code><span class="cp">&lt;?xml version="1.0" encoding="UTF-8"?&gt;</span>
<span class="nt">&lt;beans</span> <span class="na">xmlns=</span><span class="s">"http://www.springframework.org/schema/beans"</span>
    <span class="na">xmlns:xsi=</span><span class="s">"http://www.w3.org/2001/XMLSchema-instance"</span>
    <span class="na">xsi:schemaLocation=</span><span class="s">"http://www.springframework.org/schema/beans</span>
        <span class="err">http://www.springframework.org/schema/beans/spring-beans.xsd"</span><span class="nt">&gt;</span>
        
  <span class="nt">&lt;bean</span> <span class="na">id=</span><span class="s">"score1"</span> <span class="na">class=</span><span class="s">"exam.test05.Score"</span><span class="nt">&gt;</span>
    <span class="nt">&lt;property</span> <span class="na">name=</span><span class="s">"name"</span><span class="nt">&gt;&lt;value&gt;</span>홍길동<span class="nt">&lt;/value&gt;&lt;/property&gt;</span>
    <span class="nt">&lt;property</span> <span class="na">name=</span><span class="s">"kor"</span><span class="nt">&gt;&lt;value&gt;</span>100<span class="nt">&lt;/value&gt;&lt;/property&gt;</span>
    <span class="nt">&lt;property</span> <span class="na">name=</span><span class="s">"eng"</span><span class="nt">&gt;&lt;value&gt;</span>95<span class="nt">&lt;/value&gt;&lt;/property&gt;</span>
    <span class="nt">&lt;property</span> <span class="na">name=</span><span class="s">"math"</span><span class="nt">&gt;&lt;value&gt;</span>90<span class="nt">&lt;/value&gt;&lt;/property&gt;</span>
  <span class="nt">&lt;/bean&gt;</span>
  //자바코드 -&gt; Score score1 = new Score();
  //			score1.setName('홍길동');
  //			score1.setKor(100);
  //			score1.setEng(59);
  //			score1.setMath(90);
  
  <span class="nt">&lt;bean</span> <span class="na">id=</span><span class="s">"score2"</span> <span class="na">class=</span><span class="s">"exam.test05.Score"</span><span class="nt">&gt;</span>
    <span class="nt">&lt;property</span> <span class="na">name=</span><span class="s">"name"</span> <span class="na">value=</span><span class="s">"임꺽정"</span><span class="nt">/&gt;</span>
    <span class="nt">&lt;property</span> <span class="na">name=</span><span class="s">"kor"</span> <span class="na">value=</span><span class="s">"85"</span><span class="nt">/&gt;</span>
    <span class="nt">&lt;property</span> <span class="na">name=</span><span class="s">"eng"</span> <span class="na">value=</span><span class="s">"99"</span><span class="nt">/&gt;</span>
    <span class="nt">&lt;property</span> <span class="na">name=</span><span class="s">"math"</span> <span class="na">value=</span><span class="s">"100"</span><span class="nt">/&gt;</span>
  <span class="nt">&lt;/bean&gt;</span>
  //자바코드 -&gt; Score score2 = new Score();
  //			score2.setName('임꺽정');
  //			score2.setKor(85);
  //			score2.setEng(99);
  //			score2.setMath(100);  
<span class="nt">&lt;/beans&gt;</span>
</code></pre>
</div>

<p><br /></p>

<h3 id="bean------"><code class="highlighter-rouge">&lt;bean&gt;</code>의 속성을 이용하여 생성자 및 프로퍼티 설정하기</h3>

<div class="language-xml highlighter-rouge"><pre class="highlight"><code><span class="cp">&lt;?xml version="1.0" encoding="UTF-8"?&gt;</span>
<span class="nt">&lt;beans</span> <span class="na">xmlns=</span><span class="s">"http://www.springframework.org/schema/beans"</span>
    <span class="na">xmlns:xsi=</span><span class="s">"http://www.w3.org/2001/XMLSchema-instance"</span>
    <span class="na">xmlns:p=</span><span class="s">"http://www.springframework.org/schema/p"</span>
    <span class="na">xmlns:c=</span><span class="s">"http://www.springframework.org/schema/c"</span>
    <span class="na">xsi:schemaLocation=</span><span class="s">"http://www.springframework.org/schema/beans</span>
        <span class="err">http://www.springframework.org/schema/beans/spring-beans.xsd"</span><span class="nt">&gt;</span>
  
  <span class="nt">&lt;bean</span> <span class="na">id=</span><span class="s">"score1"</span> <span class="na">class=</span><span class="s">"exam.test06.Score"</span>
      <span class="na">p:name=</span><span class="s">"홍길동"</span> <span class="na">p:kor=</span><span class="s">"100"</span> <span class="na">p:eng=</span><span class="s">"95"</span> <span class="na">p:math=</span><span class="s">"90"</span><span class="nt">/&gt;</span>
      
  //자바코드 -&gt; Score score1 = new Score();
  //			score1.setName('홍길동);
  //			score1.setKor(100);
  //			score1.setEng(95);
  //			score1.setMath(90);
  
  <span class="nt">&lt;bean</span> <span class="na">id=</span><span class="s">"score2"</span> <span class="na">class=</span><span class="s">"exam.test06.Score"</span>
      <span class="na">c:name=</span><span class="s">"임꺽정"</span> <span class="na">c:kor=</span><span class="s">"80"</span> <span class="na">c:eng=</span><span class="s">"90"</span> <span class="na">c:math=</span><span class="s">"100"</span><span class="nt">/&gt;</span>

  //자바코드 -&gt; Score score2 = new Score('임꺽정',80,90,100);  
<span class="nt">&lt;/beans&gt;</span>
</code></pre>
</div>

<p><code class="highlighter-rouge">xmlns:p="http://www.springframework.org/schema/p"</code>, <code class="highlighter-rouge">xmlns:c="http://www.springframework.org/schema/c"</code>의 네임스페이스를 통해서 <code class="highlighter-rouge">&lt;bean&gt;</code>속성을 통해 프로퍼티와 생성자도 설정이 가능하다.</p>

<p><br /></p>

<h3 id="section-1">의존 객체 주입</h3>

<p>어떤 객체가 작업을 수행하기 위해 다른 객체를 지속적으로 사용한다면 그 사용되는 객체를 의존 객체(depencencies)라 한다. 보통 지속적으로 사용할 객체는 프로퍼티에 보관한다.</p>

<p>예제로 Car객체를 만들때 tires객체와 engine객체를 사용한다.</p>

<div class="language-xml highlighter-rouge"><pre class="highlight"><code><span class="cp">&lt;?xml version="1.0" encoding="UTF-8"?&gt;</span>
<span class="nt">&lt;beans</span> <span class="na">xmlns=</span><span class="s">"http://www.springframework.org/schema/beans"</span>
    <span class="na">xmlns:xsi=</span><span class="s">"http://www.w3.org/2001/XMLSchema-instance"</span>
    <span class="na">xmlns:p=</span><span class="s">"http://www.springframework.org/schema/p"</span>
    <span class="na">xmlns:c=</span><span class="s">"http://www.springframework.org/schema/c"</span>
    <span class="na">xsi:schemaLocation=</span><span class="s">"http://www.springframework.org/schema/beans</span>
        <span class="err">http://www.springframework.org/schema/beans/spring-beans.xsd"</span><span class="nt">&gt;</span>
  
  <span class="nt">&lt;bean</span> <span class="na">id=</span><span class="s">"engine1"</span> <span class="na">class=</span><span class="s">"exam.test07.Engine"</span> 
      <span class="na">c:maker=</span><span class="s">"Hyundai"</span> <span class="na">p:cc=</span><span class="s">"1998"</span><span class="nt">/&gt;</span>
  //자바코드 -&gt; Engine engine1 = new Engine("Hyundai");
  //			engine1.setCc(1998);			  
  
  <span class="nt">&lt;bean</span> <span class="na">id=</span><span class="s">"car1"</span> <span class="na">class=</span><span class="s">"exam.test07.Car"</span><span class="nt">&gt;</span>
      <span class="nt">&lt;property</span> <span class="na">name=</span><span class="s">"model"</span><span class="nt">&gt;&lt;value&gt;</span>Avante<span class="nt">&lt;/value&gt;&lt;/property&gt;</span>
      <span class="nt">&lt;property</span> <span class="na">name=</span><span class="s">"engine"</span><span class="nt">&gt;&lt;ref</span> <span class="na">bean=</span><span class="s">"engine1"</span><span class="nt">/&gt;&lt;/property&gt;</span>
  <span class="nt">&lt;/bean&gt;</span>
  //자바코드 -&gt; Car car1 = new Car();
  //			car1.setModel("Avante");
  //			car1.setEngine(engine1);  
  
  <span class="nt">&lt;bean</span> <span class="na">id=</span><span class="s">"car2"</span> <span class="na">class=</span><span class="s">"exam.test07.Car"</span>
      <span class="na">c:model=</span><span class="s">"Equus"</span> <span class="na">c:engine-ref=</span><span class="s">"engine1"</span><span class="nt">/&gt;</span>
  //자바코드 -&gt; Car car2 = new Car("Equus",engine1);
<span class="nt">&lt;/beans&gt;</span>
</code></pre>
</div>

<p><code class="highlighter-rouge">&lt;ref&gt;</code>태그를 사용하여 Engine의 참조하였다.</p>

<p><br /></p>

<h3 id="section-2">개별 인스턴스 주입하기</h3>

<div class="language-xml highlighter-rouge"><pre class="highlight"><code><span class="cp">&lt;?xml version="1.0" encoding="UTF-8"?&gt;</span>
<span class="nt">&lt;beans</span> <span class="na">xmlns=</span><span class="s">"http://www.springframework.org/schema/beans"</span>
	<span class="na">xmlns:xsi=</span><span class="s">"http://www.w3.org/2001/XMLSchema-instance"</span> 
	<span class="na">xmlns:p=</span><span class="s">"http://www.springframework.org/schema/p"</span>
	<span class="na">xmlns:c=</span><span class="s">"http://www.springframework.org/schema/c"</span>
	<span class="na">xsi:schemaLocation=</span><span class="s">"http://www.springframework.org/schema/beans</span>
        <span class="err">http://www.springframework.org/schema/beans/spring-beans.xsd"</span><span class="nt">&gt;</span>

	<span class="nt">&lt;bean</span> <span class="na">id=</span><span class="s">"car1"</span> <span class="na">class=</span><span class="s">"exam.test08.Car"</span><span class="nt">&gt;</span>
		<span class="nt">&lt;constructor-arg</span> <span class="na">value=</span><span class="s">"Avante"</span> <span class="nt">/&gt;</span>
		<span class="nt">&lt;constructor-arg&gt;</span>
			<span class="nt">&lt;bean</span> <span class="na">class=</span><span class="s">"exam.test08.Engine"</span> <span class="na">p:maker=</span><span class="s">"Hyundai"</span> <span class="na">p:cc=</span><span class="s">"1495"</span> <span class="nt">/&gt;</span>
		<span class="nt">&lt;/constructor-arg&gt;</span>
	<span class="nt">&lt;/bean&gt;</span>
		
	//자바코드 -&gt; Engine temp = new Engine();
	//			  temp.setMaker("Hyundai");
	//			  temp.setCc(1495);
	//			  Car Car1 = new Car("Avante", temp);
	
	<span class="nt">&lt;bean</span> <span class="na">id=</span><span class="s">"car2"</span> <span class="na">class=</span><span class="s">"exam.test08.Car"</span><span class="nt">&gt;</span>
		<span class="nt">&lt;property</span> <span class="na">name=</span><span class="s">"model"</span> <span class="na">value=</span><span class="s">"Sonata"</span> <span class="nt">/&gt;</span>
		<span class="nt">&lt;property</span> <span class="na">name=</span><span class="s">"engine"</span><span class="nt">&gt;</span>
			<span class="nt">&lt;bean</span> <span class="na">class=</span><span class="s">"exam.test08.Engine"</span> <span class="na">p:maker=</span><span class="s">"Hyundai"</span> <span class="na">p:cc=</span><span class="s">"1997"</span> <span class="nt">/&gt;</span>
		<span class="nt">&lt;/property&gt;</span>
	<span class="nt">&lt;/bean&gt;</span>
	
	//자바코드 -&gt; Car car2 new Car();
	//			  car2.setModel("Sonata");
	//			  Engine temp = new Engine();
	//			  temp.setMaker("Hyundai");
	//			  temp.setCc(1997);
	//			  car2.setEngine(temp);
<span class="nt">&lt;/beans&gt;</span>
</code></pre>
</div>

<p><br /></p>

<h3 id="section-3">컬랙션 값 주입</h3>

<p><strong>배열 프로퍼티의 값 주입</strong></p>

<div class="language-xml highlighter-rouge"><pre class="highlight"><code><span class="cp">&lt;?xml version="1.0" encoding="UTF-8"?&gt;</span>
<span class="nt">&lt;beans</span> <span class="na">xmlns=</span><span class="s">"http://www.springframework.org/schema/beans"</span>
	<span class="na">xmlns:xsi=</span><span class="s">"http://www.w3.org/2001/XMLSchema-instance"</span> 
	<span class="na">xmlns:p=</span><span class="s">"http://www.springframework.org/schema/p"</span>
	<span class="na">xmlns:c=</span><span class="s">"http://www.springframework.org/schema/c"</span>
	<span class="na">xsi:schemaLocation=</span><span class="s">"http://www.springframework.org/schema/beans</span>
        <span class="err">http://www.springframework.org/schema/beans/spring-beans.xsd"</span><span class="nt">&gt;</span>

	<span class="nt">&lt;bean</span> <span class="na">id=</span><span class="s">"car1"</span> <span class="na">class=</span><span class="s">"exam.test09.Car"</span><span class="nt">&gt;</span>
		<span class="nt">&lt;constructor-arg</span> <span class="na">value=</span><span class="s">"Avante"</span> <span class="nt">/&gt;</span>
		<span class="nt">&lt;constructor-arg&gt;</span>
			<span class="nt">&lt;bean</span> <span class="na">class=</span><span class="s">"exam.test09.Engine"</span> <span class="na">p:maker=</span><span class="s">"Hyundai"</span> <span class="na">p:cc=</span><span class="s">"1495"</span> <span class="nt">/&gt;</span>
		<span class="nt">&lt;/constructor-arg&gt;</span>
		<span class="nt">&lt;property</span> <span class="na">name=</span><span class="s">"tires"</span><span class="nt">&gt;</span>
			<span class="nt">&lt;list&gt;</span>
				<span class="nt">&lt;bean</span> <span class="na">class=</span><span class="s">"exam.test09.Tire"</span> <span class="na">p:maker=</span><span class="s">"Kumho"</span> <span class="na">p:spec=</span><span class="s">"P185"</span> <span class="nt">/&gt;</span>
				<span class="nt">&lt;bean</span> <span class="na">class=</span><span class="s">"exam.test09.Tire"</span> <span class="na">p:maker=</span><span class="s">"Kumho"</span> <span class="na">p:spec=</span><span class="s">"P185"</span> <span class="nt">/&gt;</span>
			<span class="nt">&lt;/list&gt;</span>
		<span class="nt">&lt;/property&gt;</span>
	<span class="nt">&lt;/bean&gt;</span>
	
	//자바코드 -&gt; Engine temp = new Engine();
	//			  temp.setMaker("Hyundai");
	//			  temp.setCc(1495);
	//			  Car car1 = new Car("Avante",temp);
	//			  Tire[] temp2 = new Tire[]{new Tire(), new Tire()};
	//			  temp2[0].setMaker("Kumho");
	//			  temp2[0].setSpeck("P185");
	//			  temp2[1].setMaker("Kumho");
	//			  temp2[1].setSpeck("P185");
	//			  car1.setTire(temp2);
<span class="nt">&lt;/beans&gt;</span>
</code></pre>
</div>
<p><br /></p>

<p><strong>Map과 Properties값 주입</strong></p>

<blockquote>
  <p>Map과 Preoperties의 용도</p>

  <p>java.util.Map 타입의 클래스는 식별자(key)나 값(value)으로 문자열뿐만 아니라 다른 타입의 객체도 사용할 수 있습니다. java.util.Properties 클래스도 Map의 일종(Map 인터페이스를 구현했음)이지만 주로 문자열로 된 식별자와 값을 다룰 때 사용한다.</p>
</blockquote>

<p><br /></p>

<div class="language-xml highlighter-rouge"><pre class="highlight"><code><span class="cp">&lt;?xml version="1.0" encoding="UTF-8"?&gt;</span>
<span class="nt">&lt;beans</span> <span class="na">xmlns=</span><span class="s">"http://www.springframework.org/schema/beans"</span>
	<span class="na">xmlns:xsi=</span><span class="s">"http://www.w3.org/2001/XMLSchema-instance"</span> 
	<span class="na">xmlns:p=</span><span class="s">"http://www.springframework.org/schema/p"</span>
	<span class="na">xmlns:c=</span><span class="s">"http://www.springframework.org/schema/c"</span>
	<span class="na">xsi:schemaLocation=</span><span class="s">"http://www.springframework.org/schema/beans</span>
        <span class="err">http://www.springframework.org/schema/beans/spring-beans.xsd"</span><span class="nt">&gt;</span>

	<span class="nt">&lt;bean</span> <span class="na">id=</span><span class="s">"spareTire"</span> <span class="na">class=</span><span class="s">"exam.test10.Tire"</span><span class="nt">&gt;</span>
		<span class="nt">&lt;property</span> <span class="na">name=</span><span class="s">"maker"</span> <span class="na">value=</span><span class="s">"Hyundai"</span> <span class="nt">/&gt;</span>
		<span class="nt">&lt;property</span> <span class="na">name=</span><span class="s">"spec"</span><span class="nt">&gt;</span>
			<span class="nt">&lt;props&gt;</span>
				<span class="nt">&lt;prop</span> <span class="na">key=</span><span class="s">"width"</span><span class="nt">&gt;</span>205<span class="nt">&lt;/prop&gt;</span>
				<span class="nt">&lt;prop</span> <span class="na">key=</span><span class="s">"ratio"</span><span class="nt">&gt;</span>65<span class="nt">&lt;/prop&gt;</span>
				<span class="nt">&lt;prop</span> <span class="na">key=</span><span class="s">"rim.diameter"</span><span class="nt">&gt;</span>14<span class="nt">&lt;/prop&gt;</span>
			<span class="nt">&lt;/props&gt;</span>
		<span class="nt">&lt;/property&gt;</span>
	<span class="nt">&lt;/bean&gt;</span>
	
	//자바 코드 -&gt; Tire spareTire = new Tire();
	//				spareTire.setMaker("Hyundai");
	//				Properties temp = new Properties();
	//				temp.setProperty("width", "205");
	//				temp.setProperty("ratio","65");
	//				temp.setProperty("rim.diameter","14");
	//				spareTire.setSpec(temp);

	<span class="nt">&lt;bean</span> <span class="na">id=</span><span class="s">"car1"</span> <span class="na">class=</span><span class="s">"exam.test10.Car"</span><span class="nt">&gt;</span>
		<span class="nt">&lt;constructor-arg</span> <span class="na">value=</span><span class="s">"Avante"</span> <span class="nt">/&gt;</span>
		<span class="nt">&lt;constructor-arg&gt;</span>
			<span class="nt">&lt;bean</span> <span class="na">class=</span><span class="s">"exam.test10.Engine"</span> <span class="na">p:maker=</span><span class="s">"Hyundai"</span> <span class="na">p:cc=</span><span class="s">"1495"</span> <span class="nt">/&gt;</span>
		<span class="nt">&lt;/constructor-arg&gt;</span>
		<span class="nt">&lt;property</span> <span class="na">name=</span><span class="s">"options"</span><span class="nt">&gt;</span>
			<span class="nt">&lt;map&gt;</span>
				<span class="nt">&lt;entry&gt;</span>
					<span class="nt">&lt;key&gt;</span>
						<span class="nt">&lt;value&gt;</span>sunroof<span class="nt">&lt;/value&gt;</span>
					<span class="nt">&lt;/key&gt;</span>
					<span class="nt">&lt;value&gt;</span>yes<span class="nt">&lt;/value&gt;</span>
				<span class="nt">&lt;/entry&gt;</span>
				<span class="nt">&lt;entry</span> <span class="na">key=</span><span class="s">"airbag"</span> <span class="na">value=</span><span class="s">"dual"</span> <span class="nt">/&gt;</span>
				<span class="nt">&lt;entry</span> <span class="na">key=</span><span class="s">"sparetire"</span><span class="nt">&gt;</span>
					<span class="nt">&lt;ref</span> <span class="na">bean=</span><span class="s">"spareTire"</span> <span class="nt">/&gt;</span>
				<span class="nt">&lt;/entry&gt;</span>
			<span class="nt">&lt;/map&gt;</span>
		<span class="nt">&lt;/property&gt;</span>
	<span class="nt">&lt;/bean&gt;</span>
	
	//자바 코드 -&gt; Engine temp = new Engine();
	//				temp.setMaker("Hyundai")
	//				temp.setCc(1496);
	//				Car car1 = new Car("Avante",temp);
	//				Map<span class="nt">&lt;Object</span><span class="err">,Object</span><span class="nt">&gt;</span> tempMap = new HashMap<span class="nt">&lt;Object</span><span class="err">,Object</span><span class="nt">&gt;</span>();
	//				car1.setOptions(tempMap);
	//				tempMap.put("sunroof","yes");
	//				tempMap.put("airbag","dual");
	//				tempMap.put("spaertire",spareTire);
<span class="nt">&lt;/beans&gt;</span>
</code></pre>
</div>

<p><br /></p>

<h3 id="reference">Reference</h3>
<ul>
  <li><a href="http://www.yes24.com/24/Goods/13159413?Acode=101">열혈강의 자바 웹 개발 워크북</a></li>
</ul>

                </div>
                <div class="read-all">
                    <a  href="/2016/09/21/beancontext1/"><i class="fa fa-newspaper-o"></i>Read All</a>
                </div>
                <hr>
              </li>
            
              <li>
                <h2>
                  <a class="post-link" href="/2016/09/20/dynamic_sql/">mybatis 동적 SQL</a>
                </h2>
                <div class="label">
                    <div class="label-card">
                        <i class="fa fa-calendar"></i>2016-09-20
                    </div>
                    <div class="label-card">
                        
                    </div>
                    <div class="label-card">
                        
                    </div>

                    <div class="label-card">
                    


<!-- <span class="point">•</span> -->
<span class="categories">
  <i class="fa fa-th-list"></i>
  
    
        <a href="/category/#web" title="Category: web" rel="category">web</a>
    
  

  <!-- <span class="point">•</span> -->
</span>


                    </div>

                </div>
                <div class="excerpt">
                    <h1 id="sql">동적 SQL</h1>

<p>mybatis는 동적 SQL을 위한 엘리먼트를 제공한다.</p>

<p><br /></p>

<p><strong>동적 SQL을 작성할 때 사용하는 엘리먼트</strong></p>

<table>
  <thead>
    <tr>
      <th>엘리먼트 예</th>
      <th>설명</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>&lt;if test=”조건”&gt;SQL문&lt;/if&gt;</td>
      <td><code class="highlighter-rouge">&lt;if&gt;</code>태그는 어떤 값을 상태를 검사하여 참일 경우에만 SQL문을 포함하고 싶을 때 사용한다. test속성에 지정된 조건이 참이면 <code class="highlighter-rouge">&lt;if&gt;</code>태그의 내용을 반환한다.</td>
    </tr>
    <tr>
      <td>&lt;choose&gt; <br />   &lt;when test=”조건1”&gt;SQL문&lt;/when&gt; <br /> &lt;when test=”조건2”&gt;SQL문&lt;/when&gt; <br /> &lt;otherwise&gt;SQL문 &lt;/otherwise&gt; &lt;/choose&gt;</td>
      <td><code class="highlighter-rouge">&lt;choose&gt;</code>태그는 검사할 조건이 여러 개일 경우에 사용한다. test속성에 지정된 조건이 참이면 <code class="highlighter-rouge">&lt;when&gt;</code>태그의 내용을 반환한다. 일치하는 조건이 없으면 <code class="highlighter-rouge">&lt;otherwise&gt;</code>의 내용을 반환한다.</td>
    </tr>
    <tr>
      <td>&lt;where&gt; <br /> &lt;if test =”조건1&gt;SQL문&lt;/when&gt; <br /> &lt;if test=”조건2&gt;SQL문&lt;/when&gt; <br /> &lt;/where&gt;</td>
      <td><code class="highlighter-rouge">&lt;where&gt;</code>태그는 WHERE절을 반환한다. <code class="highlighter-rouge">&lt;where&gt;</code> 안의 하위 태그를 실행하고 나서 반환값이 있으면 WHERE절을 만들어 반환하고, 없으면 WHERE절을 반환하지 않는다.</td>
    </tr>
    <tr>
      <td>&lt;trim prefix=”단어” prefixOverrides=”문자열|문자열”&gt; <br /> &lt;if test=”조건1”&gt;SQL문&lt;/when&gt; <br /> &lt;if test=”조건2”&gt;SQL문&lt;/when&gt; <br /> &lt;/trim&gt;</td>
      <td><code class="highlighter-rouge">&lt;trim&gt;</code>태그는 특정 단어로 시작하는 SQL문을 반환하고 싶을 때 사용한다. prefix는 반환값 앞에 붙일 접두어를 지정한다. prefixOverrides는 반환할 값에서 제거해야 하는 접두어를 지정한다. <br />  다시 말하면 <code class="highlighter-rouge">&lt;trim&gt;</code>의 반환값이 있다면, 그 값의 앞부분이 prefixOverride에 지정된 문자열과 일치할 경우 그 문자열을 제거한다. 그리고 그 값의 앞부분에 prefix로 지정한 접두어를 붙여 반환한다.</td>
    </tr>
    <tr>
      <td>&lt;set&gt; <br /> &lt;if test=”조건1”&gt;SQL문&lt;/when&gt; <br /> &lt;if test=”조건2”&gt;SQL문&lt;/when&gt; <br /> &lt;set&gt;</td>
      <td><code class="highlighter-rouge">&lt;set&gt;</code>태그는 UPDATE문의 SET절을 만들 때 사용한다. 조건이 참인 <code class="highlighter-rouge">&lt;if&gt;</code>의 내용은 SET절에 포함된다. SET 절의 항목이 여러개 일 경우 자동으로 콤마(,)를 붙인다.</td>
    </tr>
    <tr>
      <td>&lt;foreach <br /> item=”항목”<br /> index=”인덱스”<br />collection=”목록”<br />open=”시작문자열”<br />close=”종료문자열”<br />separator=”구분자”&gt;<br /> &lt;/foreach&gt;</td>
      <td><code class="highlighter-rouge">&lt;foreach&gt;</code>태그는 목록의 값을 가지고 SQL문을 만들 때 사용한다. 특히 IN(값, 값…)조건을 만들 때 좋다. item속성에는 항목을 가리킬 때 사용할 변수의 이름을 지정한다. index속성에는 항목의 인덱스 값을 꺼낼 때 사용할 변수 이름을 지정한다. collection속성에는 java.util.List 구현체나 배열 객체가 온다. open속성에는 최종 반환값의 접두어를 지정한다. close는 최종 반환값의 접미어를 지정한다. separatory 속성은 반복으로 생ㅇ성하는 값을 구분하기 위해 붙이는 문자열을 지정한다.</td>
    </tr>
    <tr>
      <td>&lt;bind name=”변수명” value=”값”/&gt;</td>
      <td><code class="highlighter-rouge">&lt;bind&gt;</code>태그는 변수를 생성할 때 사용한다.</td>
    </tr>
  </tbody>
</table>

<p><br /></p>

<p><strong>사용예</strong></p>

<div class="language-xml highlighter-rouge"><pre class="highlight"><code>//MySqlProjectDao.xml

  <span class="nt">&lt;select</span> <span class="na">id=</span><span class="s">"selectList"</span> <span class="na">resultMap=</span><span class="s">"projectResultMap"</span><span class="nt">&gt;</span>
	  select PNO, PNAME, STA_DATE, END_DATE, STATE
	  from PROJECTS
	  order by 
	  <span class="nt">&lt;choose&gt;</span> 
        <span class="nt">&lt;when</span> <span class="na">test=</span><span class="s">"orderCond == 'TITLE_ASC'"</span><span class="nt">&gt;</span>PNAME asc<span class="nt">&lt;/when&gt;</span>
        <span class="nt">&lt;when</span> <span class="na">test=</span><span class="s">"orderCond == 'TITLE_DESC'"</span><span class="nt">&gt;</span>PNAME desc<span class="nt">&lt;/when&gt;</span>
        <span class="nt">&lt;when</span> <span class="na">test=</span><span class="s">"orderCond == 'STARTDATE_ASC'"</span><span class="nt">&gt;</span>STA_DATE asc<span class="nt">&lt;/when&gt;</span>
        <span class="nt">&lt;when</span> <span class="na">test=</span><span class="s">"orderCond == 'STARTDATE_DESC'"</span><span class="nt">&gt;</span>STA_DATE desc<span class="nt">&lt;/when&gt;</span>
        <span class="nt">&lt;when</span> <span class="na">test=</span><span class="s">"orderCond == 'ENDDATE_ASC'"</span><span class="nt">&gt;</span>END_DATE asc<span class="nt">&lt;/when&gt;</span>
        <span class="nt">&lt;when</span> <span class="na">test=</span><span class="s">"orderCond == 'ENDDATE_DESC'"</span><span class="nt">&gt;</span>END_DATE desc<span class="nt">&lt;/when&gt;</span>
        <span class="nt">&lt;when</span> <span class="na">test=</span><span class="s">"orderCond == 'STATE_ASC'"</span><span class="nt">&gt;</span>STATE asc<span class="nt">&lt;/when&gt;</span>
        <span class="nt">&lt;when</span> <span class="na">test=</span><span class="s">"orderCond == 'STATE_DESC'"</span><span class="nt">&gt;</span>STATE desc<span class="nt">&lt;/when&gt;</span>
        <span class="nt">&lt;when</span> <span class="na">test=</span><span class="s">"orderCond == 'PNO_ASC'"</span><span class="nt">&gt;</span>PNO asc<span class="nt">&lt;/when&gt;</span>
        <span class="nt">&lt;otherwise&gt;</span>PNO desc<span class="nt">&lt;/otherwise&gt;</span>
    <span class="nt">&lt;/choose&gt;</span>
  <span class="nt">&lt;/select&gt;</span>
  
    <span class="nt">&lt;update</span> <span class="na">id=</span><span class="s">"update"</span> <span class="na">parameterType=</span><span class="s">"map"</span><span class="nt">&gt;</span>
    update PROJECTS 
 	<span class="nt">&lt;set&gt;</span>
      <span class="nt">&lt;if</span> <span class="na">test=</span><span class="s">"title != null"</span><span class="nt">&gt;</span>PNAME=#{title},<span class="nt">&lt;/if&gt;</span>
      <span class="nt">&lt;if</span> <span class="na">test=</span><span class="s">"content != null"</span><span class="nt">&gt;</span>CONTENT=#{content},<span class="nt">&lt;/if&gt;</span>
      <span class="nt">&lt;if</span> <span class="na">test=</span><span class="s">"startDate != null"</span><span class="nt">&gt;</span>STA_DATE=#{startDate},<span class="nt">&lt;/if&gt;</span>
      <span class="nt">&lt;if</span> <span class="na">test=</span><span class="s">"endDate != null"</span><span class="nt">&gt;</span>END_DATE=#{endDate},<span class="nt">&lt;/if&gt;</span>
      <span class="nt">&lt;if</span> <span class="na">test=</span><span class="s">"state != null"</span><span class="nt">&gt;</span>STATE=#{state},<span class="nt">&lt;/if&gt;</span>
      <span class="nt">&lt;if</span> <span class="na">test=</span><span class="s">"tags != null"</span><span class="nt">&gt;</span>TAGS=#{tags}<span class="nt">&lt;/if&gt;</span>
    <span class="nt">&lt;/set&gt;</span>
    where PNO=#{no}
  <span class="nt">&lt;/update&gt;</span>
  
</code></pre>
</div>

<p><br /></p>

<h3 id="reference">Reference</h3>
<ul>
  <li><a href="http://www.yes24.com/24/Goods/13159413?Acode=101">열혈강의 자바 웹 개발 워크북</a></li>
</ul>

                </div>
                <div class="read-all">
                    <a  href="/2016/09/20/dynamic_sql/"><i class="fa fa-newspaper-o"></i>Read All</a>
                </div>
                <hr>
              </li>
            
              <li>
                <h2>
                  <a class="post-link" href="/2016/09/20/mybatis_log/">mybatis log출력</a>
                </h2>
                <div class="label">
                    <div class="label-card">
                        <i class="fa fa-calendar"></i>2016-09-20
                    </div>
                    <div class="label-card">
                        
                    </div>
                    <div class="label-card">
                        
                    </div>

                    <div class="label-card">
                    


<!-- <span class="point">•</span> -->
<span class="categories">
  <i class="fa fa-th-list"></i>
  
    
        <a href="/category/#web" title="Category: web" rel="category">web</a>
    
  

  <!-- <span class="point">•</span> -->
</span>


                    </div>

                </div>
                <div class="excerpt">
                    <h1 id="mybatis--">1. mybatis 로그 출력</h1>

<p>데이터베이스 입출력을 로그로 볼 수 있는 기능이 mybatis에 있다. mybatis설정 파일에 다음과 같이 편집을 한다.</p>


                </div>
                <div class="read-all">
                    <a  href="/2016/09/20/mybatis_log/"><i class="fa fa-newspaper-o"></i>Read All</a>
                </div>
                <hr>
              </li>
            
              <li>
                <h2>
                  <a class="post-link" href="/2016/09/18/mybatis/">mybatis 개론</a>
                </h2>
                <div class="label">
                    <div class="label-card">
                        <i class="fa fa-calendar"></i>2016-09-18
                    </div>
                    <div class="label-card">
                        
                    </div>
                    <div class="label-card">
                        
                    </div>

                    <div class="label-card">
                    


<!-- <span class="point">•</span> -->
<span class="categories">
  <i class="fa fa-th-list"></i>
  
    
        <a href="/category/#web" title="Category: web" rel="category">web</a>
    
  

  <!-- <span class="point">•</span> -->
</span>


                    </div>

                </div>
                <div class="excerpt">
                    <h1 id="mybatis">1. mybatis소개</h1>

<h3 id="persistence">퍼시스턴스(Persistence)프레임워크</h3>

<p>퍼시스턴스라는 용어는 개발 분야에서 많이 사용하는 용어이다. 데이터의 지속성을 의마하는 용어로 어플리케이션을 종료하고 다시 실행하더라도 이전에 저장한 데이터를 다시 불러올 수 있는 기술이다.</p>

<p>퍼시스턴스 프레임워크는 데이터의 저장, 조회, 변경, 삭제를 다루는 클래스 및 설정 파일들의 집합니다. 이를 사용하면 JDBC 프로그래밍의 복잡함이나 번거로움 없이 간단한 작업 만으로 데이터베이스와 연동되는 시스템을 빠르고 안전적으로 구동되게 개발할 수 있다.</p>

<p>퍼시스턴스 프레임워크에는 SQL문장으로 직접 DB데이터를 다루는 <code class="highlighter-rouge">SQL맵퍼(mapper)</code>와 자바객체를 통해 간접적으로 DB데이터를 다루는 <code class="highlighter-rouge">객체 관계 맵퍼(Object-Relational mapper)</code>가 있다.</p>

<p>SQL맵퍼에 대표적으로 `mybatis가 있고, 객체 관계 맵퍼에는 Hibernate와 TopLink가 있다.</p>

<p>객체관계맵퍼는 프레임워크에서 제공하는 API와 전용 객체 질의어를 사용하여 데이터를 다룬다. 그래서 이를 사용할려면 데이터베이스의 정규화가 잘돼 있어야 한다. 그래야만 테이블을 객체와 연결하기 쉽고, 객체를 통해 테이블의 데이터를 다루기가 쉽다. 근데, 유지보수 단계에 들어가면 잦은 기는 변경과 추가로 데이터베이스구조가 흐트러지게 되어 실무에서는 잘 사용하지 않는다.</p>

<p>mybatis의 핵심은 개발과 유지보수가 쉽도록 소스코드에 박혀있는 SQL을 별도의 파일로 분리하는 것이다. 또 단순하고 반복적인 JDBC코드를 캡슐화하여 데이터베이스 프로그래밍을 간결하게 하는것이다.</p>

<p>라이브러리 파일은 <a href="http://github.com/mybatis">http://github.com/mybatis</a>에서 <code class="highlighter-rouge">mybatis-3</code>로 가서 다운 받는다.</p>

<p><br /></p>

<h1 id="mybatis-">2. mybatis 구동하기</h1>

<h3 id="mybatis-----">mybatis를 이용한 프로젝트 목록 가져오기 시나리오</h3>

<ol>
  <li>MySqlProjectDao는 SqlSessionFactory에게 SQL을 실행할 객체를 요구한다.</li>
  <li>SqlSessionFactory는 SqlSession 객체를 생성하여 반환한다.</li>
  <li>MySqlProjectDao는 SqlSession객체에게 SQL 실행을 요청한다.</li>
  <li>SqlSession객체는 SQL이 저장된 맵퍼 파일에서 SQL을 찾는다.</li>
  <li>SqlSession은 JDBC드라이버를 통해 데이터베이스에 질의를 실행한다.</li>
  <li>SqlSession은 데이터베이스로부터 가져온 데이터로 Project목록을 생성하여 반환한다.</li>
  <li>MySqlProjectDao는 사용이 끝난 SqlSession을 닫는다.
<br /></li>
</ol>

<h3 id="mybatis---">mybatis 프레임워크의 핵심 컴포넌트</h3>

<table>
  <thead>
    <tr>
      <th>컴포넌트</th>
      <th>설명</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>SqlSession</td>
      <td>실제 SQL을 실행하는 객체. 이 객체는 SQL을 처리하기 위해 JDBC 드라이버를 사용함</td>
    </tr>
    <tr>
      <td>SqlSessionFactory</td>
      <td>SqlSession 객체를 생성함</td>
    </tr>
    <tr>
      <td>SqlSessionFactoryBuilder</td>
      <td>mysql설정 파일의 내용을 토대로 SqlSessionFactory를 생성함.</td>
    </tr>
    <tr>
      <td>mybatis설정파일</td>
      <td>데이터베이스 연결정보, 트갠잭션정보,  mybatis제어 정보 등의 설정 내용을 포함하고 있음. SqlSessionFactory를 만들 때 사용됨.</td>
    </tr>
    <tr>
      <td>SQL 맵퍼 파일</td>
      <td>SQL문을 담고 있는 파일. SqlSession객체가 참조함.</td>
    </tr>
  </tbody>
</table>

<p><br /></p>

<h3 id="sqlsession--">SqlSession의 주요 메서드</h3>

<table>
  <thead>
    <tr>
      <th>메서드</th>
      <th>설명</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>selectList()</td>
      <td>SELECT문을 실행. 값객체(Value Object) 목록을 반환함</td>
    </tr>
    <tr>
      <td>selectOne()</td>
      <td>SELECT문을 실행. 하나의 값 객체를 반환함</td>
    </tr>
    <tr>
      <td>insert()</td>
      <td>INSERT문을 실행. 반환값은 입력 데이터 개수.</td>
    </tr>
    <tr>
      <td>update()</td>
      <td>UPDATE문을 실행. 반환값은 변경한 데이터 개수.</td>
    </tr>
    <tr>
      <td>delete()</td>
      <td>DELETE문을 실행. 반환값은 삭제한 데이터 개수.</td>
    </tr>
  </tbody>
</table>

<p><br /></p>

<p><strong>예&gt;</strong></p>

<div class="language-java highlighter-rouge"><pre class="highlight"><code><span class="nd">@Component</span><span class="o">(</span><span class="s">"projectDao"</span><span class="o">)</span>
<span class="kd">public</span> <span class="kd">class</span> <span class="nc">MySqlProjectDao</span> <span class="kd">implements</span> <span class="n">ProjectDao</span> <span class="o">{</span>
  <span class="n">SqlSessionFactory</span> <span class="n">sqlSessionFactory</span><span class="o">;</span>

  <span class="kd">public</span> <span class="kt">void</span> <span class="nf">setSqlSessionFactory</span><span class="o">(</span><span class="n">SqlSessionFactory</span> <span class="n">sqlSessionFactory</span><span class="o">)</span> <span class="o">{</span>
    <span class="k">this</span><span class="o">.</span><span class="na">sqlSessionFactory</span> <span class="o">=</span> <span class="n">sqlSessionFactory</span><span class="o">;</span>
  <span class="o">}</span>

  <span class="kd">public</span> <span class="n">List</span><span class="o">&lt;</span><span class="n">Project</span><span class="o">&gt;</span> <span class="nf">selectList</span><span class="o">(</span><span class="n">HashMap</span><span class="o">&lt;</span><span class="n">String</span><span class="o">,</span><span class="n">Object</span><span class="o">&gt;</span> <span class="n">paramMap</span><span class="o">)</span> 
  		<span class="kd">throws</span> <span class="n">Exception</span> <span class="o">{</span>
    <span class="n">SqlSession</span> <span class="n">sqlSession</span> <span class="o">=</span> <span class="n">sqlSessionFactory</span><span class="o">.</span><span class="na">openSession</span><span class="o">();</span>
    <span class="k">try</span> <span class="o">{</span>
      <span class="k">return</span> <span class="n">sqlSession</span><span class="o">.</span><span class="na">selectList</span><span class="o">(</span><span class="s">"spms.dao.ProjectDao.selectList"</span><span class="o">,</span> <span class="n">paramMap</span><span class="o">);</span>
    <span class="o">}</span> <span class="k">finally</span> <span class="o">{</span>
      <span class="n">sqlSession</span><span class="o">.</span><span class="na">close</span><span class="o">();</span>
    <span class="o">}</span>
  <span class="o">}</span>

  <span class="kd">public</span> <span class="kt">int</span> <span class="nf">insert</span><span class="o">(</span><span class="n">Project</span> <span class="n">project</span><span class="o">)</span> <span class="kd">throws</span> <span class="n">Exception</span>  <span class="o">{</span>
    <span class="n">SqlSession</span> <span class="n">sqlSession</span> <span class="o">=</span> <span class="n">sqlSessionFactory</span><span class="o">.</span><span class="na">openSession</span><span class="o">();</span>
    <span class="k">try</span> <span class="o">{</span>
      <span class="kt">int</span> <span class="n">count</span> <span class="o">=</span> <span class="n">sqlSession</span><span class="o">.</span><span class="na">insert</span><span class="o">(</span><span class="s">"spms.dao.ProjectDao.insert"</span><span class="o">,</span> <span class="n">project</span><span class="o">);</span>
      <span class="n">sqlSession</span><span class="o">.</span><span class="na">commit</span><span class="o">();</span>
      <span class="k">return</span> <span class="n">count</span><span class="o">;</span>
    <span class="o">}</span> <span class="k">finally</span> <span class="o">{</span>
      <span class="n">sqlSession</span><span class="o">.</span><span class="na">close</span><span class="o">();</span>
    <span class="o">}</span>
  <span class="o">}</span>
  
  <span class="kd">public</span> <span class="n">Project</span> <span class="nf">selectOne</span><span class="o">(</span><span class="kt">int</span> <span class="n">no</span><span class="o">)</span> <span class="kd">throws</span> <span class="n">Exception</span> <span class="o">{</span> 
    <span class="n">SqlSession</span> <span class="n">sqlSession</span> <span class="o">=</span> <span class="n">sqlSessionFactory</span><span class="o">.</span><span class="na">openSession</span><span class="o">();</span>
    <span class="k">try</span> <span class="o">{</span>
      <span class="k">return</span> <span class="n">sqlSession</span><span class="o">.</span><span class="na">selectOne</span><span class="o">(</span><span class="s">"spms.dao.ProjectDao.selectOne"</span><span class="o">,</span> <span class="n">no</span><span class="o">);</span>
    <span class="o">}</span> <span class="k">finally</span> <span class="o">{</span>
      <span class="n">sqlSession</span><span class="o">.</span><span class="na">close</span><span class="o">();</span>
    <span class="o">}</span>
  <span class="o">}</span>
  <span class="o">....</span>
  
</code></pre>
</div>

<div class="language-xml highlighter-rouge"><pre class="highlight"><code>//MySqlProjectDao.xml -&gt; 맵퍼파일
<span class="cp">&lt;?xml version="1.0" encoding="UTF-8"?&gt;</span>
<span class="cp">&lt;!DOCTYPE mapper
  PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
  "http://mybatis.org/dtd/mybatis-3-mapper.dtd"&gt;</span>
<span class="nt">&lt;mapper</span> <span class="na">namespace=</span><span class="s">"spms.dao.ProjectDao"</span><span class="nt">&gt;</span>
  <span class="nt">&lt;resultMap</span> <span class="na">type=</span><span class="s">"project"</span> <span class="na">id=</span><span class="s">"projectResultMap"</span><span class="nt">&gt;</span>
    <span class="nt">&lt;id</span> <span class="na">column=</span><span class="s">"PNO"</span> <span class="na">property=</span><span class="s">"no"</span><span class="nt">/&gt;</span>
    <span class="nt">&lt;result</span> <span class="na">column=</span><span class="s">"PNAME"</span>    <span class="na">property=</span><span class="s">"title"</span><span class="nt">/&gt;</span>
    <span class="nt">&lt;result</span> <span class="na">column=</span><span class="s">"CONTENT"</span>  <span class="na">property=</span><span class="s">"content"</span><span class="nt">/&gt;</span>
    <span class="nt">&lt;result</span> <span class="na">column=</span><span class="s">"STA_DATE"</span> <span class="na">property=</span><span class="s">"startDate"</span> <span class="na">javaType=</span><span class="s">"java.sql.Date"</span><span class="nt">/&gt;</span>
    <span class="nt">&lt;result</span> <span class="na">column=</span><span class="s">"END_DATE"</span> <span class="na">property=</span><span class="s">"endDate"</span> <span class="na">javaType=</span><span class="s">"java.sql.Date"</span><span class="nt">/&gt;</span>
    <span class="nt">&lt;result</span> <span class="na">column=</span><span class="s">"STATE"</span>    <span class="na">property=</span><span class="s">"state"</span><span class="nt">/&gt;</span>
    <span class="nt">&lt;result</span> <span class="na">column=</span><span class="s">"CRE_DATE"</span> <span class="na">property=</span><span class="s">"createdDate"</span> <span class="na">javaType=</span><span class="s">"java.sql.Date"</span><span class="nt">/&gt;</span>
    <span class="nt">&lt;result</span> <span class="na">column=</span><span class="s">"TAGS"</span>     <span class="na">property=</span><span class="s">"tags"</span><span class="nt">/&gt;</span>
  <span class="nt">&lt;/resultMap&gt;</span>
  
  <span class="nt">&lt;select</span> <span class="na">id=</span><span class="s">"selectList"</span> <span class="na">parameterType=</span><span class="s">"map"</span> <span class="na">resultMap=</span><span class="s">"projectResultMap"</span><span class="nt">&gt;</span>
    select PNO, PNAME, STA_DATE, END_DATE, STATE
    from PROJECTS
    order by
    <span class="nt">&lt;choose&gt;</span> 
        <span class="nt">&lt;when</span> <span class="na">test=</span><span class="s">"orderCond == 'TITLE_ASC'"</span><span class="nt">&gt;</span>PNAME asc<span class="nt">&lt;/when&gt;</span>
        <span class="nt">&lt;when</span> <span class="na">test=</span><span class="s">"orderCond == 'TITLE_DESC'"</span><span class="nt">&gt;</span>PNAME desc<span class="nt">&lt;/when&gt;</span>
        <span class="nt">&lt;when</span> <span class="na">test=</span><span class="s">"orderCond == 'STARTDATE_ASC'"</span><span class="nt">&gt;</span>STA_DATE asc<span class="nt">&lt;/when&gt;</span>
        <span class="nt">&lt;when</span> <span class="na">test=</span><span class="s">"orderCond == 'STARTDATE_DESC'"</span><span class="nt">&gt;</span>STA_DATE desc<span class="nt">&lt;/when&gt;</span>
        <span class="nt">&lt;when</span> <span class="na">test=</span><span class="s">"orderCond == 'ENDDATE_ASC'"</span><span class="nt">&gt;</span>END_DATE asc<span class="nt">&lt;/when&gt;</span>
        <span class="nt">&lt;when</span> <span class="na">test=</span><span class="s">"orderCond == 'ENDDATE_DESC'"</span><span class="nt">&gt;</span>END_DATE desc<span class="nt">&lt;/when&gt;</span>
        <span class="nt">&lt;when</span> <span class="na">test=</span><span class="s">"orderCond == 'STATE_ASC'"</span><span class="nt">&gt;</span>STATE asc<span class="nt">&lt;/when&gt;</span>
        <span class="nt">&lt;when</span> <span class="na">test=</span><span class="s">"orderCond == 'STATE_DESC'"</span><span class="nt">&gt;</span>STATE desc<span class="nt">&lt;/when&gt;</span>
        <span class="nt">&lt;when</span> <span class="na">test=</span><span class="s">"orderCond == 'PNO_ASC'"</span><span class="nt">&gt;</span>PNO asc<span class="nt">&lt;/when&gt;</span>
        <span class="nt">&lt;otherwise&gt;</span>PNO desc<span class="nt">&lt;/otherwise&gt;</span>
    <span class="nt">&lt;/choose&gt;</span>
  <span class="nt">&lt;/select&gt;</span>
  
  <span class="nt">&lt;insert</span> <span class="na">id=</span><span class="s">"insert"</span> <span class="na">parameterType=</span><span class="s">"project"</span><span class="nt">&gt;</span>
    insert into PROJECTS(PNAME,CONTENT,STA_DATE,END_DATE,STATE,CRE_DATE,TAGS)
    values (#{title},#{content},#{startDate},#{endDate},0,now(),#{tags})
  <span class="nt">&lt;/insert&gt;</span>
  
  <span class="nt">&lt;select</span> <span class="na">id=</span><span class="s">"selectOne"</span> <span class="na">parameterType=</span><span class="s">"int"</span> <span class="na">resultMap=</span><span class="s">"projectResultMap"</span><span class="nt">&gt;</span>
    select PNO, PNAME, CONTENT, STA_DATE, END_DATE, STATE, CRE_DATE, TAGS
    from PROJECTS 
    where PNO=#{value}
  <span class="nt">&lt;/select&gt;</span>
  
  ...
  
</code></pre>
</div>

<div class="language-java highlighter-rouge"><pre class="highlight"><code><span class="kn">package</span> <span class="n">spms</span><span class="o">.</span><span class="na">listeners</span><span class="o">;</span>

<span class="c1">// SqlSessionFactory 객체 준비</span>
<span class="nd">@WebListener</span>
<span class="kd">public</span> <span class="kd">class</span> <span class="nc">ContextLoaderListener</span> <span class="kd">implements</span> <span class="n">ServletContextListener</span> <span class="o">{</span>
  <span class="kd">static</span> <span class="n">ApplicationContext</span> <span class="n">applicationContext</span><span class="o">;</span>
  
  <span class="kd">public</span> <span class="kd">static</span> <span class="n">ApplicationContext</span> <span class="nf">getApplicationContext</span><span class="o">()</span> <span class="o">{</span>
    <span class="k">return</span> <span class="n">applicationContext</span><span class="o">;</span>
  <span class="o">}</span>
   
  <span class="nd">@Override</span>
  <span class="kd">public</span> <span class="kt">void</span> <span class="nf">contextInitialized</span><span class="o">(</span><span class="n">ServletContextEvent</span> <span class="n">event</span><span class="o">)</span> <span class="o">{</span>
    <span class="k">try</span> <span class="o">{</span>
      <span class="n">applicationContext</span> <span class="o">=</span> <span class="k">new</span> <span class="n">ApplicationContext</span><span class="o">();</span>
      
      <span class="n">String</span> <span class="n">resource</span> <span class="o">=</span> <span class="s">"spms/dao/mybatis-config.xml"</span><span class="o">;</span>
      <span class="n">InputStream</span> <span class="n">inputStream</span> <span class="o">=</span> <span class="n">Resources</span><span class="o">.</span><span class="na">getResourceAsStream</span><span class="o">(</span><span class="n">resource</span><span class="o">);</span>
      <span class="n">SqlSessionFactory</span> <span class="n">sqlSessionFactory</span> <span class="o">=</span> 
          <span class="k">new</span> <span class="nf">SqlSessionFactoryBuilder</span><span class="o">().</span><span class="na">build</span><span class="o">(</span><span class="n">inputStream</span><span class="o">);</span>	
      <span class="c1">//SqlSessionFactory객체를 mybatis설정파일(설계도)를 통해 빌드 시킴</span>
      <span class="c1">//이런식의 객체 생성 패턴을 빌더 패턴(Builder Pattern)이라고 한다.</span>
      
      <span class="n">applicationContext</span><span class="o">.</span><span class="na">addBean</span><span class="o">(</span><span class="s">"sqlSessionFactory"</span><span class="o">,</span> <span class="n">sqlSessionFactory</span><span class="o">);</span>
      
      <span class="n">ServletContext</span> <span class="n">sc</span> <span class="o">=</span> <span class="n">event</span><span class="o">.</span><span class="na">getServletContext</span><span class="o">();</span>
      <span class="n">String</span> <span class="n">propertiesPath</span> <span class="o">=</span> <span class="n">sc</span><span class="o">.</span><span class="na">getRealPath</span><span class="o">(</span>
          <span class="n">sc</span><span class="o">.</span><span class="na">getInitParameter</span><span class="o">(</span><span class="s">"contextConfigLocation"</span><span class="o">));</span>
      
      <span class="n">applicationContext</span><span class="o">.</span><span class="na">prepareObjectsByProperties</span><span class="o">(</span><span class="n">propertiesPath</span><span class="o">);</span>
      
      <span class="n">applicationContext</span><span class="o">.</span><span class="na">prepareObjectsByAnnotation</span><span class="o">(</span><span class="s">""</span><span class="o">);</span>
      
      <span class="n">applicationContext</span><span class="o">.</span><span class="na">injectDependency</span><span class="o">();</span>
      
    <span class="o">}</span> <span class="k">catch</span><span class="o">(</span><span class="n">Throwable</span> <span class="n">e</span><span class="o">)</span> <span class="o">{</span>
      <span class="n">e</span><span class="o">.</span><span class="na">printStackTrace</span><span class="o">();</span>
    <span class="o">}</span>
  <span class="o">}</span>
  
  <span class="nd">@Override</span>
  <span class="kd">public</span> <span class="kt">void</span> <span class="nf">contextDestroyed</span><span class="o">(</span><span class="n">ServletContextEvent</span> <span class="n">event</span><span class="o">)</span> <span class="o">{}</span>
<span class="o">}</span>
</code></pre>
</div>

<div class="language-xml highlighter-rouge"><pre class="highlight"><code>//mybatis 설정파일
<span class="cp">&lt;?xml version="1.0" encoding="UTF-8"?&gt;</span>
<span class="cp">&lt;!DOCTYPE configuration
  PUBLIC "-//mybatis.org//DTD Config 3.0//EN"
  "http://mybatis.org/dtd/mybatis-3-config.dtd"&gt;</span>
<span class="nt">&lt;configuration&gt;</span>
  <span class="nt">&lt;settings&gt;</span>
    <span class="nt">&lt;setting</span> <span class="na">name=</span><span class="s">"logImpl"</span> <span class="na">value=</span><span class="s">"LOG4J"</span><span class="nt">/&gt;</span>
  <span class="nt">&lt;/settings&gt;</span>
      
  <span class="nt">&lt;typeAliases&gt;</span>
    <span class="nt">&lt;typeAlias</span> <span class="na">type=</span><span class="s">"spms.vo.Project"</span> <span class="na">alias=</span><span class="s">"project"</span><span class="nt">/&gt;</span>
    <span class="nt">&lt;typeAlias</span> <span class="na">type=</span><span class="s">"spms.vo.Member"</span> <span class="na">alias=</span><span class="s">"member"</span><span class="nt">/&gt;</span>
  <span class="nt">&lt;/typeAliases&gt;</span>
  
  <span class="nt">&lt;environments</span> <span class="na">default=</span><span class="s">"development"</span><span class="nt">&gt;</span>
    <span class="nt">&lt;environment</span> <span class="na">id=</span><span class="s">"development"</span><span class="nt">&gt;</span>
      <span class="nt">&lt;transactionManager</span> <span class="na">type=</span><span class="s">"JDBC"</span><span class="nt">/&gt;</span>
      <span class="nt">&lt;dataSource</span> <span class="na">type=</span><span class="s">"JNDI"</span><span class="nt">&gt;</span>
        <span class="nt">&lt;property</span> <span class="na">name=</span><span class="s">"data_source"</span> <span class="na">value=</span><span class="s">"java:comp/env/jdbc/studydb"</span><span class="nt">/&gt;</span>
      <span class="nt">&lt;/dataSource&gt;</span>
    <span class="nt">&lt;/environment&gt;</span>
  <span class="nt">&lt;/environments&gt;</span>
  
  <span class="nt">&lt;mappers&gt;</span>
    <span class="nt">&lt;mapper</span> <span class="na">resource=</span><span class="s">"spms/dao/MySqlProjectDao.xml"</span><span class="nt">/&gt;</span>
    <span class="nt">&lt;mapper</span> <span class="na">resource=</span><span class="s">"spms/dao/MySqlMemberDao.xml"</span><span class="nt">/&gt;</span>
  <span class="nt">&lt;/mappers&gt;</span>
<span class="nt">&lt;/configuration&gt;</span>
</code></pre>
</div>

<p><br /></p>

<h5 id="commit-rollback">commit()과 rollback()메서드</h5>

<p>DBMS는 INSERT, UPDATE, DELETE문을 실행하면 그 작업 결과를 임시 데이터베이스에 보관한다. 클라이언트 요청이 있어야만 임시 데이터베이스의 작업물을 운영 데이터베이스에 반영한다.</p>

<p><code class="highlighter-rouge">commit()</code>은 임시 데이터베이스에 보관된 작업 결과를 운영 데이터베이스에 적용하라고 요청할 때 사용하는 메서드이다.</p>

<p><code class="highlighter-rouge">rollback()</code>은 임시 데이터베이스의 작업 결과를 운영 데이터베이스에 반영하지 않고 취소할 때 호출한다.</p>

<h3 id="sql-">SQL맵퍼 파일</h3>

<p><strong>DTD선언</strong></p>

<div class="language-xml highlighter-rouge"><pre class="highlight"><code><span class="cp">&lt;?xml version="1.0" encoding="UTF-8"?&gt;</span>
<span class="cp">&lt;!DOCTYPE mapper
  PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
  "http://mybatis.org/dtd/mybatis-3-mapper.dtd"&gt;</span>
</code></pre>
</div>

<h4 id="mapper--"><code class="highlighter-rouge">&lt;mapper&gt;</code> 루트 엘리먼트</h4>

<p>SQL 맵퍼 파일은 루트 엘리먼트 <code class="highlighter-rouge">&lt;mapper&gt;</code>를 작성하는 것으로 시작한다. <code class="highlighter-rouge">namespace</code>속성은 자바의 패키지처럼 SQL문을 묶는 용도로 사용한다.</p>

<div class="language-xml highlighter-rouge"><pre class="highlight"><code><span class="nt">&lt;mapper</span> <span class="na">namespace =</span><span class="s">"spms.dao.ProjectDao"</span><span class="nt">&gt;</span>

...

<span class="nt">&lt;/mapper&gt;</span>
</code></pre>
</div>

<h4 id="select-insert-update-delete-"><code class="highlighter-rouge">&lt;select&gt;</code>, <code class="highlighter-rouge">&lt;insert&gt;</code>, <code class="highlighter-rouge">&lt;update&gt;</code>, <code class="highlighter-rouge">&lt;delete&gt;</code> 엘리먼트</h4>

<p>SQL문을 작성할 때 명령어에 맞는 태그를 사용한다.</p>

<p><strong>id속성</strong> -&gt; SQL문을 작성할때 각각의 SQL문을 구분하기 위해 id 속성을 사용한다.</p>

<p><strong>resultType속성</strong> -&gt; select문을 실행하면 결과가 생성되는데, 이 결과를 담을 객체를 지정하는 속성이 resultType속성이다. 값으로는 클래스 이름(패키지 이름 포함)이 온다.</p>

<div class="highlighter-rouge"><pre class="highlight"><code>&lt;select id="selectList" resultType="spms.vo.Project"&gt;
</code></pre>
</div>

<p>만약 mybatis 설정 파일에 다음과 같이 spms.vo.Project에 대한 별명이 정의 되여 있다면 resultType의 값으로 그 별명을 사용할 수 있다.</p>

<div class="language-xml highlighter-rouge"><pre class="highlight"><code>//mybatis설정 파일의 일부분
  <span class="nt">&lt;typeAliases&gt;</span>
    <span class="nt">&lt;typeAlias</span> <span class="na">type=</span><span class="s">"spms.vo.Project"</span> <span class="na">alias=</span><span class="s">"project"</span><span class="nt">/&gt;</span>
    <span class="nt">&lt;typeAlias</span> <span class="na">type=</span><span class="s">"spms.vo.Member"</span> <span class="na">alias=</span><span class="s">"member"</span><span class="nt">/&gt;</span>
  <span class="nt">&lt;/typeAliases&gt;</span>
</code></pre>
</div>

<div class="highlighter-rouge"><pre class="highlight"><code>&lt;select id="selectList" resultType="project"&gt;
</code></pre>
</div>

<p><br /></p>

<p>위 방법에 약간의 번거러움이 있다. mybatis는 SELECT 결과를 저장하고자 resultTpye에 선언된 클래스의 인스턴스를 생성한다. 그리고 각 칼럼에 대응하는 값객체의 셋터 메서드를 찾아서 호출한다. 이때 셋터메서드는 대소문자 구분없이 set을 뺀 메서드의 이름이과 칼럼의 이름이 같아야지만 인스턴스가 생성된다.</p>

<p>만약 칼럼의 이름과 일치하는 셋터가 없다면, 해당 칼럼의 값은 인스턴스에 저장되지 않는다.
이런 점이 매우 번거럽다. 이를 해결하기 위해 다음 엘리먼트를 사용한다.</p>

<p><br /></p>

<h4 id="resultmap-"><code class="highlighter-rouge">&lt;resultMap&gt;</code> 엘리먼트</h4>

<p>다음과 같이 <code class="highlighter-rouge">&lt;resultMap&gt;</code>태그에 칼럼과 연결될 값객체의 셋터 메서드를 정의한다.</p>

<div class="language-xml highlighter-rouge"><pre class="highlight"><code>  <span class="nt">&lt;resultMap</span> <span class="na">type=</span><span class="s">"project"</span> <span class="na">id=</span><span class="s">"projectResultMap"</span><span class="nt">&gt;</span>
    <span class="nt">&lt;id</span> <span class="na">column=</span><span class="s">"PNO"</span> <span class="na">property=</span><span class="s">"no"</span><span class="nt">/&gt;</span>
    <span class="nt">&lt;result</span> <span class="na">column=</span><span class="s">"PNAME"</span>    <span class="na">property=</span><span class="s">"title"</span><span class="nt">/&gt;</span>
    <span class="nt">&lt;result</span> <span class="na">column=</span><span class="s">"CONTENT"</span>  <span class="na">property=</span><span class="s">"content"</span><span class="nt">/&gt;</span>
    <span class="nt">&lt;result</span> <span class="na">column=</span><span class="s">"STA_DATE"</span> <span class="na">property=</span><span class="s">"startDate"</span> <span class="na">javaType=</span><span class="s">"java.sql.Date"</span><span class="nt">/&gt;</span>
    <span class="nt">&lt;result</span> <span class="na">column=</span><span class="s">"END_DATE"</span> <span class="na">property=</span><span class="s">"endDate"</span> <span class="na">javaType=</span><span class="s">"java.sql.Date"</span><span class="nt">/&gt;</span>
    <span class="nt">&lt;result</span> <span class="na">column=</span><span class="s">"STATE"</span>    <span class="na">property=</span><span class="s">"state"</span><span class="nt">/&gt;</span>
    <span class="nt">&lt;result</span> <span class="na">column=</span><span class="s">"CRE_DATE"</span> <span class="na">property=</span><span class="s">"createdDate"</span> <span class="na">javaType=</span><span class="s">"java.sql.Date"</span><span class="nt">/&gt;</span>
    <span class="nt">&lt;result</span> <span class="na">column=</span><span class="s">"TAGS"</span>     <span class="na">property=</span><span class="s">"tags"</span><span class="nt">/&gt;</span>
  <span class="nt">&lt;/resultMap&gt;</span>
</code></pre>
</div>

<p>`<resultMap>태그의 type 값은 칼럼 데이터를 저장할 클래스 이름 또는 클래스의 별명이다. 클래스에 대한 별명은 mybatis설정파일에 정의 했다. 앞의 소스에서는 type 값을 project라고 하였는데, spms.vo.Project 클래스를 가리키는 별명이다.</resultMap></p>

<blockquote>
  <p><strong><code class="highlighter-rouge">&lt;result&gt;</code> 엘리먼트</strong></p>

  <p><code class="highlighter-rouge">&lt;resultMap&gt;</code> 태그의 자식 태그로서 칼럼과 셋터 메서드의 연결을 정의한다. column 속성에는 칼럼 이름을 지정하고, property 속성에는 객체의 프로퍼티 이름을 지정한다.</p>
  <blockquote>
    <div class="highlighter-rouge"><pre class="highlight"><code>&lt;result column="PNAME" property="title"/&gt;
</code></pre>
    </div>
    <p><code class="highlighter-rouge">&lt;result&gt;</code>태그를 사용하여 PNAME 칼럼 값을 setTitle()메서드와 연결시킨것을 보았다.</p>
  </blockquote>
</blockquote>

<p><br /></p>

<blockquote>
  <p><strong>javaType속성</strong></p>

  <p><code class="highlighter-rouge">&lt;result&gt;</code>에서 javaType을 사용하면, 칼럼의 값을 특정 자바 객체로 변환할 수 있다. 다음과 같이 STA_DATE 칼럼에 대해 javaType을 java.sql.Date으로 설정하면, 칼럼 값을 꺼낼 때 그 객체로 변환된다.</p>
</blockquote>

<p><br /></p>

<blockquote>
  <p><strong><code class="highlighter-rouge">&lt;id&gt;</code> 엘리먼트</strong></p>

  <p><code class="highlighter-rouge">&lt;id&gt;</code>태그는 <code class="highlighter-rouge">&lt;result&gt;</code>태그와 작성법이 같다. 다만 <code class="highlighter-rouge">&lt;id&gt;</code>태그에서 지정한 프로퍼티는 객체 식별자로 사용된다. SELECT문을 실행하면 레코드 값을 저장하기 위해 결과 객체가 생성되는데, SELECT문을 실행할 때마다 매번 결과 객체를 생성한다면 실행 성능이 나빠진다. 이를 해결하기위해 SELECT를 통해 생성된 결과 객체들은 별도의 보관소에 저장(캐싱, chaching)해두고 재사용한다. 이때 보관소에 저장된 객체를 구분하는 값으로 <code class="highlighter-rouge">&lt;id&gt;</code>에서 지정한 프로퍼티를 사용한다.</p>
</blockquote>

<h4 id="sql---">SQL문의 입력 매개변수 처리</h4>

<p>mybatis에서는 입력 매개벼수를 <code class="highlighter-rouge">#{프로퍼티명}</code>으로 표시한다.</p>

<div class="language-xml highlighter-rouge"><pre class="highlight"><code><span class="nt">&lt;insert</span> <span class="na">id=</span><span class="s">"insert"</span> <span class="na">parameterType=</span><span class="s">"project"</span><span class="nt">&gt;</span>
    insert into PROJECTS(PNAME,CONTENT,STA_DATE,END_DATE,STATE,CRE_DATE,TAGS)
    values (#{title},#{content},#{startDate},#{endDate},0,now(),#{tags})
  <span class="nt">&lt;/insert&gt;</span>
</code></pre>
</div>

<p><br /></p>

<p><code class="highlighter-rouge">#{프로퍼티명}</code>이 가리키는 값은 <code class="highlighter-rouge">&lt;insert&gt;</code>의 paramerType에 지정한 객체의 프로퍼티 값(겟터 메서드의 반환값)이다. 즉 #{title} 자리에는 Project객체의 getTitle() 반환값이 놓인다.</p>

<p><br /></p>

<h4 id="section">입력매개변수에 값 공급</h4>

<div class="language-java highlighter-rouge"><pre class="highlight"><code><span class="kd">public</span> <span class="kt">int</span> <span class="nf">insert</span><span class="o">(</span><span class="n">Project</span> <span class="n">project</span><span class="o">)</span> <span class="kd">throws</span> <span class="n">Exception</span>  <span class="o">{</span>
    <span class="n">SqlSession</span> <span class="n">sqlSession</span> <span class="o">=</span> <span class="n">sqlSessionFactory</span><span class="o">.</span><span class="na">openSession</span><span class="o">();</span>
    <span class="k">try</span> <span class="o">{</span>
      <span class="kt">int</span> <span class="n">count</span> <span class="o">=</span> <span class="n">sqlSession</span><span class="o">.</span><span class="na">insert</span><span class="o">(</span><span class="s">"spms.dao.ProjectDao.insert"</span><span class="o">,</span> <span class="n">project</span><span class="o">);</span>
      <span class="n">sqlSession</span><span class="o">.</span><span class="na">commit</span><span class="o">();</span>
      <span class="k">return</span> <span class="n">count</span><span class="o">;</span>
    <span class="o">}</span> <span class="k">finally</span> <span class="o">{</span>
      <span class="n">sqlSession</span><span class="o">.</span><span class="na">close</span><span class="o">();</span>
    <span class="o">}</span>
  <span class="o">}</span>
</code></pre>
</div>

<p><code class="highlighter-rouge">sqlSession.insert()</code>를 호출하면 SQL 맵퍼 파일에서 <code class="highlighter-rouge">spms.dao.ProjectDao.insert</code>아이디를가진 SQL문을 찾아 실행한다. 물론 <code class="highlighter-rouge">spms.dao.ProjectDao</code>는 SQL 맵퍼 파일의 네임스페이스 이름을 가리키고 insert는 SQL 아이드를 가리킨다. project는 INSERT문을 실행할 때 입력 매개변수에 값을 공급할 객체이다.</p>

<p>만약 다음과 같이 공급하는 객체가 기본 타입 객체(랩퍼클래스,wrapper class)인 경우, 자바는 해당 타입에 대응하는 랩퍼 객체를 생성하여 자동포장 한다.</p>

<div class="language-java highlighter-rouge"><pre class="highlight"><code>  <span class="kd">public</span> <span class="kt">int</span> <span class="nf">delete</span><span class="o">(</span><span class="kt">int</span> <span class="n">no</span><span class="o">)</span> <span class="kd">throws</span> <span class="n">Exception</span> <span class="o">{</span>  
    <span class="n">SqlSession</span> <span class="n">sqlSession</span> <span class="o">=</span> <span class="n">sqlSessionFactory</span><span class="o">.</span><span class="na">openSession</span><span class="o">();</span>
    <span class="k">try</span> <span class="o">{</span>
      <span class="kt">int</span> <span class="n">count</span> <span class="o">=</span> <span class="n">sqlSession</span><span class="o">.</span><span class="na">delete</span><span class="o">(</span><span class="s">"spms.dao.ProjectDao.delete"</span><span class="o">,</span> <span class="n">no</span><span class="o">);</span>
      <span class="n">sqlSession</span><span class="o">.</span><span class="na">commit</span><span class="o">();</span>
      <span class="k">return</span> <span class="n">count</span><span class="o">;</span>
    <span class="o">}</span> <span class="k">finally</span> <span class="o">{</span>
      <span class="n">sqlSession</span><span class="o">.</span><span class="na">close</span><span class="o">();</span>
    <span class="o">}</span>
  <span class="o">}</span>
</code></pre>
</div>

<p>즉 컴파일 할때 다음과 같이 변한다.</p>

<div class="language-java highlighter-rouge"><pre class="highlight"><code><span class="kt">int</span> <span class="n">count</span> <span class="o">=</span> <span class="n">sqlSEssion</span><span class="o">.</span><span class="na">delete</span><span class="o">(</span><span class="s">"spms.dao.ProjectDao.delete"</span><span class="o">,</span><span class="k">new</span> <span class="n">Integer</span><span class="o">(</span><span class="n">no</span><span class="o">));</span>
</code></pre>
</div>

<p><br /></p>

<h3 id="mybatis--">mybatis 설정 파일</h3>

<p><strong>DTD선언</strong></p>

<div class="language-xml highlighter-rouge"><pre class="highlight"><code><span class="cp">&lt;?xml version="1.0" encoding="UTF-8"?&gt;</span>
<span class="cp">&lt;!DOCTYPE configuration
  PUBLIC "-//mybatis.org//DTD Config 3.0//EN"
  "http://mybatis.org/dtd/mybatis-3-config.dtd"&gt;</span>
</code></pre>
</div>
<p><br /></p>

<h4 id="configuration--"><code class="highlighter-rouge">&lt;configuration&gt;</code> 루트 엘리먼트</h4>

<p><strong>configuration의 주요 자식 엘리먼트</strong></p>

<table>
  <thead>
    <tr>
      <th>엘리먼트</th>
      <th>용도</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>properties</td>
      <td>프로퍼티 파일이 있는 경로 설정. <property>를 사용하여 개별 프로퍼티 정의 가능</property></td>
    </tr>
    <tr>
      <td>settings</td>
      <td>프레임워크의 실행 환경을 설정</td>
    </tr>
    <tr>
      <td>typeAliases</td>
      <td>자바 클래스 이름(패키지 이름 포함)에 대한 별명 설저</td>
    </tr>
    <tr>
      <td>typeHandler</td>
      <td>칼럼의 값을 자바 객체로, 자바 객체를 칼럼의 값으로 변환해 주는 클래스를 설정</td>
    </tr>
    <tr>
      <td>environments</td>
      <td>프레임워크에서 사용할 데이터베이스 정보(트랜젝션 관리자, 데이터 소스)를 설정.</td>
    </tr>
    <tr>
      <td>mappers</td>
      <td>SQL맵퍼 파일들이 있는 경로 설정</td>
    </tr>
  </tbody>
</table>

<p><br /></p>

<blockquote>
  <p>mybatis는 기본 데이터 형(byte, short, int, long,float, double, boolean, char)이나 랩퍼클래스에 대해 미리 별명을 정의했다.</p>
</blockquote>

<h4 id="environments-"><code class="highlighter-rouge">&lt;environments&gt;</code> 엘리먼트</h4>

<p><code class="highlighter-rouge">&lt;environments&gt;</code>태그는 데이터베이스 환경 정보를 설정할 때 사용하는 태그이다. 이 태그를 이용하면 여러개의 데이터베이스 접속 정보를 설정할 수 있다. 설정된 DB정보 중에서 하나를 선택할 때는 default속성을 사용한다.</p>

<div class="language-xml highlighter-rouge"><pre class="highlight"><code><span class="nt">&lt;environments</span> <span class="na">defaul=</span><span class="s">"development"</span><span class="nt">&gt;</span>
	<span class="nt">&lt;environment</span> <span class="na">id=</span><span class="s">"development"</span><span class="nt">&gt;</span>...<span class="nt">&lt;/environment&gt;</span>
	<span class="nt">&lt;environment</span> <span class="na">id=</span><span class="s">"test"</span><span class="nt">&gt;</span>...<span class="nt">&lt;/environment&gt;</span>
	<span class="nt">&lt;environment</span> <span class="na">id=</span><span class="s">"real"</span><span class="nt">&gt;</span>...<span class="nt">&lt;/environment&gt;</span>
<span class="nt">&lt;/environments&gt;</span>
</code></pre>
</div>

<p>각각의 데이터베이스 접속 정보는 <code class="highlighter-rouge">&lt;environment&gt;</code>태그를 이용하여 정의 한다. id속성은 <code class="highlighter-rouge">&lt;environment&gt;</code>를 구분할 때 사용하는 식별자이다.</p>

<h4 id="environment-"><code class="highlighter-rouge">&lt;environment&gt;</code> 엘리먼트</h4>

<p><code class="highlighter-rouge">&lt;environment&gt;</code>는 트랜잭션 관리 및 데이터 소스를 설정하는 태그이다.</p>

<p><strong>트랜잭션 관리 방식 설정</strong></p>

<p>트랜잭션(Transaction)이란, 여러개의 데이터 변경작업을 하나의 작업으로 묶은 것이다.</p>

<table>
  <thead>
    <tr>
      <th>트랜잭션 관리 유형</th>
      <th>설명</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>JDBC</td>
      <td>직접 JDBC의 커밋, 롤백기능을 사용하여 mybatis 자체에서 트랜잭션을 관리</td>
    </tr>
    <tr>
      <td>MANAGED</td>
      <td>서버의 트랜잭션 관리 기능을 이용. 즉 Java EE애플리케이션 서버(JBoss, WebLogic, WebSphere등)나 서블릿 컨테이너(톰캣서버 등)에서 트랜잭션을 관리</td>
    </tr>
  </tbody>
</table>

<div class="language-xml highlighter-rouge"><pre class="highlight"><code><span class="nt">&lt;transactionManager</span> <span class="na">type=</span><span class="s">"JDBC"</span><span class="nt">&gt;</span>
</code></pre>
</div>

<p><br /></p>

<p><strong>데이터소스설정</strong></p>

<p>mybatis는 JDBC 표준 인터페이스인 javax.sql.DataSource구현체를 이용하여 DB 커넥션을 다룬다.</p>

<table>
  <thead>
    <tr>
      <th>데이터소스 유형</th>
      <th>설명</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>UNPOOLED</td>
      <td>DB커넥션을 요청할 때마다 매번 커넥션 객체를 생성한다. 높은 성능을 요구하지 않는 단순한 어플리케이션에 적합하다.</td>
    </tr>
    <tr>
      <td>POOLED</td>
      <td>미리 DB커넥션 객체를 생성해두고, 요청하면 즉시 반환한다. 데이터베이스에 연결하는 과정 즉 연결을 초기화하고 사용자를 인증하는 과정이 없기 때문에 속도가 빠르다.</td>
    </tr>
    <tr>
      <td>JNDI</td>
      <td>Java EE 어플리케이션 서버나 서블릿 컨테이너에서 제공하는 데이터 소스를 사용한다.</td>
    </tr>
  </tbody>
</table>

<div class="language-xml highlighter-rouge"><pre class="highlight"><code>//<span class="nt">&lt;properties&gt;</span>태그에서 설정된 파일을 참조해서 사용함

<span class="nt">&lt;dataSource</span> <span class="na">type=</span><span class="s">"POOLED"</span><span class="nt">&gt;</span>
	<span class="nt">&lt;property</span> <span class="na">name=</span><span class="s">"driver"</span> <span class="na">value=</span><span class="s">"${driver}"</span><span class="nt">/&gt;</span>
	<span class="nt">&lt;property</span> <span class="na">name=</span><span class="s">"url"</span> <span class="na">value=</span><span class="s">"${url}"</span><span class="nt">/&gt;</span>
	<span class="nt">&lt;property</span> <span class="na">name=</span><span class="s">"username"</span> <span class="na">value=</span><span class="s">"${username}"</span><span class="nt">/&gt;</span>
	<span class="nt">&lt;property</span> <span class="na">name=</span><span class="s">"password"</span> <span class="na">value=</span><span class="s">"${password}"</span><span class="nt">/&gt;</span>
<span class="nt">&lt;/dataSource&gt;</span>
</code></pre>
</div>

<div class="language-xml highlighter-rouge"><pre class="highlight"><code><span class="nt">&lt;dataSource</span> <span class="na">type=</span><span class="s">"JNDI"</span><span class="nt">&gt;</span>
	<span class="nt">&lt;property</span> <span class="na">name=</span><span class="s">"data_source"</span> <span class="na">value=</span><span class="s">"java:comp/env/jdbc/studydb"</span><span class="nt">/&gt;</span>
<span class="nt">&lt;/dataSource&gt;</span>
</code></pre>
</div>

<p><br /></p>

<h4 id="mappers-"><code class="highlighter-rouge">&lt;mappers&gt;</code> 엘리먼트</h4>

<p><code class="highlighter-rouge">&lt;mappers&gt;</code>태그는 SQL 맵퍼 파일들의 정보를 설정할 때 사용한다. 각각의 SQL 맵퍼 파일의 정보는 <code class="highlighter-rouge">&lt;mapper&gt;</code>태그로 정의한다.</p>

<p>SQL맵퍼 파일의 경로를 설정할 때, 두가지 방법이 있다. 자바 클래스 경로를 사용하는 방법과 운영체제의 파일 시스템 경로를 사용하는 방법이 있다.</p>

<div class="language-xml highlighter-rouge"><pre class="highlight"><code>//클래스 경로를 사용할 경우
<span class="nt">&lt;mappers&gt;</span>
    <span class="nt">&lt;mapper</span> <span class="na">resource=</span><span class="s">"spms/dao/MySqlProjectDao.xml"</span><span class="nt">/&gt;</span>
    <span class="nt">&lt;mapper</span> <span class="na">resource=</span><span class="s">"spms/dao/MySqlMemberDao.xml"</span><span class="nt">/&gt;</span>
<span class="nt">&lt;/mappers&gt;</span>
</code></pre>
</div>

<div class="language-xml highlighter-rouge"><pre class="highlight"><code>//파일 시스템 경로를 사용할 경우
<span class="nt">&lt;mappers&gt;</span>
	<span class="nt">&lt;mapper</span> <span class="na">url=</span><span class="s">"file:///c:/dao/MySqlProjectDao.xml"</span><span class="nt">/&gt;</span>
<span class="nt">&lt;/mappers&gt;</span>
</code></pre>
</div>

<p><br /></p>

<h3 id="reference">Reference</h3>
<ul>
  <li><a href="http://www.yes24.com/24/Goods/13159413?Acode=101">열혈강의 자바 웹 개발 워크북</a></li>
</ul>

                </div>
                <div class="read-all">
                    <a  href="/2016/09/18/mybatis/"><i class="fa fa-newspaper-o"></i>Read All</a>
                </div>
                <hr>
              </li>
            
              <li>
                <h2>
                  <a class="post-link" href="/2016/09/17/reflection_property/">리플렉션API와 프로퍼티를 이용한 객체관리</a>
                </h2>
                <div class="label">
                    <div class="label-card">
                        <i class="fa fa-calendar"></i>2016-09-17
                    </div>
                    <div class="label-card">
                        
                    </div>
                    <div class="label-card">
                        
                    </div>

                    <div class="label-card">
                    


<!-- <span class="point">•</span> -->
<span class="categories">
  <i class="fa fa-th-list"></i>
  
    
        <a href="/category/#web" title="Category: web" rel="category">web</a>
    
  

  <!-- <span class="point">•</span> -->
</span>


                    </div>

                </div>
                <div class="excerpt">
                    <h1 id="reflection-api">1. Reflection API</h1>

<p>리플렉션이란 객체를 통해 클래스의 정보를 분석해 내는 프로그램 기법을 말한다. 투영, 반사 라는 사전적인 의미를 지니고 있다.</p>

<p>자바는 스크립트 언어가 아닌 컴파일 언어이다. 물론 .java -&gt; .class -&gt; 실행이라는 2단계의 메커니즘을 가지고 있지만 컴파일 언어로 분리하는 게 옳다. 원래 자바에서는 동적으로 객체를 생성하는 기술이 없었다. 그리고 동적으로 인스턴스를 생성하는 Reflection으로 그 역활을 대신하게 된다.</p>

<p>즉 클래스나 메서드의 내부 구조를 들여다 볼 때 사용하는 도구라는 뜻이다.<br /></p>


                </div>
                <div class="read-all">
                    <a  href="/2016/09/17/reflection_property/"><i class="fa fa-newspaper-o"></i>Read All</a>
                </div>
                <hr>
              </li>
            
        </ul>



        <!-- Pagination links -->
        <div class="pagination">
          
            <a href="/index.html" class="previous"><i class="fa fa-angle-double-left"></i></a>
            <a href="/page6" class="previous"><i class="fa fa-angle-left"></i></a>
          
          <span class="page_number ">7/10</span>
          
            <a href="/page8" class="next"><i class="fa fa-angle-right"></i></a>
            <a href="/page10" class="next"><i class="fa fa-angle-double-right"></i></a>
          
        </div>
    </div>
    <!-- <button class="anchor"><i class="fa fa-anchor"></i></button> -->
    <div class="right">
        <div class="wrap">
            <!-- Content -->
            <div class="side ">
                <div>
                    <i class="fa fa-th-list"></i>
                    Categories
                </div>
                <ul class="content-ul" cate>
                    
                    <li>
                        <a href="/category/#js" class="categories-list-item" cate="js">
                            <span class="name">
                                js
                            </span>
                            <span class="badge">8</span>
                        </a>
                    </li>
                    
                    <li>
                        <a href="/category/#web" class="categories-list-item" cate="web">
                            <span class="name">
                                web
                            </span>
                            <span class="badge">15</span>
                        </a>
                    </li>
                    
                    <li>
                        <a href="/category/#python" class="categories-list-item" cate="python">
                            <span class="name">
                                python
                            </span>
                            <span class="badge">2</span>
                        </a>
                    </li>
                    
                    <li>
                        <a href="/category/#Spring" class="categories-list-item" cate="Spring">
                            <span class="name">
                                Spring
                            </span>
                            <span class="badge">4</span>
                        </a>
                    </li>
                    
                    <li>
                        <a href="/category/#Hadoop" class="categories-list-item" cate="Hadoop">
                            <span class="name">
                                Hadoop
                            </span>
                            <span class="badge">2</span>
                        </a>
                    </li>
                    
                    <li>
                        <a href="/category/#Java" class="categories-list-item" cate="Java">
                            <span class="name">
                                Java
                            </span>
                            <span class="badge">8</span>
                        </a>
                    </li>
                    
                    <li>
                        <a href="/category/#Etc" class="categories-list-item" cate="Etc">
                            <span class="name">
                                Etc
                            </span>
                            <span class="badge">7</span>
                        </a>
                    </li>
                    
                    <li>
                        <a href="/category/#Unix/Linux" class="categories-list-item" cate="Unix/Linux">
                            <span class="name">
                                Unix/Linux
                            </span>
                            <span class="badge">2</span>
                        </a>
                    </li>
                    
                    <li>
                        <a href="/category/#Swift" class="categories-list-item" cate="Swift">
                            <span class="name">
                                Swift
                            </span>
                            <span class="badge">1</span>
                        </a>
                    </li>
                    
                    <li>
                        <a href="/category/#MYSQL" class="categories-list-item" cate="MYSQL">
                            <span class="name">
                                MYSQL
                            </span>
                            <span class="badge">3</span>
                        </a>
                    </li>
                    
                    <li>
                        <a href="/category/#BigData" class="categories-list-item" cate="BigData">
                            <span class="name">
                                BigData
                            </span>
                            <span class="badge">1</span>
                        </a>
                    </li>
                    
                    <li>
                        <a href="/category/#ElasticSearch" class="categories-list-item" cate="ElasticSearch">
                            <span class="name">
                                ElasticSearch
                            </span>
                            <span class="badge">2</span>
                        </a>
                    </li>
                    
                    <li>
                        <a href="/category/#Spark" class="categories-list-item" cate="Spark">
                            <span class="name">
                                Spark
                            </span>
                            <span class="badge">1</span>
                        </a>
                    </li>
                    
                    <li>
                        <a href="/category/#Cassandra" class="categories-list-item" cate="Cassandra">
                            <span class="name">
                                Cassandra
                            </span>
                            <span class="badge">1</span>
                        </a>
                    </li>
                    
                </ul>
            </div>
            <div class="side">
                <div>
                    <i class="fa fa-pencil-square-o" aria-hidden="true"></i>
                    Recent Posts
                </div>
                <ul class="content-ul" recent>
                    
                        <li><a href="/2017/05/04/logback/">LogBack</a></li>
                    
                        <li><a href="/2017/04/20/resourcecleanup/">Resource CleanUp</a></li>
                    
                        <li><a href="/2017/04/08/garbagecollectionpauses/">Garbage collection pauses</a></li>
                    
                        <li><a href="/2017/04/02/runtojarbackground/">jar 백그라운드로 실행하기</a></li>
                    
                        <li><a href="/2017/03/27/mavenbuildplugin/">Maven Build Plugin & 옵션</a></li>
                    
                        <li><a href="/2017/03/26/properties/">properties 설정 및 사용</a></li>
                    
                        <li><a href="/2017/03/01/stringbuildervsstringbuffer/">StringBuilder vs StringBuffer</a></li>
                    
                        <li><a href="/2017/02/26/basicrdd/">기본 RDD연산들(트랜스포메이션, 액션)</a></li>
                    
                        <li><a href="/2017/02/19/logstash/">Logstash 기초</a></li>
                    
                        <li><a href="/2017/02/18/elasticsearchbasic/">ElasticSearch 기초</a></li>
                    
                </ul>
            </div>

<!--
            <div class="side">
                <div>
                    <i class="fa fa-tags"></i>
                    Tags
                </div>
                <div class="tags-cloud">
                    
                    
                    
                    

                    

                    
                </div>
            </div> -->
        </div>
    </div>
</div>


    <footer class="site-footer">


    <div class="wrapper">

        <p class="description">
            
        </p>
        <p class="contact">
            Contact me at: 
            <a href="https://github.com/joswlv" title="GitHub"><i class="fa fa-github" aria-hidden="true"></i></a>  
            <a href="mailto:wh7923@gmail.com" title="email"><i class="fa fa-envelope-o" aria-hidden="true"></i></a>     
            <a href="https://www.facebook.com/wsj7923" title="Facebook"><i class="fa fa-facebook-official" aria-hidden="true"></i></a>    
        </p>
        <p>
        </p>
        <p class="power">
            <span>
                Site powered by <a href="https://jekyllrb.com/">Jekyll</a> & <a href="https://pages.github.com/">Github Pages</a>.
            </span>
        </p>
    </div>
</footer>
<script async src="https://dn-lbstatics.qbox.me/busuanzi/2.3/busuanzi.pure.mini.js"></script>

    <div class="back-to-top">
    <a href="#top" class="scroll">
        <i class="fa fa-arrow-up" aria-hidden="true"></i>
    </a>
</div>

    <script src=" /js/main.js " charset="utf-8"></script>
    <script src=" /js/scroll.min.js " charset="utf-8"></script>
  </body>

</html>
