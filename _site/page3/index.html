<!DOCTYPE html>
<html>

  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">

    <title>Joswlv</title>
    <meta name="description" content="">

    <link rel="shortcut icon" href="/favicon.ico?" type="image/x-icon">
    <link rel="icon" href="/favicon.ico?" type="image/x-icon">
    <link rel="stylesheet" href="/css/fontawesome/css/font-awesome.min.css ">
    <link rel="stylesheet" href="/css/main.css ">
    <link rel="canonical" href="http://joswlv.github.io/page3/">
    <link rel="alternate" type="application/rss+xml" title="Joswlv" href="http://joswlv.github.io/feed.xml ">



<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-83868242-1', 'auto');
  ga('send', 'pageview');

</script>

</head>


  <body>

    <header id="top">
    <div class="wrapper">
        <a href="/" class="brand">Joswlv</a>
        <small></small>
        <button id="headerMenu" class="menu"><i class="fa fa-bars"></i></button>
        <nav id="headerNav">
            <ul>
                <li>
                    
                    <a href="/">
                    
                        <i class="fa fa-home"></i>Home
                    </a>
                </li>

                
                    
                    <li>
                        
                        <a href="/archive/">
                        
                            <i class="fa fa-archive"></i>Archives
                        </a>
                    </li>
                    
                
                    
                    <li>
                        
                        <a href="/category/">
                        
                            <i class="fa fa-th-list"></i>Categories
                        </a>
                    </li>
                    
                
                    
                
                    
                
                    
                
                    
                
                    
                
                    
                
                    
                
                    
                
                    
                
            </ul>
        </nav>
    </div>
</header>


        <div class="page clearfix" index>
    <div class="left">
        <!-- <h1>Welcome to SW's Blog!</h1>
        <small></small> -->
        <hr>
        <ul>
            
              <li>
                <h2>
                  <a class="post-link" href="/2016/10/23/spc_rsync/">scp 와 rsync - 원격파일정송방법</a>
                </h2>
                <div class="label">
                    <div class="label-card">
                        <i class="fa fa-calendar"></i>2016-10-23
                    </div>
                    <div class="label-card">
                        
                    </div>
                    <div class="label-card">
                        
                    </div>

                    <div class="label-card">
                    


<!-- <span class="point">•</span> -->
<span class="categories">
  <i class="fa fa-th-list"></i>
  
    
        <a href="/category/#Unix/Linux" title="Category: Unix/Linux" rel="category">Unix/Linux</a>
    
  

  <!-- <span class="point">•</span> -->
</span>


                    </div>

                </div>
                <div class="excerpt">
                    <p>원격으로 파일을 전송하기 위해사용 되는 명령어!</p>

<p>scp와 rsync의 차이점은 symbolic link를 처리하는데 차이가 있다.</p>

<blockquote>
  <p>scp는 전송하려 하는 파일중에 symbolic link 가 있으면 링크된 원본파일이 전송된다. 즉 symlink가 유지 되지 않는다.!!</p>
</blockquote>

<h1 id="section">사용법</h1>

<h2 id="scp">scp</h2>

<p><strong>scp -[옵션][보낼파일][받는서버 계정 아이디]@[받는서버 URL]:[받을 위치 절대 경로]</strong></p>

<h3 id="section-1">예)</h3>

<p>scp -pr ./send joswlv@20.20.20.20:./receive</p>

<blockquote>
  <p>옵션:</p>

  <p>-r = recusive 하위 폴더 포함 모두 복사</p>

  <p>-p = preserve 권한 및 속성 유지</p>

  <p>-C = compression 압축</p>
</blockquote>

<h2 id="rsync">rsync</h2>

<h2 id="rsync-1">rsync</h2>

<p><strong>rsync -[옵션][보낼파일][받을위치]</strong></p>

<p>받을위치는 [서버계정 아이디]@[파일URL]:[받을 경로]로 사용가능</p>

<h3 id="section-2">예)</h3>

<p>rsync -avzP ./send joswlv@20.20.20.20:./receive</p>

<blockquote>
  <p>옵션:</p>

  <p>-v = 진행상황을 상세히 보여줌</p>

  <p>-r = 지정한 디렉토리의 하위 디렉토리까지 재귀적으로 실행</p>

  <p>-p = 버전속성 보존</p>

  <p>-z = 데이터압축 전송</p>

  <p>-u = 추가된 파일만 전송</p>

  <p>-b = 낡은 파일은 ~가 붙음</p>

  <p>-u = 새로운 파일을 덮어쓰지 않음</p>

  <p>-e = ssh(rsh) 전송암호화</p>
</blockquote>


                </div>
                <div class="read-all">
                    <a  href="/2016/10/23/spc_rsync/"><i class="fa fa-newspaper-o"></i>Read All</a>
                </div>
                <hr>
              </li>
            
              <li>
                <h2>
                  <a class="post-link" href="/2016/10/14/sqoop/">Sqoop</a>
                </h2>
                <div class="label">
                    <div class="label-card">
                        <i class="fa fa-calendar"></i>2016-10-14
                    </div>
                    <div class="label-card">
                        
                    </div>
                    <div class="label-card">
                        
                    </div>

                    <div class="label-card">
                    


<!-- <span class="point">•</span> -->
<span class="categories">
  <i class="fa fa-th-list"></i>
  
    
        <a href="/category/#Hadoop" title="Category: Hadoop" rel="category">Hadoop</a>
    
  

  <!-- <span class="point">•</span> -->
</span>


                    </div>

                </div>
                <div class="excerpt">
                    <h1 id="sqoop">Sqoop이란</h1>

<p>스쿱은 관계형 데이터베이스와 하둡 사이에서 데이터 이관을 지원하는 툴이다. 스쿱을 이용하면 관계형 데이터베이스의 데이터를 HDFS, 하이브, H베이스, Accumulo에 임포트하거나 반대로 익스포트할 수 있다. 스쿱은 클라우데라에서 개발했으며, 현재 아파치 오픈소스 프로젝트로 공개되었다. <strong><a href="http://sqoop.apache.org">Sqoop</a></strong></p>

<h1 id="sqoop-1">Sqoop아키텍처</h1>

<p>스쿱은 관계형 데이터베이스를 읽고 쓸 수 있는 커넥터라는 개념을 사용한다. 커넥터는 각 데이터베이스별로 구현돼 있으며, JDBC 드라이버를 이용해 데이터베이스 접속 및 질의 실행을 요청한다.</p>

<h1 id="section">데이터 임포트 동작 방식</h1>

<ol>
  <li>클라이언트가 스쿱에 임포트를 요청한다. 이때 클라이언트는 데이터베이스 접속 정보, 임포트 대상 테이블, 임프토 질의, 실행할 맵 태스크 개수 등을 설정한다.</li>
  <li>스쿱은 데이터베이스에서 해당 테이블의 메타데이터를 조회해 ORM(Object Relational Mapping)클래스에는 익스포트 대상 테이블의 칼럼을 자바 변수로 매핑하고, 맵리듀스 잡 실행에 필요한 직렬화 메서드가 생성된다.</li>
  <li>스쿱은 ORM 클래스가 정상적으로 생성되면 맵리듀스 잡 실행을 요청한다. 그리고 스쿱은 맵 테스크의 출력 결과를 임포트에 사용하기 때문에 리듀스 태스크는 실행하지 않는다.</li>
  <li>맵 태스크는 데이터베이스에 JDBC로 접속한 후 SELECT질의를 실행한다.</li>
  <li>맵태스크는 질의문을 실행한 결과를 HDFS에 저장한다. 전체 맵 태스크가 종료되면 스쿱은 클라이언트에게 작업이 정상적으로 종료됐다고 알려준다.</li>
</ol>

<h1 id="section-1">데이터 익스포트 동작방식</h1>

<ol>
  <li>클라이언트는 스쿱에 익스포트를 요청한다.</li>
  <li>스쿱은 데이터베이스에서 메타데이터를 조회한 후 맵리듀스 잡에서 사용할 ORM클래스를 생성한다.</li>
  <li>스쿱은 데이터베이스의 중간 테이블의 데이터를 모두 삭제한 후 맵리듀스 잡을 실행한다.</li>
  <li>맵 태스크는 HDFS에서 데이터를 조회한 후 INSERT 질의문을 만들어 중간 테이블에 데이터를 입력한다. 이때 질의문은 레코드당 한 번씩 실행하는 것이 아니라 천개 단위로 배치로 실행한다. 참고로 중간 테이블 사용여부와 배치단위는 sqoop.export.records.per.statement 옵션으로 수정할 수 있다.</li>
  <li>스쿱은 맵리듀스 잡이 정상적으로 종료되면 중간 테이블의 결과를 최종 테이블에 입력한다.</li>
</ol>

<h1 id="section-2">데이터 임포트</h1>

<table>
  <thead>
    <tr>
      <th>옵션</th>
      <th>내용</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>–usename</td>
      <td>데이터베이스 접속 계정</td>
    </tr>
    <tr>
      <td>–password</td>
      <td>데이터베이스 접속 암호</td>
    </tr>
    <tr>
      <td>–connect</td>
      <td>JDBC 접속 URL</td>
    </tr>
    <tr>
      <td>–table</td>
      <td>임포트 대상 테이블</td>
    </tr>
    <tr>
      <td>–columns</td>
      <td>특정 칼럼만 임포트할 경우 칼럼명을 설정. 이 옵션을 설정하지 않을 경우 전체 칼럼을 임포트</td>
    </tr>
    <tr>
      <td>–target-dir</td>
      <td>임포트 결과를 저장할 HDFS 디렉터리. 별도로 설정하지 않을 경우 “/user/계졍명/테이블명”에 데이터가 저장됨</td>
    </tr>
    <tr>
      <td>–query</td>
      <td>특정 테이블을 설정하지 않고 질의문 실행 결과를 임포트. 단 이 옵션을 사용할 경우 $CONDITIONS를 반드시 WHERE절에 사용해야 함. $CONDITIONS는 스쿱이 자동으로 생성하는 WHERE 조건을 나타내는 키워드임</td>
    </tr>
    <tr>
      <td>-m,–num-mappers</td>
      <td>실행할 맵 태스크 개수, 데이터베이스에 부하를 줄 수 있으므로 적절한 태스크 개수를 설정해야함.</td>
    </tr>
    <tr>
      <td>–where</td>
      <td>임포트할 때 사용할 WHERE절</td>
    </tr>
    <tr>
      <td>-z, –comppress</td>
      <td>임포트 결과를 압축</td>
    </tr>
    <tr>
      <td>–compression-codec</td>
      <td>하둡 압축 코덱, 기본값으로 Gzip을 사용함</td>
    </tr>
    <tr>
      <td>–as-textfile</td>
      <td>임포트 결과를 텍스트 파일로 저장. 스쿱은 텍스트 파일을 기본값으로 사용함</td>
    </tr>
    <tr>
      <td>–as-sequencefile</td>
      <td>임포트 결과를 시퀀스파일로 저장</td>
    </tr>
    <tr>
      <td>–null-string<널갑문자열></널갑문자열></td>
      <td>문자열 칼럼에서 널 값 대신 사용할 문자열</td>
    </tr>
    <tr>
      <td>–null-non-string<널값 문자열=""></널값></td>
      <td>문자열이 아닌 칼럼에서 널 값 대신 사용할 문자열</td>
    </tr>
    <tr>
      <td>–direct</td>
      <td>고속 커넥터를 이용할 경우 사용</td>
    </tr>
  </tbody>
</table>

<h1 id="mysql--">MySQL로 데이터 익스포트</h1>

<table>
  <thead>
    <tr>
      <th>옵션</th>
      <th>내용</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>–export-dir</td>
      <td>익스포트 대상 HDFS 디렉터리</td>
    </tr>
    <tr>
      <td>-m, –num-mappers</td>
      <td>실행할 맵 태스크 개수, 데이터베이스에 부하를 줄 수 있으므로 적절한 태스크 개수를 설정해야함</td>
    </tr>
    <tr>
      <td>–table</td>
      <td>데이터베이스 최종 대상 테이블</td>
    </tr>
    <tr>
      <td>–staging-table</td>
      <td>데이터베이스 중간 데이터 저장용 테이블</td>
    </tr>
    <tr>
      <td>–clear-staging-table</td>
      <td>중간 데이터용 데이블 데이터 삭제 여부</td>
    </tr>
    <tr>
      <td>-null-string<널값 문자열=""></널값></td>
      <td>문자열 칼럼에서 널 값 대신 사용할 문자열</td>
    </tr>
    <tr>
      <td>–null-non-string<널값문자열></널값문자열></td>
      <td>문자열이 아닌 칼럼에서 널 값 대신 사용할 문자열</td>
    </tr>
    <tr>
      <td>–direct</td>
      <td>고속커넥터를 이용할 경우 사용</td>
    </tr>
  </tbody>
</table>

<p><br /></p>

<h3 id="reference">Reference</h3>
<ul>
  <li><a href="http://www.yes24.com/24/Goods/26903681?Acode=101">시작하세요! 하둡 프로그래밍 : 빅데이터 분석을 위한 하둡 기초부터 YARN까지</a></li>
</ul>

                </div>
                <div class="read-all">
                    <a  href="/2016/10/14/sqoop/"><i class="fa fa-newspaper-o"></i>Read All</a>
                </div>
                <hr>
              </li>
            
              <li>
                <h2>
                  <a class="post-link" href="/2016/10/13/LogBack/">LogBack in SpringBoot</a>
                </h2>
                <div class="label">
                    <div class="label-card">
                        <i class="fa fa-calendar"></i>2016-10-13
                    </div>
                    <div class="label-card">
                        
                    </div>
                    <div class="label-card">
                        
                    </div>

                    <div class="label-card">
                    


<!-- <span class="point">•</span> -->
<span class="categories">
  <i class="fa fa-th-list"></i>
  
    
        <a href="/category/#Spring" title="Category: Spring" rel="category">Spring</a>
    
  

  <!-- <span class="point">•</span> -->
</span>


                    </div>

                </div>
                <div class="excerpt">
                    <h1 id="logback-">LogBack 이란</h1>

<p>logback은 SLF4J의 native 구현체이다. slf4j로 어플리케이션 로그를 남긴다면 logback을 선택하는 것이 좋다고 한다. slf4j의 도움으로 연관 라이브어리들이 다른 loggin framework를 쓰더라도 logback으로 통합할 수 있다.</p>

<p>logbac은 <code class="highlighter-rouge">logback-core</code>, <code class="highlighter-rouge">logback-classic</code>, <code class="highlighter-rouge">logback-access</code>의 3개의 모듈이 있다.</p>

<h1 id="logbackxml">logback.xml설정</h1>

<div class="language-xml highlighter-rouge"><pre class="highlight"><code><span class="cp">&lt;?xml version="1.0" encoding="UTF-8"?&gt;</span>
<span class="nt">&lt;configuration&gt;</span>
    <span class="nt">&lt;appender</span> <span class="na">name=</span><span class="s">"STDOUT"</span> <span class="na">class=</span><span class="s">"ch.qos.logback.core.ConsoleAppender"</span><span class="nt">&gt;</span>
        <span class="nt">&lt;layout</span> <span class="na">class=</span><span class="s">"ch.qos.logback.classic.PatternLayout"</span><span class="nt">&gt;</span>
            <span class="nt">&lt;Pattern&gt;</span>%d{HH:mm} %-5level %logger{36} - %msg%n<span class="nt">&lt;/Pattern&gt;</span>
        <span class="nt">&lt;/layout&gt;</span>
    <span class="nt">&lt;/appender&gt;</span>
 
    <span class="nt">&lt;logger</span> <span class="na">name=</span><span class="s">"example.logback.level.grandparents"</span> <span class="na">level=</span><span class="s">"TRACE"</span><span class="nt">/&gt;</span>
    <span class="nt">&lt;logger</span> <span class="na">name=</span><span class="s">"example.logback.level.grandparents.parents.children"</span> <span class="na">level=</span><span class="s">"INFO"</span><span class="nt">/&gt;</span>
    <span class="nt">&lt;root</span> <span class="na">level=</span><span class="s">"DEBUG"</span><span class="nt">&gt;</span>
        <span class="nt">&lt;appender-ref</span> <span class="na">ref=</span><span class="s">"STDOUT"</span> <span class="nt">/&gt;</span>
    <span class="nt">&lt;/root&gt;</span>
<span class="nt">&lt;/configuration&gt;</span>
</code></pre>
</div>

<p>여기서 root는 root logger를 말한다. logger name=”“과 같은 뜻이라고 생각하면 된다.</p>

<div class="language-xml highlighter-rouge"><pre class="highlight"><code><span class="nt">&lt;logger</span> <span class="na">name=</span><span class="s">"example.logback.level.grandparents"</span> <span class="na">level=</span><span class="s">"TRACE"</span><span class="nt">/&gt;</span>
</code></pre>
</div>
<p><code class="highlighter-rouge">example.logback.level.grandparents</code> 이하 모든  Logger들의 level은 TRACE라는 설정이다.</p>

<p>log level은 다음과 같다.</p>

<ul>
  <li>trace</li>
  <li>debug</li>
  <li>info</li>
  <li>warn</li>
  <li>error</li>
</ul>

<h1 id="appender">Appender</h1>

<p>Event마다 Log를 기록하는 기능은 Appender가 처리한다. 그래서 Logger는 어떤 Appender에 해당이 되어 처리 되는지가 중요하다. Appender를 설정해도 log출력에 해당되지 않으면 작동하지 않는다.</p>

<p>Appender는 출력될 형식을 직접 가지고 있이 않고, 해당 기능은 Layout과 Encoder에 위임한다.</p>

<h1 id="consoleappender">ConsoleAppender</h1>

<p>ConsoleAppender는 OutputStreamAppender를 상속한다. encoder, pattern으로 PatternLayoutEncoder가 생성해서 Appender에 주입된다.</p>

<div class="language-xml highlighter-rouge"><pre class="highlight"><code><span class="nt">&lt;appender</span> <span class="na">name=</span><span class="s">"STDOUT"</span> <span class="na">class=</span><span class="s">"ch.qos.logback.core.ConsoleAppender"</span><span class="nt">&gt;</span>
  <span class="c">&lt;!-- encoders are assigned the type
       ch.qos.logback.classic.encoder.PatternLayoutEncoder by default --&gt;</span>
  <span class="nt">&lt;encoder&gt;</span>
    <span class="nt">&lt;pattern&gt;</span>%-4relative [%thread] %-5level %logger{35} - %msg %n<span class="nt">&lt;/pattern&gt;</span>
  <span class="nt">&lt;/encoder&gt;</span>
<span class="nt">&lt;/appender&gt;</span>
</code></pre>
</div>

<p>PatternLayoutEncoder는 pattern으로 받은 값을 이용해서 PatternLayout을 생성하고 PatternLayoutEncoder는 log messag를 byte[]로 변환하는 기능도 포함한다. 이렇게 되면 Appender는 Layout기능과 Encoder기능을 모두 가지게 된다. 
이것을 이용해 OutputStreamAppender는 byte[]를 OutputStream에 write하게 된다.</p>

<p>참고 - <a href="http://logback.qos.ch/manual/layouts.html#ClassicPatternLayout">http://logback.qos.ch/manual/layouts.html#ClassicPatternLayout</a></p>

<h1 id="fileappender">FileAppender</h1>

<div class="language-xml highlighter-rouge"><pre class="highlight"><code><span class="c">&lt;!-- Insert the current time formatted as "yyyyMMdd'T'HHmmss" under
     the key "bySecond" into the logger context. This value will be
     available to all subsequent configuration elements. --&gt;</span>
<span class="nt">&lt;timestamp</span> <span class="na">key=</span><span class="s">"bySecond"</span> <span class="na">datePattern=</span><span class="s">"yyyyMMdd'T'HHmmss"</span><span class="nt">/&gt;</span>
<span class="nt">&lt;appender</span> <span class="na">name=</span><span class="s">"FILE"</span> <span class="na">class=</span><span class="s">"ch.qos.logback.core.FileAppender"</span><span class="nt">&gt;</span>
  <span class="nt">&lt;file&gt;</span>log-${bySecond}.txt<span class="nt">&lt;/file&gt;</span>
  <span class="nt">&lt;append&gt;</span>true<span class="nt">&lt;/append&gt;</span>
  <span class="c">&lt;!-- encoders are assigned the type
       ch.qos.logback.classic.encoder.PatternLayoutEncoder by default --&gt;</span>
  <span class="nt">&lt;encoder&gt;</span>
    <span class="nt">&lt;pattern&gt;</span>%-4relative [%thread] %-5level %logger{35} - %msg%n<span class="nt">&lt;/pattern&gt;</span>
  <span class="nt">&lt;/encoder&gt;</span>
<span class="nt">&lt;/appender&gt;</span>
</code></pre>
</div>

<p>로그가 저장될 file을 선언하고, ConsoleAppender처럼 encoder, pattern을 선언하게 되면, log event를 지정된 file에 저장할 수 있다. 이때 파일 포맷중 날짜 형식은 java.text.SimpleDateFormat을 따른다.</p>

<p><code class="highlighter-rouge">&lt;file&gt;</code>태그에 파일명만 작성하면 톰켓으로 구동할 경우 톰켓 <code class="highlighter-rouge">bin</code>폴더에 로그파일이 생성된다.</p>

<div class="language-xml highlighter-rouge"><pre class="highlight"><code><span class="nt">&lt;appender</span> <span class="na">name=</span><span class="s">"FILE"</span> <span class="na">class=</span><span class="s">"ch.qos.logback.core.FileAppender"</span><span class="nt">&gt;</span>
...
  <span class="nt">&lt;prudent&gt;</span>true<span class="nt">&lt;/prudent&gt;</span>
...
<span class="nt">&lt;/appender&gt;</span>
</code></pre>
</div>

<p><code class="highlighter-rouge">&lt;prudent&gt;</code>태그는 file에 저장될때 lock을 생성해서 처리한다. 서로 다른 java vm이 같은 파일을 가릴킬때 사용한다. 성능이 저하되는 단점이 있다.</p>

<h1 id="rollingfileappender">RollingFileAppender</h1>

<p>log가 많아지면 file하나당 최대 용량 제한도 있고, 로그를 파악하기도 어렵다. 이때 대부분 날짜를 기준으로 file을 남긴다. 따로 crontab으로 매일 file을 rename해서 처리할 수도 있지만, logback은 RollingFileAppender로 처리할 수 있다.</p>

<div class="language-xml highlighter-rouge"><pre class="highlight"><code><span class="nt">&lt;appender</span> <span class="na">name=</span><span class="s">"ROLLING"</span> <span class="na">class=</span><span class="s">"ch.qos.logback.core.rolling.RollingFileAppender"</span><span class="nt">&gt;</span>
  <span class="nt">&lt;file&gt;</span>mylog.txt<span class="nt">&lt;/file&gt;</span>
  <span class="nt">&lt;rollingPolicy</span> <span class="na">class=</span><span class="s">"ch.qos.logback.core.rolling.TimeBasedRollingPolicy"</span><span class="nt">&gt;</span>
    <span class="c">&lt;!-- rollover daily --&gt;</span>
    <span class="nt">&lt;fileNamePattern&gt;</span>mylog-%d{yyyy-MM-dd}.%i.txt<span class="nt">&lt;/fileNamePattern&gt;</span>
    <span class="nt">&lt;timeBasedFileNamingAndTriggeringPolicy</span>
          <span class="na">class=</span><span class="s">"ch.qos.logback.core.rolling.SizeAndTimeBasedFNATP"</span><span class="nt">&gt;</span>
      <span class="c">&lt;!-- or whenever the file size reaches 100MB --&gt;</span>
      <span class="nt">&lt;maxFileSize&gt;</span>100MB<span class="nt">&lt;/maxFileSize&gt;</span>
    <span class="nt">&lt;/timeBasedFileNamingAndTriggeringPolicy&gt;</span>
  <span class="nt">&lt;/rollingPolicy&gt;</span>
  <span class="nt">&lt;encoder&gt;</span>
    <span class="nt">&lt;pattern&gt;</span>%msg%n<span class="nt">&lt;/pattern&gt;</span>
  <span class="nt">&lt;/encoder&gt;</span>
<span class="nt">&lt;/appender&gt;</span>
</code></pre>
</div>

<p>rollingPolicy로 rolling정책을 등록할 수 있다. fileNamePattern으로 file pattern을 선언하고, <code class="highlighter-rouge">&lt;timeBasedFileNameingAndTriggeringPolicy&gt;</code>로 파일마다 트리거를 걸어 파일 최대 용량을 설정하면 새로운 index이름으로 파일을 생성한다.</p>

<p>filesize는 끝문자열에 kb,mb,gb를 인식하고 대소문자 구분은 없다. whitespace는 모두 무시한다.</p>

<div class="language-xml highlighter-rouge"><pre class="highlight"><code><span class="nt">&lt;fileNamePattern&gt;</span>mylog-%d{yyyy-MM-dd}.%i.txt.zip<span class="nt">&lt;/fileNamePattern&gt;</span>
</code></pre>
</div>
<p>확장자에 <code class="highlighter-rouge">.zip</code>을 선언하면 새로운 file이 생성될때 이전 파일은 .zip으로 압축을 할 수 있다.</p>

<h1 id="configuration">Configuration</h1>

<h3 id="logback-debug">logback debug모드</h3>

<p>아래 설정으로 logback이 구동될때 logback상태를 확인 할 수 있다.</p>

<div class="language-xml highlighter-rouge"><pre class="highlight"><code><span class="nt">&lt;configuration</span> <span class="na">debug=</span><span class="s">"true"</span><span class="nt">&gt;</span>
...
<span class="nt">&lt;/configuration&gt;</span>
</code></pre>
</div>

<h3 id="additivity">additivity</h3>

<p>additivity의 default값은 true이다. logger name이하 모두 적용이 되는데 additivity를 false로 설정하면 해당 name에만 looger가 적용된다.</p>

<div class="language-xml highlighter-rouge"><pre class="highlight"><code><span class="nt">&lt;logger</span> <span class="na">name=</span><span class="s">"XXX"</span> <span class="na">level=</span><span class="s">"DEBUG"</span> <span class="na">additivity=</span><span class="s">"false"</span><span class="nt">/&gt;</span>
</code></pre>
</div>

<h3 id="root">root</h3>

<p>loggr들은 name으로 등록이 된다. 기본적으로 java package구조와 동일하게 적용한다. tree구조이기때문에 최상단 root을 적용하면 모든 tree이하에 적용 할 수 있다. 이 설정으로 logger를 대신한다.</p>

<div class="language-xml highlighter-rouge"><pre class="highlight"><code><span class="nt">&lt;root</span> <span class="na">level=</span><span class="s">"DEBUG"</span><span class="nt">&gt;</span>
    <span class="nt">&lt;appender-ref</span> <span class="na">ref=</span><span class="s">"STDOUT"</span> <span class="nt">/&gt;</span>
<span class="nt">&lt;/root&gt;</span>
</code></pre>
</div>

<p>모든 대상에 STDOUT Appender를 적용하고 level이 DEBUG이하인 것만 처리로 설정된다.</p>

<h1 id="json-log-">Json으로 log남겨 보기!</h1>

<p>간단한 쇼핑몰 log를 json으로 남겨본다.</p>

<p>우선 <code class="highlighter-rouge">logback.xml</code>대신에 <code class="highlighter-rouge">logback-sping.xml</code>파일을 만든다.</p>

<p>내용은 아래와 같다.</p>

<div class="language-xml highlighter-rouge"><pre class="highlight"><code><span class="cp">&lt;?xml version="1.0" encoding="UTF-8"?&gt;</span>
<span class="nt">&lt;configuration&gt;</span>
    <span class="nt">&lt;include</span> <span class="na">resource=</span><span class="s">"org/springframework/boot/logging/logback/base.xml"</span><span class="nt">/&gt;</span>
    <span class="nt">&lt;appender</span> <span class="na">name=</span><span class="s">"FILE-AUDIT"</span>
        <span class="na">class=</span><span class="s">"ch.qos.logback.core.rolling.RollingFileAppender"</span><span class="nt">&gt;</span>
        <span class="nt">&lt;file&gt;</span>/tmp/test.log<span class="nt">&lt;/file&gt;</span>
        <span class="nt">&lt;encoder</span> <span class="na">class=</span><span class="s">"ch.qos.logback.classic.encoder.PatternLayoutEncoder"</span><span class="nt">&gt;</span>
            <span class="nt">&lt;Pattern&gt;</span>
                %msg%n
            <span class="nt">&lt;/Pattern&gt;</span>
        <span class="nt">&lt;/encoder&gt;</span>

        <span class="nt">&lt;rollingPolicy</span> <span class="na">class=</span><span class="s">"ch.qos.logback.core.rolling.TimeBasedRollingPolicy"</span><span class="nt">&gt;</span>
            <span class="c">&lt;!-- rollover daily --&gt;</span>
            <span class="nt">&lt;fileNamePattern&gt;</span>${DEV_HOME}/archived/debug.%d{yyyy-MM-dd}.%i.log
            <span class="nt">&lt;/fileNamePattern&gt;</span>
            <span class="nt">&lt;timeBasedFileNamingAndTriggeringPolicy</span>
                    <span class="na">class=</span><span class="s">"ch.qos.logback.core.rolling.SizeAndTimeBasedFNATP"</span><span class="nt">&gt;</span>
                <span class="nt">&lt;maxFileSize&gt;</span>10MB<span class="nt">&lt;/maxFileSize&gt;</span>
            <span class="nt">&lt;/timeBasedFileNamingAndTriggeringPolicy&gt;</span>
        <span class="nt">&lt;/rollingPolicy&gt;</span>
    <span class="nt">&lt;/appender&gt;</span>
    <span class="nt">&lt;logger</span> <span class="na">name=</span><span class="s">"com.newace.model"</span> <span class="na">level=</span><span class="s">"TRACE"</span> <span class="na">additivity=</span><span class="s">"false"</span><span class="nt">&gt;</span>
        <span class="nt">&lt;appender-ref</span> <span class="na">ref=</span><span class="s">"FILE-AUDIT"</span><span class="nt">/&gt;</span>
    <span class="nt">&lt;/logger&gt;</span>

<span class="nt">&lt;/configuration&gt;</span>
</code></pre>
</div>

<p>logger를 com.newace.model아래에 TRACE level아래의 모든 로그로 설정하였다.</p>

<p>log모델은 다음과 같다.</p>

<div class="language-java highlighter-rouge"><pre class="highlight"><code><span class="kd">public</span> <span class="kd">class</span> <span class="nc">LogSumModel</span> <span class="kd">extends</span> <span class="n">BaseModel</span> <span class="o">{</span>
    <span class="kd">private</span> <span class="kd">static</span> <span class="kd">final</span> <span class="n">Logger</span> <span class="n">LOGGER</span> <span class="o">=</span> <span class="n">LoggerFactory</span><span class="o">.</span><span class="na">getLogger</span><span class="o">(</span><span class="n">LogSumModel</span><span class="o">.</span><span class="na">class</span><span class="o">);</span>

    <span class="kd">private</span> <span class="kd">static</span> <span class="kd">final</span> <span class="n">LogSumModel</span> <span class="n">LOG_LOGIN</span> <span class="o">=</span> <span class="k">new</span> <span class="n">LogSumModel</span><span class="o">(</span><span class="s">"login"</span><span class="o">);</span>
    <span class="kd">private</span> <span class="kd">static</span> <span class="kd">final</span> <span class="n">LogSumModel</span> <span class="n">LOG_ADD_CART</span> <span class="o">=</span> <span class="k">new</span> <span class="n">LogSumModel</span><span class="o">(</span><span class="s">"cart"</span><span class="o">);</span>
    <span class="kd">private</span> <span class="kd">static</span> <span class="kd">final</span> <span class="n">LogSumModel</span> <span class="n">LOG_CATEGORY</span> <span class="o">=</span> <span class="k">new</span> <span class="n">LogSumModel</span><span class="o">(</span><span class="s">"category"</span><span class="o">);</span>
    <span class="kd">private</span> <span class="kd">static</span> <span class="kd">final</span> <span class="n">LogSumModel</span> <span class="n">LOG_PRODUCT_BUY</span> <span class="o">=</span> <span class="k">new</span> <span class="n">LogSumModel</span><span class="o">(</span><span class="s">"buy"</span><span class="o">);</span>
    <span class="kd">private</span> <span class="kd">static</span> <span class="kd">final</span> <span class="n">LogSumModel</span> <span class="n">LOG_PRODUCT_DETAIL</span> <span class="o">=</span> <span class="k">new</span> <span class="n">LogSumModel</span><span class="o">(</span><span class="s">"detail"</span><span class="o">);</span>


    <span class="kd">private</span> <span class="n">String</span> <span class="n">action</span><span class="o">;</span>
    <span class="kd">private</span> <span class="kt">long</span> <span class="n">regDate</span><span class="o">;</span>
    <span class="kd">private</span> <span class="kt">int</span> <span class="n">userId</span><span class="o">;</span>
    <span class="kd">private</span> <span class="kt">int</span> <span class="n">categoryNum</span><span class="o">;</span>
    <span class="kd">private</span> <span class="kt">int</span> <span class="n">productNum</span><span class="o">;</span>
    <span class="kd">private</span> <span class="kt">boolean</span> <span class="n">isCart</span><span class="o">;</span>

    <span class="kd">private</span> <span class="nf">LogSumModel</span><span class="o">()</span> <span class="o">{</span>
    <span class="o">}</span>

    <span class="kd">private</span> <span class="nf">LogSumModel</span><span class="o">(</span><span class="n">String</span> <span class="n">action</span><span class="o">)</span> <span class="o">{</span>
        <span class="k">this</span><span class="o">();</span>
        <span class="k">this</span><span class="o">.</span><span class="na">action</span> <span class="o">=</span> <span class="n">action</span><span class="o">;</span>
    <span class="o">}</span>

    <span class="kd">public</span> <span class="kd">static</span> <span class="kt">void</span> <span class="nf">writeLoginLog</span><span class="o">(</span><span class="nd">@NotNull</span> <span class="n">UserModel</span> <span class="n">userModel</span><span class="o">)</span> <span class="o">{</span>
        <span class="n">LOGGER</span><span class="o">.</span><span class="na">trace</span><span class="o">(</span><span class="n">LOG_LOGIN</span><span class="o">.</span><span class="na">setRegDate</span><span class="o">(</span><span class="n">System</span><span class="o">.</span><span class="na">currentTimeMillis</span><span class="o">())</span>
                <span class="o">.</span><span class="na">setUserId</span><span class="o">(</span><span class="n">userModel</span><span class="o">.</span><span class="na">getUserId</span><span class="o">())</span>
                <span class="o">.</span><span class="na">toString</span><span class="o">());</span>
    <span class="o">}</span>

    <span class="kd">public</span> <span class="kd">static</span> <span class="kt">void</span> <span class="nf">writeAddCartLog</span><span class="o">(</span><span class="nd">@NotNull</span> <span class="n">UserModel</span> <span class="n">userModel</span><span class="o">,</span> <span class="nd">@NotNull</span> <span class="n">ProductModel</span> <span class="n">productModel</span><span class="o">)</span> <span class="o">{</span>
        <span class="n">LOGGER</span><span class="o">.</span><span class="na">trace</span><span class="o">(</span><span class="n">LOG_ADD_CART</span><span class="o">.</span><span class="na">setRegDate</span><span class="o">(</span><span class="n">System</span><span class="o">.</span><span class="na">currentTimeMillis</span><span class="o">())</span>
                <span class="o">.</span><span class="na">setProductNum</span><span class="o">(</span><span class="n">productModel</span><span class="o">.</span><span class="na">getProductId</span><span class="o">())</span>
                <span class="o">.</span><span class="na">setUserId</span><span class="o">(</span><span class="n">userModel</span><span class="o">.</span><span class="na">getUserId</span><span class="o">())</span>
                <span class="o">.</span><span class="na">toString</span><span class="o">());</span>
    <span class="o">}</span>

    <span class="kd">public</span> <span class="kd">static</span> <span class="kt">void</span> <span class="nf">writeProductBuyLog</span><span class="o">(</span><span class="nd">@NotNull</span> <span class="n">UserModel</span> <span class="n">userModel</span><span class="o">,</span> <span class="nd">@NotNull</span> <span class="n">ProductModel</span> <span class="n">productModel</span><span class="o">,</span> <span class="kt">boolean</span> <span class="n">isCart</span><span class="o">)</span> <span class="o">{</span>
        <span class="n">LOGGER</span><span class="o">.</span><span class="na">trace</span><span class="o">(</span><span class="n">LOG_PRODUCT_BUY</span><span class="o">.</span><span class="na">setRegDate</span><span class="o">(</span><span class="n">System</span><span class="o">.</span><span class="na">currentTimeMillis</span><span class="o">())</span>
                <span class="o">.</span><span class="na">setProductNum</span><span class="o">(</span><span class="n">productModel</span><span class="o">.</span><span class="na">getProductId</span><span class="o">())</span>
                <span class="o">.</span><span class="na">setUserId</span><span class="o">(</span><span class="n">userModel</span><span class="o">.</span><span class="na">getUserId</span><span class="o">())</span>
                <span class="o">.</span><span class="na">setCart</span><span class="o">(</span><span class="n">isCart</span><span class="o">)</span>
                <span class="o">.</span><span class="na">toString</span><span class="o">());</span>
    <span class="o">}</span>

    <span class="kd">public</span> <span class="kd">static</span> <span class="kt">void</span> <span class="nf">writeProductDetailLog</span><span class="o">(</span><span class="nd">@NotNull</span> <span class="n">UserModel</span> <span class="n">userModel</span><span class="o">,</span> <span class="nd">@NotNull</span> <span class="n">ProductModel</span> <span class="n">productModel</span><span class="o">)</span> <span class="o">{</span>
        <span class="n">LOGGER</span><span class="o">.</span><span class="na">trace</span><span class="o">(</span><span class="n">LOG_PRODUCT_DETAIL</span><span class="o">.</span><span class="na">setRegDate</span><span class="o">(</span><span class="n">System</span><span class="o">.</span><span class="na">currentTimeMillis</span><span class="o">())</span>
                <span class="o">.</span><span class="na">setProductNum</span><span class="o">(</span><span class="n">productModel</span><span class="o">.</span><span class="na">getProductId</span><span class="o">())</span>
                <span class="o">.</span><span class="na">setUserId</span><span class="o">(</span><span class="n">userModel</span><span class="o">.</span><span class="na">getUserId</span><span class="o">())</span>
                <span class="o">.</span><span class="na">toString</span><span class="o">());</span>
    <span class="o">}</span>

    <span class="kd">public</span> <span class="kd">static</span> <span class="kt">void</span> <span class="nf">writeCategoryLog</span><span class="o">(</span><span class="nd">@NotNull</span> <span class="n">UserModel</span> <span class="n">userModel</span><span class="o">,</span> <span class="nd">@NotNull</span> <span class="n">CategoryModel</span> <span class="n">productModel</span><span class="o">)</span> <span class="o">{</span>
        <span class="n">LOGGER</span><span class="o">.</span><span class="na">trace</span><span class="o">(</span><span class="n">LOG_CATEGORY</span><span class="o">.</span><span class="na">setRegDate</span><span class="o">(</span><span class="n">System</span><span class="o">.</span><span class="na">currentTimeMillis</span><span class="o">())</span>
                <span class="o">.</span><span class="na">setUserId</span><span class="o">(</span><span class="n">userModel</span><span class="o">.</span><span class="na">getUserId</span><span class="o">())</span>
                <span class="o">.</span><span class="na">setCategoryNum</span><span class="o">(</span><span class="n">productModel</span><span class="o">.</span><span class="na">getCategoryId</span><span class="o">())</span>
                <span class="o">.</span><span class="na">toString</span><span class="o">());</span>
    <span class="o">}</span>

<span class="o">....</span> <span class="n">SeterGeter</span><span class="err">메소드</span>

<span class="o">}</span>
</code></pre>
</div>

<p>BaseModel에서는 object를 json으로 변환하는 함수를 상속해준다.</p>

<div class="language-java highlighter-rouge"><pre class="highlight"><code><span class="kd">public</span> <span class="kd">class</span> <span class="nc">BaseModel</span> <span class="o">{</span>
    <span class="kd">private</span> <span class="kd">static</span> <span class="n">ObjectMapper</span> <span class="n">mapper</span> <span class="o">=</span> <span class="k">new</span> <span class="n">ObjectMapper</span><span class="o">();</span>

    <span class="nd">@Override</span>
    <span class="kd">public</span> <span class="n">String</span> <span class="nf">toString</span><span class="o">()</span> <span class="o">{</span>
        <span class="k">try</span> <span class="o">{</span>
            <span class="k">return</span> <span class="n">mapper</span><span class="o">.</span><span class="na">writeValueAsString</span><span class="o">(</span><span class="k">this</span><span class="o">);</span>
        <span class="o">}</span> <span class="k">catch</span> <span class="o">(</span><span class="n">JsonProcessingException</span> <span class="n">e</span><span class="o">)</span> <span class="o">{</span>
            <span class="n">e</span><span class="o">.</span><span class="na">printStackTrace</span><span class="o">();</span>
        <span class="o">}</span>
        <span class="k">return</span> <span class="kc">null</span><span class="o">;</span>
    <span class="o">}</span>
<span class="o">}</span>
</code></pre>
</div>

<p>로그 모델객체를 생성해 로그를 찍고 싶은 곳에서 사용하면 된다. 결과는 아래그림과 같다.</p>

<p><img src="http://joswlv.github.io/images/logback.png" alt="" /></p>


                </div>
                <div class="read-all">
                    <a  href="/2016/10/13/LogBack/"><i class="fa fa-newspaper-o"></i>Read All</a>
                </div>
                <hr>
              </li>
            
              <li>
                <h2>
                  <a class="post-link" href="/2016/10/11/readingoodcode/"><읽기좋은코드> 요약</a>
                </h2>
                <div class="label">
                    <div class="label-card">
                        <i class="fa fa-calendar"></i>2016-10-11
                    </div>
                    <div class="label-card">
                        
                    </div>
                    <div class="label-card">
                        
                    </div>

                    <div class="label-card">
                    


<!-- <span class="point">•</span> -->
<span class="categories">
  <i class="fa fa-th-list"></i>
  
    
        <a href="/category/#Etc" title="Category: Etc" rel="category">Etc</a>
    
  

  <!-- <span class="point">•</span> -->
</span>


                    </div>

                </div>
                <div class="excerpt">
                    <h1 id="section">원본</h1>

<ul>
  <li><a href="http://www.hanbit.co.kr/book/look.html?isbn=978-89-7914-914-2">&lt;읽기 좋은 코드가 좋은 코드다&gt;</a></li>
  <li><a href="https://nhnent.dooray.com/share/posts/1kprIA7VR3S4lwuMCa4D9Q">NHN신입강의</a></li>
</ul>

<h1 id="section-1">코드는 이해하기 쉬워야한다.</h1>

<h2 id="section-2">간결한 코드가 좋다.</h2>

<div class="language-java highlighter-rouge"><pre class="highlight"><code><span class="k">for</span> <span class="o">(</span><span class="n">Node</span><span class="o">*</span> <span class="n">node</span> <span class="o">=</span> <span class="n">list</span><span class="o">-&gt;</span><span class="n">head</span><span class="o">;</span> <span class="n">node</span> <span class="o">!=</span> <span class="n">NULL</span><span class="o">;</span> <span class="n">node</span> <span class="o">=</span> <span class="n">node</span><span class="o">-&gt;</span><span class="n">next</span><span class="o">)</span>
    <span class="n">Print</span><span class="o">(</span><span class="n">node</span><span class="o">-&gt;</span><span class="n">data</span><span class="o">);</span>
</code></pre>
</div>
<div class="language-java highlighter-rouge"><pre class="highlight"><code><span class="n">Node</span><span class="o">*</span> <span class="n">node</span> <span class="o">=</span> <span class="n">list</span><span class="o">-&gt;</span><span class="n">head</span><span class="o">;</span>
<span class="k">if</span> <span class="o">(</span><span class="n">node</span> <span class="o">==</span> <span class="n">NULL</span><span class="o">)</span> <span class="k">return</span><span class="o">;</span>

<span class="k">while</span><span class="o">(</span><span class="n">node</span><span class="o">-&gt;</span><span class="n">next</span> <span class="o">!=</span> <span class="n">NULL</span><span class="o">)</span> <span class="o">{</span>
    <span class="n">Print</span><span class="o">(</span><span class="n">node</span><span class="o">-&gt;</span><span class="n">data</span><span class="o">);</span>
    <span class="n">node</span> <span class="o">=</span> <span class="n">node</span><span class="o">-&gt;</span><span class="n">next</span><span class="o">;</span>
<span class="o">}</span>
<span class="k">if</span> <span class="o">(</span><span class="n">node</span> <span class="o">!=</span> <span class="n">NULL</span><span class="o">)</span> <span class="n">Print</span><span class="o">(</span><span class="n">node</span><span class="o">-&gt;</span><span class="n">data</span><span class="o">);</span>
</code></pre>
</div>

<h2 id="section-3">!= 적은 줄</h2>

<div class="language-java highlighter-rouge"><pre class="highlight"><code><span class="k">return</span> <span class="n">exponent</span><span class="o">&gt;=</span><span class="mi">0</span> <span class="o">?</span> <span class="n">mantissa</span> <span class="o">=</span> <span class="o">(</span><span class="mi">1</span> <span class="o">&lt;&lt;</span> <span class="n">exponent</span><span class="o">)</span> <span class="o">:</span> <span class="n">mantissa</span> <span class="o">/</span> <span class="o">(</span><span class="mi">1</span> <span class="o">&lt;&lt;-</span><span class="n">exponent</span><span class="o">);</span>
</code></pre>
</div>
<div class="language-java highlighter-rouge"><pre class="highlight"><code><span class="k">if</span> <span class="o">(</span><span class="n">exponent</span> <span class="o">&gt;=</span> <span class="mi">0</span><span class="o">)</span> <span class="o">{</span>
    <span class="k">return</span> <span class="n">mantissa</span> <span class="o">*</span> <span class="o">(</span><span class="mi">1</span> <span class="o">&lt;&lt;</span> <span class="n">exponent</span><span class="o">);</span>
<span class="o">}</span> <span class="k">else</span> <span class="o">{</span>
    <span class="k">return</span> <span class="n">mantissa</span> <span class="o">/</span> <span class="o">(</span><span class="mi">1</span> <span class="o">&lt;&lt;</span> <span class="o">-</span><span class="n">exponent</span><span class="o">);</span>
<span class="o">}</span>
</code></pre>
</div>

<p><strong>핵심</strong></p>

<p><code class="highlighter-rouge">코드는 "다른 사람"이 그것을 "이해"하는 데 들이는 시간을 최소화하는 방식으로 작성해야한다.</code></p>

<ul>
  <li>“이해”
    <ul>
      <li>코드를 자유롭게 수정하고</li>
      <li>버그를 짚어내고</li>
      <li>수정한 내용이 여러분이 작성한 다른 부분의 코드와 어떻게 상호작용하는지 알 수 있어야</li>
    </ul>
  </li>
  <li>“다른 사람”
    <ul>
      <li>“지금의 나”와 “6개월 뒤의 나”는 다른 사람</li>
    </ul>
  </li>
</ul>

<h1 id="section-4">이름에 정보 담기!!</h1>

<h2 id="section-5">특정 단어 고르기</h2>

<p><code class="highlighter-rouge">GetPage()</code></p>

<div class="language-java highlighter-rouge"><pre class="highlight"><code><span class="n">def</span> <span class="nf">GetPage</span><span class="o">(</span><span class="n">url</span><span class="o">):</span>
    <span class="o">...</span>
</code></pre>
</div>

<ul>
  <li>get은 지나치게 보편적</li>
  <li>로컬 캐쉬에서? 인터넷에서?!
    <ul>
      <li><code class="highlighter-rouge">FetchPage()</code>, <code class="highlighter-rouge">DownloadPage()</code></li>
    </ul>
  </li>
</ul>

<p><code class="highlighter-rouge">Size()</code></p>

<div class="language-java highlighter-rouge"><pre class="highlight"><code><span class="kd">class</span> <span class="nc">BinaryTree</span><span class="o">{</span>
    <span class="kt">int</span> <span class="nf">Size</span><span class="o">();</span>
    <span class="o">...</span>
<span class="o">}</span>
</code></pre>
</div>

<ul>
  <li>트리의 높이? Height()</li>
  <li>노드 개수? NumNodes()</li>
  <li>트리의 메모리? MemoryBytes()</li>
</ul>

<p><code class="highlighter-rouge">Stop()</code></p>

<div class="language-java highlighter-rouge"><pre class="highlight"><code><span class="kd">class</span> <span class="nc">Thread</span> <span class="o">{</span>
    <span class="kt">void</span> <span class="nf">Stop</span><span class="o">();</span>
<span class="o">}</span>
</code></pre>
</div>

<ul>
  <li>더 정확한 이름을 고를 수 있음</li>
  <li>되돌릴 수 없는 최종 동작이라면 <code class="highlighter-rouge">Kill()</code></li>
  <li><code class="highlighter-rouge">Resume()</code>등으로 다시 돌이킬 수 있다면 <code class="highlighter-rouge">Pause()</code></li>
</ul>

<p><strong>보다 다양한 단어를 활용</strong></p>

<table>
  <thead>
    <tr>
      <th>단어</th>
      <th>유의어</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>send</td>
      <td>deliver, dispatch, announce, distribute, route</td>
    </tr>
    <tr>
      <td>find</td>
      <td>search, extract, locate, recover</td>
    </tr>
    <tr>
      <td>start</td>
      <td>launch, create, begin, open</td>
    </tr>
    <tr>
      <td>make</td>
      <td>create, set up, build, generate, compose, add, new</td>
    </tr>
  </tbody>
</table>

<h1 id="tmp-retval---">tmp, retval같은 보편적 이름 피하기</h1>

<p><code class="highlighter-rouge">retval</code></p>

<ul>
  <li>리턴값이라고 무조건 <code class="highlighter-rouge">retval</code>을 쓰지 않기</li>
  <li>그 변수가 의미하는 바를 이름으로</li>
</ul>

<p><code class="highlighter-rouge">tmp</code></p>

<blockquote>
  <p>tmp라는 이름은 대상이 짧게 임시적으로만 존재하고, 임시적 존재 자체가 변수의 가장 중요한 용도일 때 한해서 사용해야한다.</p>
</blockquote>

<p><code class="highlighter-rouge">i</code>,<code class="highlighter-rouge">j</code>,<code class="highlighter-rouge">k</code></p>

<ul>
  <li>반복자라는 의미를 충분히 전달. 그래서 다른 목적으로 사용하면 헷갈릴 수 있음</li>
  <li>다음과 같이 중첩해서 사용할 때 헷갈리지 않도록 유의. 조금 더 명확하게</li>
</ul>

<div class="language-java highlighter-rouge"><pre class="highlight"><code><span class="k">for</span> <span class="o">(</span><span class="kt">int</span> <span class="n">i</span> <span class="o">=</span> <span class="mi">0</span><span class="o">;</span> <span class="n">i</span> <span class="o">&lt;</span> <span class="n">clubs</span><span class="o">.</span><span class="na">size</span><span class="o">();</span> <span class="n">i</span><span class="o">++)</span>
  <span class="k">for</span> <span class="o">(</span><span class="kt">int</span> <span class="n">j</span> <span class="o">=</span> <span class="mi">0</span><span class="o">;</span> <span class="n">j</span> <span class="o">&lt;</span> <span class="n">clubs</span><span class="o">[</span><span class="n">i</span><span class="o">].</span><span class="na">members</span><span class="o">.</span><span class="na">size</span><span class="o">();</span> <span class="n">j</span><span class="o">++)</span>
      <span class="k">for</span> <span class="o">(</span><span class="kt">int</span> <span class="n">k</span> <span class="o">=</span> <span class="mi">0</span><span class="o">;</span> <span class="n">k</span> <span class="o">&lt;</span> <span class="n">users</span><span class="o">.</span><span class="na">size</span><span class="o">();</span> <span class="n">k</span><span class="o">++)</span>
          <span class="k">if</span> <span class="o">(</span><span class="n">clubs</span><span class="o">[</span><span class="n">i</span><span class="o">].</span><span class="na">members</span><span class="o">[</span><span class="n">k</span><span class="o">]</span> <span class="o">==</span> <span class="n">users</span><span class="o">[</span><span class="n">j</span><span class="o">])</span>
              <span class="o">...</span>
</code></pre>
</div>
<p>이런 경우는</p>

<p><code class="highlighter-rouge">i</code> –&gt; <code class="highlighter-rouge">club_i</code>, <code class="highlighter-rouge">j</code> –&gt; <code class="highlighter-rouge">members_j</code>, <code class="highlighter-rouge">k</code> –&gt; <code class="highlighter-rouge">users_k</code></p>

<p>이런 식으로 명확하게 한다.</p>

<blockquote>
  <p>tmp, it, retval 같은 보편적인 이름을 사용하려면, 꼭 그렇게 해야하는 이유가 있어야 한다.</p>
</blockquote>

<h1 id="section-6">추상적인 이름보다 구체적인 이름을 선호하라</h1>

<h1 id="section-7">드모르간의 법칙 사용</h1>

<div class="language-java highlighter-rouge"><pre class="highlight"><code><span class="k">if</span> <span class="o">(!(</span><span class="n">file_exists</span> <span class="o">&amp;&amp;</span> <span class="o">!</span><span class="n">is_protected</span><span class="o">))</span> <span class="n">Error</span><span class="o">(</span><span class="s">"..."</span><span class="o">);</span>
</code></pre>
</div>

<div class="language-java highlighter-rouge"><pre class="highlight"><code><span class="k">if</span><span class="o">(!</span><span class="n">file_exists</span> <span class="o">||</span> <span class="n">is_protected</span><span class="o">))</span> <span class="n">Error</span><span class="o">(</span><span class="s">"..."</span><span class="o">);</span>
</code></pre>
</div>

<blockquote>
  <p>영리하게 작성한 코드에 유의하라. 나중에 다른 사람이 읽으면 그런 코드가 종종 혼란을 초래한다.</p>
</blockquote>

<h1 id="section-8">변수와 가독성</h1>

<ul>
  <li>변수의 수가 많을수록 기억하고 다루기 더 어려워진다.</li>
  <li>변수의 범위가 넓어질수록 기억하고 다루는 시간이 더 길어진다</li>
  <li>변수값이 자주 바뀔수록 현재값을 기억하고 다루기가 더 어려워진다.</li>
</ul>

<blockquote>
  <p>변수가 적용되는 범위를 최대한 좁게 만들어라</p>
</blockquote>

<div class="language-java highlighter-rouge"><pre class="highlight"><code><span class="kd">class</span> <span class="nc">LargeClass</span> <span class="o">{</span>
    <span class="n">string</span> <span class="n">str_</span><span class="o">;</span>

    <span class="kt">void</span> <span class="nf">Method1</span><span class="o">()</span> <span class="o">{</span>
        <span class="n">str_</span> <span class="o">=</span> <span class="o">...;</span>
        <span class="n">Method2</span><span class="o">();</span>
    <span class="o">}</span>

    <span class="kt">void</span> <span class="nf">Method2</span><span class="o">()</span> <span class="o">{</span>
        <span class="c1">// str_ 변수 사용하기</span>
    <span class="o">}</span>

    <span class="c1">// str_을 사용하지 않는 다른 메소드...</span>
<span class="o">};</span>
</code></pre>
</div>

<div class="language-java highlighter-rouge"><pre class="highlight"><code><span class="kd">class</span> <span class="nc">LargeClass</span> <span class="o">{</span>
    <span class="kt">void</span> <span class="nf">Method1</span><span class="o">()</span> <span class="o">{</span>
        <span class="n">string</span> <span class="n">str</span> <span class="o">=</span> <span class="o">...;</span>
        <span class="n">Method2</span><span class="o">(</span><span class="n">str</span><span class="o">);</span>
    <span class="o">}</span>

    <span class="kt">void</span> <span class="nf">Method2</span><span class="o">(</span><span class="n">string</span> <span class="n">str</span><span class="o">)</span> <span class="o">{</span>
        <span class="c1">// str 변수 사용하기</span>
    <span class="o">}</span>
<span class="o">};</span>
</code></pre>
</div>

<h1 id="section-9">라이브러리와 주변 도구에 대한 충분한 이해가 필요하다.</h1>

<ul>
  <li>Java 7,8에서 추가된 API에 대한 이해</li>
  <li>Spring 버전 업 정보 확인</li>
</ul>


                </div>
                <div class="read-all">
                    <a  href="/2016/10/11/readingoodcode/"><i class="fa fa-newspaper-o"></i>Read All</a>
                </div>
                <hr>
              </li>
            
              <li>
                <h2>
                  <a class="post-link" href="/2016/10/07/Predicate/">Java 8 Predicate</a>
                </h2>
                <div class="label">
                    <div class="label-card">
                        <i class="fa fa-calendar"></i>2016-10-07
                    </div>
                    <div class="label-card">
                        
                    </div>
                    <div class="label-card">
                        
                    </div>

                    <div class="label-card">
                    


<!-- <span class="point">•</span> -->
<span class="categories">
  <i class="fa fa-th-list"></i>
  
    
        <a href="/category/#Java" title="Category: Java" rel="category">Java</a>
    
  

  <!-- <span class="point">•</span> -->
</span>


                    </div>

                </div>
                <div class="excerpt">
                    <h1 id="predicate">Predicate</h1>

<p>삼항연산자은 <code class="highlighter-rouge">X ? {true,false}</code>라고 적는다. 이를 Predicate로 표현하면 <code class="highlighter-rouge">preicate on X</code>라고 말해주면 된다.</p>

<p><code class="highlighter-rouge">java 8</code>에서는 Predicate 함수를 인터페이스로 만들어 lambda 표현식이나 method reference로 사용할 수 있게 하였다.</p>

<h2 id="collection-predicate">Collection에서 Predicate사용</h2>

<div class="language-java highlighter-rouge"><pre class="highlight"><code><span class="kn">package</span> <span class="n">predicateExample</span><span class="o">;</span>
 
<span class="kd">public</span> <span class="kd">class</span> <span class="nc">Employee</span> <span class="o">{</span>
    
   <span class="kd">public</span> <span class="nf">Employee</span><span class="o">(</span><span class="n">Integer</span> <span class="n">id</span><span class="o">,</span> <span class="n">Integer</span> <span class="n">age</span><span class="o">,</span> <span class="n">String</span> <span class="n">gender</span><span class="o">,</span> <span class="n">String</span> <span class="n">fName</span><span class="o">,</span> <span class="n">String</span> <span class="n">lName</span><span class="o">){</span>
       <span class="k">this</span><span class="o">.</span><span class="na">id</span> <span class="o">=</span> <span class="n">id</span><span class="o">;</span>
       <span class="k">this</span><span class="o">.</span><span class="na">age</span> <span class="o">=</span> <span class="n">age</span><span class="o">;</span>
       <span class="k">this</span><span class="o">.</span><span class="na">gender</span> <span class="o">=</span> <span class="n">gender</span><span class="o">;</span>
       <span class="k">this</span><span class="o">.</span><span class="na">firstName</span> <span class="o">=</span> <span class="n">fName</span><span class="o">;</span>
       <span class="k">this</span><span class="o">.</span><span class="na">lastName</span> <span class="o">=</span> <span class="n">lName</span><span class="o">;</span>
   <span class="o">}</span> 
     
   <span class="kd">private</span> <span class="n">Integer</span> <span class="n">id</span><span class="o">;</span>
   <span class="kd">private</span> <span class="n">Integer</span> <span class="n">age</span><span class="o">;</span>
   <span class="kd">private</span> <span class="n">String</span> <span class="n">gender</span><span class="o">;</span>
   <span class="kd">private</span> <span class="n">String</span> <span class="n">firstName</span><span class="o">;</span>
   <span class="kd">private</span> <span class="n">String</span> <span class="n">lastName</span><span class="o">;</span>
 
   <span class="c1">//Please generate Getter and Setters</span>
 
    <span class="nd">@Override</span>
    <span class="kd">public</span> <span class="n">String</span> <span class="nf">toString</span><span class="o">()</span> <span class="o">{</span>
        <span class="k">return</span> <span class="k">this</span><span class="o">.</span><span class="na">id</span><span class="o">.</span><span class="na">toString</span><span class="o">()+</span><span class="s">" - "</span><span class="o">+</span><span class="k">this</span><span class="o">.</span><span class="na">age</span><span class="o">.</span><span class="na">toString</span><span class="o">();</span> <span class="c1">//To change body of generated methods, choose Tools | Templates.</span>
    <span class="o">}</span>
<span class="o">}</span>
</code></pre>
</div>

<p>직원 객체를 만들었다. 자 이제 <code class="highlighter-rouge">Predicate</code>를 사용해보자!!</p>

<h3 id="section">1) 직원 중 남자이고 나이가 21살이상인 사람 찾기!</h3>

<div class="language-java highlighter-rouge"><pre class="highlight"><code>
<span class="kd">public</span> <span class="kd">static</span> <span class="n">Predicate</span><span class="o">&lt;</span><span class="n">Employee</span><span class="o">&gt;</span> <span class="nf">isAdultMale</span><span class="o">()</span> <span class="o">{</span>
    <span class="k">return</span> <span class="n">p</span> <span class="o">-&gt;</span> <span class="n">p</span><span class="o">.</span><span class="na">getAge</span><span class="o">()</span> <span class="o">&gt;</span> <span class="mi">21</span> <span class="o">&amp;&amp;</span> <span class="n">p</span><span class="o">.</span><span class="na">getGender</span><span class="o">().</span><span class="na">equalsIgnoreCase</span><span class="o">(</span><span class="s">"M"</span><span class="o">);</span>
<span class="o">}</span>
</code></pre>
</div>

<h3 id="section-1">2) 직원 중 여자이고 나이가 18살이상인 사람 찾기!</h3>

<div class="language-java highlighter-rouge"><pre class="highlight"><code><span class="kd">public</span> <span class="kd">static</span> <span class="n">Predicate</span><span class="o">&lt;</span><span class="n">Employee</span><span class="o">&gt;</span> <span class="nf">isAdultFemale</span><span class="o">()</span> <span class="o">{</span>
    <span class="k">return</span> <span class="n">p</span> <span class="o">-&gt;</span> <span class="n">p</span><span class="o">.</span><span class="na">getAge</span><span class="o">()</span> <span class="o">&gt;</span> <span class="mi">18</span> <span class="o">&amp;&amp;</span> <span class="n">p</span><span class="o">.</span><span class="na">getGender</span><span class="o">().</span><span class="na">equalsIgnoreCase</span><span class="o">(</span><span class="s">"F"</span><span class="o">);</span>
<span class="o">}</span>
</code></pre>
</div>

<h3 id="section-2">3) 직원 중 주어진 나이보다 많은 사람 찾기!!</h3>

<div class="language-java highlighter-rouge"><pre class="highlight"><code><span class="kd">public</span> <span class="kd">static</span> <span class="n">Predicate</span><span class="o">&lt;</span><span class="n">Employee</span><span class="o">&gt;</span> <span class="nf">isAgeMoreThan</span><span class="o">(</span><span class="n">Integer</span> <span class="n">age</span><span class="o">)</span> <span class="o">{</span>
    <span class="k">return</span> <span class="n">p</span> <span class="o">-&gt;</span> <span class="n">p</span><span class="o">.</span><span class="na">getAge</span><span class="o">()</span> <span class="o">&gt;</span> <span class="n">age</span><span class="o">;</span>
<span class="o">}</span>
</code></pre>
</div>

<p>세가지 Predicate를 하나의 클래스로 만들어 관리하자</p>

<div class="language-java highlighter-rouge"><pre class="highlight"><code><span class="kn">package</span> <span class="n">predicateExample</span><span class="o">;</span>
 
<span class="kn">import</span> <span class="nn">java.util.List</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">java.util.function.Predicate</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">java.util.stream.Collectors</span><span class="o">;</span>
 
<span class="kd">public</span> <span class="kd">class</span> <span class="nc">EmployeePredicates</span> 
<span class="o">{</span>
    <span class="kd">public</span> <span class="kd">static</span> <span class="n">Predicate</span><span class="o">&lt;</span><span class="n">Employee</span><span class="o">&gt;</span> <span class="nf">isAdultMale</span><span class="o">()</span> <span class="o">{</span>
        <span class="k">return</span> <span class="n">p</span> <span class="o">-&gt;</span> <span class="n">p</span><span class="o">.</span><span class="na">getAge</span><span class="o">()</span> <span class="o">&gt;</span> <span class="mi">21</span> <span class="o">&amp;&amp;</span> <span class="n">p</span><span class="o">.</span><span class="na">getGender</span><span class="o">().</span><span class="na">equalsIgnoreCase</span><span class="o">(</span><span class="s">"M"</span><span class="o">);</span>
    <span class="o">}</span>
     
    <span class="kd">public</span> <span class="kd">static</span> <span class="n">Predicate</span><span class="o">&lt;</span><span class="n">Employee</span><span class="o">&gt;</span> <span class="nf">isAdultFemale</span><span class="o">()</span> <span class="o">{</span>
        <span class="k">return</span> <span class="n">p</span> <span class="o">-&gt;</span> <span class="n">p</span><span class="o">.</span><span class="na">getAge</span><span class="o">()</span> <span class="o">&gt;</span> <span class="mi">18</span> <span class="o">&amp;&amp;</span> <span class="n">p</span><span class="o">.</span><span class="na">getGender</span><span class="o">().</span><span class="na">equalsIgnoreCase</span><span class="o">(</span><span class="s">"F"</span><span class="o">);</span>
    <span class="o">}</span>
     
    <span class="kd">public</span> <span class="kd">static</span> <span class="n">Predicate</span><span class="o">&lt;</span><span class="n">Employee</span><span class="o">&gt;</span> <span class="nf">isAgeMoreThan</span><span class="o">(</span><span class="n">Integer</span> <span class="n">age</span><span class="o">)</span> <span class="o">{</span>
        <span class="k">return</span> <span class="n">p</span> <span class="o">-&gt;</span> <span class="n">p</span><span class="o">.</span><span class="na">getAge</span><span class="o">()</span> <span class="o">&gt;</span> <span class="n">age</span><span class="o">;</span>
    <span class="o">}</span>
     
    <span class="kd">public</span> <span class="kd">static</span> <span class="n">List</span><span class="o">&lt;</span><span class="n">Employee</span><span class="o">&gt;</span> <span class="nf">filterEmployees</span> <span class="o">(</span><span class="n">List</span><span class="o">&lt;</span><span class="n">Employee</span><span class="o">&gt;</span> <span class="n">employees</span><span class="o">,</span> <span class="n">Predicate</span><span class="o">&lt;</span><span class="n">Employee</span><span class="o">&gt;</span> <span class="n">predicate</span><span class="o">)</span> <span class="o">{</span>
        <span class="k">return</span> <span class="n">employees</span><span class="o">.</span><span class="na">stream</span><span class="o">().</span><span class="na">filter</span><span class="o">(</span> <span class="n">predicate</span> <span class="o">).</span><span class="na">collect</span><span class="o">(</span><span class="n">Collectors</span><span class="o">.&lt;</span><span class="n">Employee</span><span class="o">&gt;</span><span class="n">toList</span><span class="o">());</span>
    <span class="o">}</span>
<span class="o">}</span>   
</code></pre>
</div>

<p>여기서 <code class="highlighter-rouge">filterEmployees()</code> method를 볼 수 있다. 간단하게 filter를 구현하고 코드가 if문을 남발하지 않아도 되는 예쁜코드를 작성할 수 있게 되었다.</p>

<p>이를 사용한 예를 보자!!</p>

<div class="language-java highlighter-rouge"><pre class="highlight"><code><span class="kn">package</span> <span class="n">predicateExample</span><span class="o">;</span>
 
<span class="kn">import</span> <span class="nn">java.util.ArrayList</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">java.util.Arrays</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">java.util.List</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">static</span> <span class="n">predicateExample</span><span class="o">.</span><span class="na">EmployeePredicates</span><span class="o">.*;</span>
 
<span class="kd">public</span> <span class="kd">class</span> <span class="nc">TestEmployeePredicates</span> <span class="o">{</span>
    <span class="kd">public</span> <span class="kd">static</span> <span class="kt">void</span> <span class="nf">main</span><span class="o">(</span><span class="n">String</span><span class="o">[]</span> <span class="n">args</span><span class="o">){</span>
        <span class="n">Employee</span> <span class="n">e1</span> <span class="o">=</span> <span class="k">new</span> <span class="n">Employee</span><span class="o">(</span><span class="mi">1</span><span class="o">,</span><span class="mi">23</span><span class="o">,</span><span class="s">"M"</span><span class="o">,</span><span class="s">"Rick"</span><span class="o">,</span><span class="s">"Beethovan"</span><span class="o">);</span>
        <span class="n">Employee</span> <span class="n">e2</span> <span class="o">=</span> <span class="k">new</span> <span class="n">Employee</span><span class="o">(</span><span class="mi">2</span><span class="o">,</span><span class="mi">13</span><span class="o">,</span><span class="s">"F"</span><span class="o">,</span><span class="s">"Martina"</span><span class="o">,</span><span class="s">"Hengis"</span><span class="o">);</span>
        <span class="n">Employee</span> <span class="n">e3</span> <span class="o">=</span> <span class="k">new</span> <span class="n">Employee</span><span class="o">(</span><span class="mi">3</span><span class="o">,</span><span class="mi">43</span><span class="o">,</span><span class="s">"M"</span><span class="o">,</span><span class="s">"Ricky"</span><span class="o">,</span><span class="s">"Martin"</span><span class="o">);</span>
        <span class="n">Employee</span> <span class="n">e4</span> <span class="o">=</span> <span class="k">new</span> <span class="n">Employee</span><span class="o">(</span><span class="mi">4</span><span class="o">,</span><span class="mi">26</span><span class="o">,</span><span class="s">"M"</span><span class="o">,</span><span class="s">"Jon"</span><span class="o">,</span><span class="s">"Lowman"</span><span class="o">);</span>
        <span class="n">Employee</span> <span class="n">e5</span> <span class="o">=</span> <span class="k">new</span> <span class="n">Employee</span><span class="o">(</span><span class="mi">5</span><span class="o">,</span><span class="mi">19</span><span class="o">,</span><span class="s">"F"</span><span class="o">,</span><span class="s">"Cristine"</span><span class="o">,</span><span class="s">"Maria"</span><span class="o">);</span>
        <span class="n">Employee</span> <span class="n">e6</span> <span class="o">=</span> <span class="k">new</span> <span class="n">Employee</span><span class="o">(</span><span class="mi">6</span><span class="o">,</span><span class="mi">15</span><span class="o">,</span><span class="s">"M"</span><span class="o">,</span><span class="s">"David"</span><span class="o">,</span><span class="s">"Feezor"</span><span class="o">);</span>
        <span class="n">Employee</span> <span class="n">e7</span> <span class="o">=</span> <span class="k">new</span> <span class="n">Employee</span><span class="o">(</span><span class="mi">7</span><span class="o">,</span><span class="mi">68</span><span class="o">,</span><span class="s">"F"</span><span class="o">,</span><span class="s">"Melissa"</span><span class="o">,</span><span class="s">"Roy"</span><span class="o">);</span>
        <span class="n">Employee</span> <span class="n">e8</span> <span class="o">=</span> <span class="k">new</span> <span class="n">Employee</span><span class="o">(</span><span class="mi">8</span><span class="o">,</span><span class="mi">79</span><span class="o">,</span><span class="s">"M"</span><span class="o">,</span><span class="s">"Alex"</span><span class="o">,</span><span class="s">"Gussin"</span><span class="o">);</span>
        <span class="n">Employee</span> <span class="n">e9</span> <span class="o">=</span> <span class="k">new</span> <span class="n">Employee</span><span class="o">(</span><span class="mi">9</span><span class="o">,</span><span class="mi">15</span><span class="o">,</span><span class="s">"F"</span><span class="o">,</span><span class="s">"Neetu"</span><span class="o">,</span><span class="s">"Singh"</span><span class="o">);</span>
        <span class="n">Employee</span> <span class="n">e10</span> <span class="o">=</span> <span class="k">new</span> <span class="n">Employee</span><span class="o">(</span><span class="mi">10</span><span class="o">,</span><span class="mi">45</span><span class="o">,</span><span class="s">"M"</span><span class="o">,</span><span class="s">"Naveen"</span><span class="o">,</span><span class="s">"Jain"</span><span class="o">);</span>
         
        <span class="n">List</span><span class="o">&lt;</span><span class="n">Employee</span><span class="o">&gt;</span> <span class="n">employees</span> <span class="o">=</span> <span class="k">new</span> <span class="n">ArrayList</span><span class="o">&lt;</span><span class="n">Employee</span><span class="o">&gt;();</span>
        <span class="n">employees</span><span class="o">.</span><span class="na">addAll</span><span class="o">(</span><span class="n">Arrays</span><span class="o">.</span><span class="na">asList</span><span class="o">(</span><span class="k">new</span> <span class="n">Employee</span><span class="o">[]{</span><span class="n">e1</span><span class="o">,</span><span class="n">e2</span><span class="o">,</span><span class="n">e3</span><span class="o">,</span><span class="n">e4</span><span class="o">,</span><span class="n">e5</span><span class="o">,</span><span class="n">e6</span><span class="o">,</span><span class="n">e7</span><span class="o">,</span><span class="n">e8</span><span class="o">,</span><span class="n">e9</span><span class="o">,</span><span class="n">e10</span><span class="o">}));</span>
                
        <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">filterEmployees</span><span class="o">(</span><span class="n">employees</span><span class="o">,</span> <span class="n">isAdultMale</span><span class="o">()));</span>
         
        <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">filterEmployees</span><span class="o">(</span><span class="n">employees</span><span class="o">,</span> <span class="n">isAdultFemale</span><span class="o">()));</span>
         
        <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">filterEmployees</span><span class="o">(</span><span class="n">employees</span><span class="o">,</span> <span class="n">isAgeMoreThan</span><span class="o">(</span><span class="mi">35</span><span class="o">)));</span>
         
        <span class="c1">//Employees other than above collection of "isAgeMoreThan(35)" can be get using negate()</span>
        <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">filterEmployees</span><span class="o">(</span><span class="n">employees</span><span class="o">,</span> <span class="n">isAgeMoreThan</span><span class="o">(</span><span class="mi">35</span><span class="o">).</span><span class="na">negate</span><span class="o">()));</span>
    <span class="o">}</span>
<span class="o">}</span>
 
<span class="nl">Output:</span>
 
<span class="o">[</span><span class="mi">1</span> <span class="o">-</span> <span class="mi">23</span><span class="o">,</span> <span class="mi">3</span> <span class="o">-</span> <span class="mi">43</span><span class="o">,</span> <span class="mi">4</span> <span class="o">-</span> <span class="mi">26</span><span class="o">,</span> <span class="mi">8</span> <span class="o">-</span> <span class="mi">79</span><span class="o">,</span> <span class="mi">10</span> <span class="o">-</span> <span class="mi">45</span><span class="o">]</span>
<span class="o">[</span><span class="mi">5</span> <span class="o">-</span> <span class="mi">19</span><span class="o">,</span> <span class="mi">7</span> <span class="o">-</span> <span class="mi">68</span><span class="o">]</span>
<span class="o">[</span><span class="mi">3</span> <span class="o">-</span> <span class="mi">43</span><span class="o">,</span> <span class="mi">7</span> <span class="o">-</span> <span class="mi">68</span><span class="o">,</span> <span class="mi">8</span> <span class="o">-</span> <span class="mi">79</span><span class="o">,</span> <span class="mi">10</span> <span class="o">-</span> <span class="mi">45</span><span class="o">]</span>
<span class="o">[</span><span class="mi">1</span> <span class="o">-</span> <span class="mi">23</span><span class="o">,</span> <span class="mi">2</span> <span class="o">-</span> <span class="mi">13</span><span class="o">,</span> <span class="mi">4</span> <span class="o">-</span> <span class="mi">26</span><span class="o">,</span> <span class="mi">5</span> <span class="o">-</span> <span class="mi">19</span><span class="o">,</span> <span class="mi">6</span> <span class="o">-</span> <span class="mi">15</span><span class="o">,</span> <span class="mi">9</span> <span class="o">-</span> <span class="mi">15</span><span class="o">]</span>
</code></pre>
</div>

<h2 id="java8-predicates-">java8에서 Predicates의 지향점</h2>

<ol>
  <li>
    <p>They move your conditions (sometimes business logic) to a central place. This helps in unit-testing them separately.</p>
  </li>
  <li>
    <p>Any change need not be duplicated into multiple places. It improves manageability of code.</p>
  </li>
  <li>
    <p>The code e.g. <code class="highlighter-rouge">filterEmployees(employees, isAdultFemale())</code> is very much readable than writing a if-else block.</p>
  </li>
</ol>


                </div>
                <div class="read-all">
                    <a  href="/2016/10/07/Predicate/"><i class="fa fa-newspaper-o"></i>Read All</a>
                </div>
                <hr>
              </li>
            
              <li>
                <h2>
                  <a class="post-link" href="/2016/10/06/List_remvoeif-Method/">List.removeif Method</a>
                </h2>
                <div class="label">
                    <div class="label-card">
                        <i class="fa fa-calendar"></i>2016-10-06
                    </div>
                    <div class="label-card">
                        
                    </div>
                    <div class="label-card">
                        
                    </div>

                    <div class="label-card">
                    


<!-- <span class="point">•</span> -->
<span class="categories">
  <i class="fa fa-th-list"></i>
  
    
        <a href="/category/#Java" title="Category: Java" rel="category">Java</a>
    
  

  <!-- <span class="point">•</span> -->
</span>


                    </div>

                </div>
                <div class="excerpt">
                    <h1 id="listremvoeif-method">List.remvoeif Method</h1>

<p><code class="highlighter-rouge">removeif()</code>메소드는 리스트내의 엘리먼트를 필터조건의 만족한는 것만을 골라 삭제할 때 사용된다.</p>

<p><strong>Package:</strong> java.util</p>

<p><strong>Java Platform:</strong> Java SE 8</p>

<p><strong>Syntax:</strong></p>

<div class="language-java highlighter-rouge"><pre class="highlight"><code><span class="n">removeif</span><span class="o">(</span><span class="n">Prdicate</span><span class="o">&lt;?</span> <span class="kd">super</span> <span class="n">E</span><span class="o">&gt;</span> <span class="n">filter</span><span class="o">)</span>
</code></pre>
</div>

<p><strong>형태</strong></p>

<div class="language-java highlighter-rouge"><pre class="highlight"><code><span class="kd">public</span> <span class="kt">boolean</span> <span class="nf">removeIf</span><span class="o">(</span><span class="n">Predicate</span><span class="o">&lt;?</span> <span class="kd">super</span> <span class="n">E</span><span class="o">&gt;</span> <span class="n">filter</span><span class="o">)</span>
</code></pre>
</div>

<p><strong>예</strong></p>

<div class="language-java highlighter-rouge"><pre class="highlight"><code><span class="kn">import</span> <span class="nn">java.util.function.*</span><span class="o">;</span>  
  
<span class="kd">class</span> <span class="nc">SamplePredicate</span><span class="o">&lt;</span><span class="n">t</span><span class="o">&gt;</span> <span class="kd">implements</span> <span class="n">Predicate</span><span class="o">&lt;</span><span class="n">t</span><span class="o">&gt;{</span>  
  <span class="n">T</span> <span class="n">varc1</span><span class="o">;</span>  
  <span class="kd">public</span> <span class="kt">boolean</span> <span class="nf">test</span><span class="o">(</span><span class="n">T</span> <span class="n">varc</span><span class="o">){</span>  
  <span class="k">if</span><span class="o">(</span><span class="n">varc1</span><span class="o">.</span><span class="na">equals</span><span class="o">(</span><span class="n">varc</span><span class="o">)){</span>  
   <span class="k">return</span> <span class="kc">true</span><span class="o">;</span>  
  <span class="o">}</span>  
  <span class="k">return</span> <span class="kc">false</span><span class="o">;</span>  
  <span class="o">}</span>  
<span class="o">}</span>  
</code></pre>
</div>

<div class="language-java highlighter-rouge"><pre class="highlight"><code><span class="kn">import</span> <span class="nn">java.util.*</span><span class="o">;</span>  
  
<span class="kd">public</span> <span class="kd">class</span> <span class="nc">test</span> <span class="o">{</span>  
  <span class="kd">public</span> <span class="kd">static</span> <span class="kt">void</span> <span class="nf">main</span><span class="o">(</span><span class="n">String</span><span class="o">[]</span> <span class="n">args</span><span class="o">)</span> <span class="o">{</span>  
   
  <span class="n">ArrayList</span><span class="o">&lt;</span><span class="n">String</span><span class="o">&gt;</span> <span class="n">color_list</span><span class="o">;</span>  
  <span class="n">SamplePredicate</span><span class="o">&lt;</span><span class="n">String</span><span class="o">&gt;</span> <span class="n">filter</span><span class="o">;</span>  
    
  <span class="n">color_list</span> <span class="o">=</span> <span class="k">new</span> <span class="n">ArrayList</span><span class="o">&lt;&gt;</span> <span class="o">();</span>  
  <span class="n">filter</span> <span class="o">=</span> <span class="k">new</span> <span class="n">SamplePredicate</span><span class="o">&lt;&gt;</span> <span class="o">();</span>  
    
  <span class="n">filter</span><span class="o">.</span><span class="na">varc1</span> <span class="o">=</span> <span class="s">"White"</span><span class="o">;</span>  
    
 <span class="c1">// use add() method to add values in the list  </span>
    <span class="n">color_list</span><span class="o">.</span><span class="na">add</span><span class="o">(</span><span class="s">"White"</span><span class="o">);</span>  
    <span class="n">color_list</span><span class="o">.</span><span class="na">add</span><span class="o">(</span><span class="s">"Black"</span><span class="o">);</span>  
    <span class="n">color_list</span><span class="o">.</span><span class="na">add</span><span class="o">(</span><span class="s">"Red"</span><span class="o">);</span>  
    <span class="n">color_list</span><span class="o">.</span><span class="na">add</span><span class="o">(</span><span class="s">"White"</span><span class="o">);</span>  
    <span class="n">color_list</span><span class="o">.</span><span class="na">add</span><span class="o">(</span><span class="s">"Yellow"</span><span class="o">);</span>  
    <span class="n">color_list</span><span class="o">.</span><span class="na">add</span><span class="o">(</span><span class="s">"White"</span><span class="o">);</span>  
    
  <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">"List of Colors"</span><span class="o">);</span>  
  <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">color_list</span><span class="o">);</span>  
    
  <span class="c1">// Remove all White colors from color_list  </span>
  <span class="n">color_list</span><span class="o">.</span><span class="na">removeIf</span><span class="o">(</span><span class="n">filter</span><span class="o">);</span>  
    
  <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">"Color list, after removing White colors :"</span><span class="o">);</span>  
  <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">color_list</span><span class="o">);</span>  
    
 <span class="o">}</span>  
<span class="o">}</span> 
</code></pre>
</div>

<p><strong>결과</strong></p>

<div class="highlighter-rouge"><pre class="highlight"><code>List of Colors
[White, Black, Red, White, Yellow, White]
Color list, after removing White colors :
[Black, Red, Yellow]
</code></pre>
</div>

<p><br /></p>

<h3 id="reference">Reference</h3>
<ul>
  <li><a href="http://www.w3resource.com/java-tutorial/arraylist/arraylist_removeif.php">w3resource</a></li>
</ul>

                </div>
                <div class="read-all">
                    <a  href="/2016/10/06/List_remvoeif-Method/"><i class="fa fa-newspaper-o"></i>Read All</a>
                </div>
                <hr>
              </li>
            
        </ul>



        <!-- Pagination links -->
        <div class="pagination">
          
            <a href="/index.html" class="previous"><i class="fa fa-angle-double-left"></i></a>
            <a href="/page2" class="previous"><i class="fa fa-angle-left"></i></a>
          
          <span class="page_number ">3/7</span>
          
            <a href="/page4" class="next"><i class="fa fa-angle-right"></i></a>
            <a href="/page7" class="next"><i class="fa fa-angle-double-right"></i></a>
          
        </div>
    </div>
    <!-- <button class="anchor"><i class="fa fa-anchor"></i></button> -->
    <div class="right">
        <div class="wrap">
            <!-- Content -->
            <div class="side ">
                <div>
                    <i class="fa fa-th-list"></i>
                    Categories
                </div>
                <ul class="content-ul" cate>
                    
                    <li>
                        <a href="/category/#js" class="categories-list-item" cate="js">
                            <span class="name">
                                js
                            </span>
                            <span class="badge">8</span>
                        </a>
                    </li>
                    
                    <li>
                        <a href="/category/#web" class="categories-list-item" cate="web">
                            <span class="name">
                                web
                            </span>
                            <span class="badge">15</span>
                        </a>
                    </li>
                    
                    <li>
                        <a href="/category/#python" class="categories-list-item" cate="python">
                            <span class="name">
                                python
                            </span>
                            <span class="badge">2</span>
                        </a>
                    </li>
                    
                    <li>
                        <a href="/category/#Spring" class="categories-list-item" cate="Spring">
                            <span class="name">
                                Spring
                            </span>
                            <span class="badge">4</span>
                        </a>
                    </li>
                    
                    <li>
                        <a href="/category/#Hadoop" class="categories-list-item" cate="Hadoop">
                            <span class="name">
                                Hadoop
                            </span>
                            <span class="badge">2</span>
                        </a>
                    </li>
                    
                    <li>
                        <a href="/category/#Java" class="categories-list-item" cate="Java">
                            <span class="name">
                                Java
                            </span>
                            <span class="badge">3</span>
                        </a>
                    </li>
                    
                    <li>
                        <a href="/category/#Etc" class="categories-list-item" cate="Etc">
                            <span class="name">
                                Etc
                            </span>
                            <span class="badge">4</span>
                        </a>
                    </li>
                    
                    <li>
                        <a href="/category/#Unix/Linux" class="categories-list-item" cate="Unix/Linux">
                            <span class="name">
                                Unix/Linux
                            </span>
                            <span class="badge">2</span>
                        </a>
                    </li>
                    
                    <li>
                        <a href="/category/#Swift" class="categories-list-item" cate="Swift">
                            <span class="name">
                                Swift
                            </span>
                            <span class="badge">1</span>
                        </a>
                    </li>
                    
                </ul>
            </div>
            <div class="side">
                <div>
                    <i class="fa fa-pencil-square-o" aria-hidden="true"></i>
                    Recent Posts
                </div>
                <ul class="content-ul" recent>
                    
                        <li><a href="/2016/11/27/flasnginxsetting/">Flask + Nginx 설정</a></li>
                    
                        <li><a href="/2016/11/20/realtimeweb/">Real-time web tec List</a></li>
                    
                        <li><a href="/2016/11/18/Shortcircuitevaluation/">Short-circuit evaluation</a></li>
                    
                        <li><a href="/2016/11/10/JQuery_findnode/">jquery 선택자</a></li>
                    
                        <li><a href="/2016/11/07/jqueryselector/">jquery :last 선택자</a></li>
                    
                        <li><a href="/2016/11/04/regexp/">정규표현식</a></li>
                    
                        <li><a href="/2016/11/03/CORS/">CORS</a></li>
                    
                        <li><a href="/2016/11/02/gitaddpgitcommitv/">git add -p와 git commit -v</a></li>
                    
                        <li><a href="/2016/11/02/imagepixelget/">이미지 픽셀다루기</a></li>
                    
                        <li><a href="/2016/10/29/directorylisting/">Apache Directory listing 제거</a></li>
                    
                </ul>
            </div>

<!--
            <div class="side">
                <div>
                    <i class="fa fa-tags"></i>
                    Tags
                </div>
                <div class="tags-cloud">
                    
                    
                    
                    

                    

                    
                </div>
            </div> -->
        </div>
    </div>
</div>


    <footer class="site-footer">


    <div class="wrapper">

        <p class="description">
            
        </p>
        <p class="contact">
            Contact me at: 
            <a href="https://github.com/joswlv" title="GitHub"><i class="fa fa-github" aria-hidden="true"></i></a>  
            <a href="mailto:wh7923@gmail.com" title="email"><i class="fa fa-envelope-o" aria-hidden="true"></i></a>     
            <a href="https://www.facebook.com/wsj7923" title="Facebook"><i class="fa fa-facebook-official" aria-hidden="true"></i></a>    
        </p>
        <p>
        </p>
        <p class="power">
            <span>
                Site powered by <a href="https://jekyllrb.com/">Jekyll</a> & <a href="https://pages.github.com/">Github Pages</a>.
            </span>
        </p>
    </div>
</footer>
<script async src="https://dn-lbstatics.qbox.me/busuanzi/2.3/busuanzi.pure.mini.js"></script>

    <div class="back-to-top">
    <a href="#top" class="scroll">
        <i class="fa fa-arrow-up" aria-hidden="true"></i>
    </a>
</div>

    <script src=" /js/main.js " charset="utf-8"></script>
    <script src=" /js/scroll.min.js " charset="utf-8"></script>
  </body>

</html>
